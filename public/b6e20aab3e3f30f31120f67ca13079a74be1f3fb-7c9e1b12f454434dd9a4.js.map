{"version":3,"sources":["webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-crypto/sha256-js/build/constants.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/Util/DateUtils.js","webpack:///./node_modules/@aws-amplify/api-rest/lib-esm/RestClient.js","webpack:///./node_modules/@aws-amplify/auth/lib-esm/index.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/constants.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-crypto/sha256-js/build/jsSha256.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/index.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/I18n/I18n.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/I18n/index.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-crypto/sha256-js/build/RawSha256.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-crypto/sha256-js/build/index.js","webpack:///./node_modules/zen-observable-ts/node_modules/zen-observable/index.js","webpack:///./node_modules/paho-mqtt/paho-mqtt.js","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/index.js","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/location.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/error/printError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/error/GraphQLError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/visitor.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/printer.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/jsutils/inspect.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/jsutils/invariant.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/source.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/jsutils/defineToStringTag.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/error/syntaxError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/blockStringValue.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/lexer.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/kinds.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/directiveLocation.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/node_modules/graphql/language/parser.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/lib-esm/GraphQLAPI.js","webpack:///./node_modules/zen-observable-ts/lib/bundle.esm.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-sdk/util-utf8-browser/dist/es/index.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-sdk/util-utf8-browser/dist/es/whatwgEncodingApi.js","webpack:///./node_modules/@aws-amplify/core/node_modules/@aws-sdk/util-utf8-browser/dist/es/pureJs.js","webpack:///./node_modules/@aws-amplify/api-rest/lib-esm/RestAPI.js","webpack:///./node_modules/@aws-amplify/api/lib-esm/API.js","webpack:///./node_modules/zen-observable-ts/node_modules/zen-observable/lib/Observable.js","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/Providers/MqttOverWSProvider.js","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/Providers/PubSubProvider.js","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/Providers/AWSAppSyncProvider.js","webpack:///./node_modules/@aws-amplify/pubsub/node_modules/graphql/language/location.mjs","webpack:///./node_modules/@aws-amplify/pubsub/node_modules/graphql/error/printError.mjs","webpack:///./node_modules/@aws-amplify/pubsub/node_modules/graphql/error/GraphQLError.mjs","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/Providers/AWSAppSyncRealTimeProvider.js","webpack:///./node_modules/@aws-amplify/pubsub/lib-esm/PubSub.js","webpack:///./node_modules/@aws-amplify/core/lib-esm/Signer.js"],"names":["Object","defineProperty","exports","value","BLOCK_SIZE","DIGEST_LENGTH","KEY","Uint32Array","INIT","MAX_HASHABLE_LENGTH","Math","pow","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","error","DateUtils","clockOffset","getDateWithClockOffset","Date","getTime","getClockOffset","getHeaderStringFromDate","date","toISOString","replace","getDateFromHeaderString","header","_a","match","year","month","day","hour","minute","second","UTC","Number","isClockSkewed","serverDate","abs","isClockSkewError","response","headers","Boolean","setClockOffset","offset","__assign","assign","t","s","arguments","length","p","prototype","hasOwnProperty","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","TypeError","pop","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","logger","RestClient","options","_region","_service","_custom_header","undefined","_cancelTokenMap","Credentials","_options","debug","WeakMap","ajax","urlOrApiInfo","method","init","parsed_url","url","region","service","custom_header","params","libraryHeaders","userAgent","initParams","isAllResponse","custom_header_obj","_b","parsedUrl","_this","_c","_parseUrl","endpoint","host","path","data","responseType","timeout","cancelToken","isReactNative","FormData","JSON","stringify","withCredentials","cancellableToken","token","signerServiceInfo","search","query","queryStringParameters","keys","reduce","acc","k","_request","get","credentials","_signed","catch","dateHeader","responseDate","requestDate","err","put","patch","post","del","head","cancel","request","message","source","isCancel","a","getCancellableToken","CancelToken","updateRequestToBeCancellable","promise","cancelTokenSource","set","apiName","cloud_logic_array","endpoints","Array","isArray","forEach","name","signerServiceInfoParams","otherParams","endpoint_region","endpoint_service","creds","secret_key","secretAccessKey","access_key","accessKeyId","session_token","sessionToken","endpointInfo","signed_params","sign","parts","split","slice","join","hasSymbol","for","INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER","INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER","USER_AGENT_HEADER","tslib_1","constants_1","RawSha256_1","util_utf8_browser_1","Sha256","secret","hash","RawSha256","outer","inner","input","convertToBuffer","byteLength","bufferHash","update","digest","buffer","Uint8Array","bufferFromSecret","toHash","isEmptyData","digestSync","finished","fromUtf8","ArrayBuffer","isView","byteOffset","BYTES_PER_ELEMENT","Constants","I18n","_lang","_dict","language","window","navigator","setLanguage","lang","key","defVal","val","getByLanguage","lang_dict","putVocabulariesForLanguage","vocabularies","putVocabularies","map","_config","_i18n","configure","config","createInstance","getModuleName","checkConfig","Amplify","register","state","Int32Array","from","temp","bufferLength","bytesHashed","Error","position","hashBuffer","bitsHashed","bufferView","DataView","undecoratedLength","setUint8","setUint32","floor","out","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","t2","__exportStar","module","Observable","factory","global","localStorage","setItem","item","getItem","removeItem","MESSAGE_TYPE","validate","obj","errorStr","validKey","format","ERROR","INVALID_TYPE","scope","_scope","OK","code","text","CONNECT_TIMEOUT","SUBSCRIBE_TIMEOUT","UNSUBSCRIBE_TIMEOUT","PING_TIMEOUT","INTERNAL_ERROR","CONNACK_RETURNCODE","SOCKET_ERROR","SOCKET_CLOSE","MALFORMED_UTF","UNSUPPORTED","INVALID_STATE","INVALID_ARGUMENT","UNSUPPORTED_OPERATION","INVALID_STORED_DATA","INVALID_MQTT_MESSAGE_TYPE","MALFORMED_UNICODE","BUFFER_FULL","CONNACK_RC","0","1","2","3","4","5","substitutions","field","start","part1","substring","part2","MqttProtoIdentifierv3","MqttProtoIdentifierv4","WireMessage","type","decodeMessage","pos","digit","startingPos","first","messageInfo","remLength","multiplier","endPos","wireMessage","sessionPresent","returnCode","qos","len","readUint16","topicName","parseUTF8","messageIdentifier","Message","subarray","retained","duplicate","destinationName","payloadMessage","writeUint16","writeString","utf8Length","stringToUTF8","UTF8Length","output","charCode","charCodeAt","lowCharCode","isNaN","utf16","byte1","byte2","toString","byte3","byte4","String","fromCharCode","encode","willMessagePayloadBytes","topicStrLength","destinationNameLength","mqttVersion","clientId","willMessage","payloadBytes","userName","password","topics","requestedQos","mbi","number","numBytes","encodeMBI","byteStream","connectFlags","cleanSession","keepAliveInterval","Pinger","client","_client","_keepAliveInterval","isReset","pingReq","doTimeout","pinger","doPing","_trace","socket","send","setTimeout","_disconnected","reset","clearTimeout","Timeout","timeoutSeconds","action","args","ClientImpl","uri","port","WebSocket","_wsuri","_localKey","_msg_queue","_buffered_msg_queue","_sentMessages","_receivedMessages","_notify_msg_sent","_message_identifier","_sequence","restore","connected","maxMessageIdentifier","connectOptions","hostIndex","onConnected","onConnectionLost","onMessageDelivered","onMessageArrived","traceFunction","_connectTimeout","sendPinger","receivePinger","_reconnectInterval","_reconnecting","_reconnectTimeout","disconnectedPublishing","disconnectedBufferSize","receiveBuffer","_traceBuffer","_MAX_TRACE_ENTRIES","connect","connectOptionsMasked","_traceMask","uris","_doConnect","subscribe","filter","subscribeOptions","constructor","onSuccess","grantedQos","invocationContext","onFailure","errorCode","errorMessage","timeOut","_requires_ack","_schedule_message","unsubscribe","unsubscribeOptions","callback","sequence","unshift","disconnect","getTraceLog","startTrace","stopTrace","wsurl","useSSL","uriParts","binaryType","onopen","_on_socket_open","onmessage","_on_socket_message","onerror","_on_socket_error","onclose","_on_socket_close","_process_queue","store","prefix","storedMessage","version","pubRecReceived","hex","messageBytes","payloadHex","parse","x","parseInt","_socket_send","messageCount","event","messages","_deframeMessages","_handleMessage","byteArray","newData","errorStack","stack","sentMessage","receivedMessage","sequencedMessages","msgId","msg","sort","b","pubRelMessage","reconnected","_connected","_receivePublish","_receiveMessage","pubCompMessage","wireMessageMasked","pubAckMessage","pubRecMessage","reconnect","_reconnect","errorText","readyState","close","mqttVersionExplicit","splice","record","severity","max","shift","traceObject","masked","traceObjectMasked","attr","newPayload","payload","defineProperties","enumerable","newDestinationName","newQos","newRetained","newTopic","newDuplicate","Client","ipv6AddSBracket","clientIdLength","newOnConnected","newDisconnectedPublishing","newDisconnectedBufferSize","newOnConnectionLost","newOnMessageDelivered","newOnMessageArrived","trace","hosts","ports","stringPayload","usingURIs","test","ipv6","topic","publish","isConnected","self","CONTROL_MSG","getLocation","lineRegexp","line","column","exec","index","highlightSourceAtLocation","location","firstLineColumnOffset","locationOffset","whitespace","lineIndex","lineOffset","lineNum","columnOffset","columnNum","lines","concat","existingLines","_ref","padLen","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","return","_ref3","str","printPrefixedLines","GraphQLError","nodes","positions","originalError","extensions","_nodes","_source","node","loc","_locations","_positions","list","_extensions","writable","locations","configurable","captureStackTrace","create","printedLocations","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","printError","QueryDocumentKeys","Name","Document","OperationDefinition","VariableDefinition","Variable","SelectionSet","Field","Argument","FragmentSpread","InlineFragment","FragmentDefinition","IntValue","FloatValue","StringValue","BooleanValue","NullValue","EnumValue","ListValue","ObjectValue","ObjectField","Directive","NamedType","ListType","NonNullType","SchemaDefinition","OperationTypeDefinition","ScalarTypeDefinition","ObjectTypeDefinition","FieldDefinition","InputValueDefinition","InterfaceTypeDefinition","UnionTypeDefinition","EnumTypeDefinition","EnumValueDefinition","InputObjectTypeDefinition","DirectiveDefinition","SchemaExtension","ScalarTypeExtension","ObjectTypeExtension","InterfaceTypeExtension","UnionTypeExtension","EnumTypeExtension","InputObjectTypeExtension","BREAK","isNode","maybeNode","kind","getVisitFn","visitor","isLeaving","kindVisitor","kindSpecificVisitor","leave","enter","specificVisitor","specificKindVisitor","print","ast","root","visitorKeys","inArray","edits","parent","ancestors","newRoot","isEdited","clone","editOffset","ii","editKey","editValue","prev","visitFn","visit","printDocASTReducer","definitions","operation","varDefs","wrap","variableDefinitions","directives","selectionSet","variable","defaultValue","_ref2","block","selections","alias","_ref4","_ref5","_ref6","typeCondition","_ref7","_ref8","_ref9","_ref10","isDescription","escaped","indent","printBlockString","_ref11","_ref12","_ref13","values","_ref14","fields","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","operationTypes","_ref21","addDescription","_ref22","_ref23","interfaces","_ref24","every","arg","_ref25","_ref26","_ref27","types","_ref28","_ref29","_ref30","_ref31","_ref32","_ref33","_ref34","_ref35","_ref36","_ref37","_ref38","cb","description","maybeArray","separator","array","maybeString","end","_typeof","inspect","invariant","condition","_defineProperty","classObject","syntaxError","blockStringValue","rawString","commonIndent","leadingWhitespace","_i","isBlank","createLexer","startOfFileToken","Tok","TokenKind","SOF","lastToken","lineStart","advance","advanceLexer","lookahead","EOF","readToken","COMMENT","toStringTag","freeze","BANG","DOLLAR","AMP","PAREN_L","PAREN_R","SPREAD","COLON","EQUALS","AT","BRACKET_L","BRACKET_R","BRACE_L","PIPE","BRACE_R","NAME","INT","FLOAT","STRING","BLOCK_STRING","getTokenDesc","printCharCode","toUpperCase","lexer","bodyLength","startPosition","positionAfterWhitespace","col","readComment","readName","firstCode","isFloat","readDigits","readNumber","chunkStart","rawValue","readBlockString","c","d","char2hex","readString","unexpectedCharacterMessage","toJSON","Kind","DOCUMENT","OPERATION_DEFINITION","VARIABLE_DEFINITION","SELECTION_SET","FIELD","ARGUMENT","FRAGMENT_SPREAD","INLINE_FRAGMENT","FRAGMENT_DEFINITION","VARIABLE","BOOLEAN","NULL","ENUM","LIST","OBJECT","OBJECT_FIELD","DIRECTIVE","NAMED_TYPE","LIST_TYPE","NON_NULL_TYPE","SCHEMA_DEFINITION","OPERATION_TYPE_DEFINITION","SCALAR_TYPE_DEFINITION","OBJECT_TYPE_DEFINITION","FIELD_DEFINITION","INPUT_VALUE_DEFINITION","INTERFACE_TYPE_DEFINITION","UNION_TYPE_DEFINITION","ENUM_TYPE_DEFINITION","ENUM_VALUE_DEFINITION","INPUT_OBJECT_TYPE_DEFINITION","DIRECTIVE_DEFINITION","SCHEMA_EXTENSION","SCALAR_TYPE_EXTENSION","OBJECT_TYPE_EXTENSION","INTERFACE_TYPE_EXTENSION","UNION_TYPE_EXTENSION","ENUM_TYPE_EXTENSION","INPUT_OBJECT_TYPE_EXTENSION","DirectiveLocation","QUERY","MUTATION","SUBSCRIPTION","SCHEMA","SCALAR","ARGUMENT_DEFINITION","INTERFACE","UNION","ENUM_VALUE","INPUT_OBJECT","INPUT_FIELD_DEFINITION","sourceObj","many","parseDefinition","parseDocument","parseName","expect","peek","parseExecutableDefinition","parseTypeSystemDefinition","keywordToken","expectKeyword","parseDirectives","parseOperationTypeDefinition","unexpected","parseSchemaExtension","parseScalarTypeExtension","parseImplementsInterfaces","parseFieldsDefinition","parseObjectTypeExtension","parseInterfaceTypeExtension","parseUnionMemberTypes","parseUnionTypeExtension","parseEnumValuesDefinition","parseEnumTypeExtension","parseInputFieldsDefinition","parseInputObjectTypeExtension","parseTypeSystemExtension","peekDescription","parseOperationDefinition","experimentalFragmentVariables","parseFragmentName","parseVariableDefinitions","parseNamedType","parseSelectionSet","parseFragmentDefinition","parseOperationType","operationToken","parseVariableDefinition","experimentalVariableDefinitionDirectives","parseVariable","parseTypeReference","skip","parseValueLiteral","parseSelection","parseFragment","nameOrAlias","parseArguments","parseField","isConst","parseConstArgument","parseArgument","parseConstValue","parseValueValue","any","parseList","parseObjectField","parseObject","parseStringLiteral","parseDirective","parseSchemaDefinition","parseDescription","parseScalarTypeDefinition","parseObjectTypeDefinition","parseInterfaceTypeDefinition","parseUnionTypeDefinition","parseEnumTypeDefinition","parseInputObjectTypeDefinition","parseArgumentDefs","parseDirectiveLocation","parseDirectiveLocations","parseDirectiveDefinition","allowLegacySDLImplementsInterfaces","allowLegacySDLEmptyFields","parseFieldDefinition","parseInputValueDef","parseEnumValueDefinition","startToken","noLocation","Loc","endToken","atToken","openKind","parseFn","closeKind","graphqlOperation","variables","GraphQLAPIClass","_api","Auth","Cache","API","otherOptions","opt","graphql_headers","warn","_headerBasedAuth","defaultAuthenticationType","aws_appsync_authenticationType","apiKey","federatedInfo","currentUser","session","aws_appsync_apiKey","Authorization","_ensureCredentials","currentAuthenticatedUser","currentSession","getAccessToken","getJwtToken","getGraphqlOperationType","doc","graphql","additionalHeaders","paramQuery","authMode","_d","def","operationType","responsePromise","_graphql","_graphqlSubscribe","appSyncGraphqlEndpoint","customGraphqlEndpoint","customEndpointRegion","_e","_f","_g","_h","_j","err_1","errors","_k","_l","aws_appsync_region","aws_appsync_graphqlEndpoint","graphql_endpoint","graphql_endpoint_iam_region","authenticationType","provider","cred","shear","GraphQLAPI","TextEncoder","bytes","surrogatePair","TextDecoder","decode","decoded","byte","nextByte","encoded","byteValue","decodeURIComponent","RestAPIClass","custom","apiInfo","getEndpointInfo","apiConfig","find","api","RestAPI","APIClass","_restApi","_graphqlApi","restAPIConfig","graphQLAPIConfig","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","hasSymbols","getSymbol","observable","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","ctor","isObservable","hostReportError","log","enqueue","fn","cleanupSubscription","subscription","cleanup","_cleanup","closeSubscription","_observer","_queue","_state","notifySubscription","observer","onNotify","queue","flushSubscription","Subscription","subscriber","subscriptionObserver","SubscriptionObserver","_subscription","_subscriber","complete","_this2","_this3","_this4","C","hasSeed","hasValue","seed","_this5","_len","sources","_key","startNext","_this6","subscriptions","completeIfDone","closed","_item","_len2","items","_key2","symbol","_extendStatics","AbstractPubSubProvider","getProviderName","getCategory","__extends","setPrototypeOf","__proto__","__","ClientsQueue","promises","Map","clientFactory","remove","delete","topicSymbol","_super","MqttOverWSProvider","uuid","_clientsQueue","_topicObservers","_clientIdObservers","aws_pubsub_endpoint","aws_appsync_dangerously_connect_to_http_endpoint_for_testing","getTopicForValue","onDisconnect","topicsToDelete_1","clientIdObservers","observerForTopic","observerTopic","size","newClient","payloadString","_onMessage","isSSLEnabled","clientsQueue","targetTopics","matchedTopicObservers_1","filterArray","topicArray","left","right","mqttTopicMatch","parsedMessage_1","observersForTopic","Set","add","observersForClientId","e_1","__spread","AWSAppSyncProvider","_topicClient","_topicAlias","_cleanUp","entries","_cleanUpForTopic","has","obs","mqttConnections","newSubscriptions","newAliases","elem","connectionInfoForTopic","all","some","origKey","MESSAGE_TYPES","SUBSCRIPTION_STATUS","SOCKET_STATUS","AMPLIFY_SYMBOL","NON_RETRYABLE_CODES","AWS_APPSYNC_REALTIME_HEADERS","accept","AWSAppSyncRealTimeProvider","socketStatus","CLOSED","keepAliveTimeout","subscriptionObserverMap","promiseArray","_topics","_msg","subscriptionId_1","_startSubscriptionWithAWSAppSyncRealTime","subscriptionId","subscriptionState","_waitForSubscriptionToBeConnected","CONNECTED","_sendUnsubscriptionMessage","_removeSubscriptionObserver","dataString","headerObj","subscriptionMessage","stringToAWSRealTime","err_2","subscriptionFailedCallback_1","subscriptionFailedCallback","subscriptionReadyCallback","PENDING","startAckTimeoutId","_awsRealTimeHeaderBasedAuth","canonicalUri","id","authorization","GQL_START","_initializeWebSocketConnection","_timeoutStartSubscriptionAck","awsRealTimeSocket","res","rej","OPEN","READY","unsubscribeMessage","GQL_STOP","_closeSocketIfRequired","bind","bufferedAmount","keepAliveTimeoutId","tempSocket","_handleIncomingSubscriptionMessage","GQL_DATA","GQL_START_ACK","GQL_CONNECTION_KEEP_ALIVE","_errorDisconnect","TIMEOUT_DISCONNECT","GQL_ERROR","FAILED","Hub","dispatch","SUBSCRIPTION_ACK","clear","protocol","discoverableEndpoint","headerString","headerQs","payloadQs","awsRealTimeUrl","err_3","CONNECTING","_initializeRetryableHandshake","_initializeHandshake","err_4","errorType","newSocket","ackOk","reason","connectionTimeoutMs","GQL_CONNECTION_ACK","CONNECTION_CLOSED","GQL_CONNECTION_ERROR","gqlInit","GQL_CONNECTION_INIT","includes","headerHandler","handler","API_KEY","_awsRealTimeApiKeyHeader","AWS_IAM","_awsRealTimeIAMHeader","OPENID_CONNECT","_awsRealTimeOPENIDHeader","AMAZON_COGNITO_USER_POOLS","_awsRealTimeCUPHeader","dt","dtStr","Signer","PubSub","PubSubClass","_pluggables","_awsAppSyncProvider","_awsAppSyncRealTimeProvider","pluggable","addPluggable","getProviderByName","providerName","awsAppSyncProvider","awsAppSyncRealTimeProvider","getProviders","ssr","providers","console","_error","encrypt","src","signed_headers","toLowerCase","canonical_request","url_info","encodeURIComponent","pathname","key_val","reencoded_val","key_a","key_b","trim","parse_service_info","parsed","reverse","credential_scope","d_str","string_to_sign","algorithm","dt_str","get_signing_key","service_info","k_date","k_region","k_service","get_signature","signing_key","str_to_sign","access_info","substr","request_str","serviceInfo","signature","authorization_header","get_authorization_header","signUrl","urlOrRequest","accessInfo","expiration","urlToSign","now","today","signedHeaders","credentialScope","sessionTokenRequired","queryParams","canonicalRequest","stringToSign","additionalQueryParams","slashes","hostname"],"mappings":"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","file":"b6e20aab3e3f30f31120f67ca13079a74be1f3fb-7c9e1b12f454434dd9a4.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @internal\n */\n\nexports.BLOCK_SIZE = 64;\n/**\n * @internal\n */\n\nexports.DIGEST_LENGTH = 32;\n/**\n * @internal\n */\n\nexports.KEY = new Uint32Array([0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2]);\n/**\n * @internal\n */\n\nexports.INIT = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n/**\n * @internal\n */\n\nexports.MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;","/**\n * Date & time utility functions to abstract the `aws-sdk` away from users.\n * (v2 => v3 modularization is a breaking change)\n *\n * @see https://github.com/aws/aws-sdk-js/blob/6edf586dcc1de7fe8fbfbbd9a0d2b1847921e6e1/lib/util.js#L262\n */\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}; // Comment - TODO: remove\n\n\nvar FIVE_MINUTES_IN_MS = 1000 * 60 * 5;\nexport var DateUtils = {\n  /**\n   * Milliseconds to offset the date to compensate for clock skew between device & services\n   */\n  clockOffset: 0,\n  getDateWithClockOffset: function getDateWithClockOffset() {\n    if (DateUtils.clockOffset) {\n      return new Date(new Date().getTime() + DateUtils.clockOffset);\n    } else {\n      return new Date();\n    }\n  },\n\n  /**\n   * @returns {number} Clock offset in milliseconds\n   */\n  getClockOffset: function getClockOffset() {\n    return DateUtils.clockOffset;\n  },\n  getHeaderStringFromDate: function getHeaderStringFromDate(date) {\n    if (date === void 0) {\n      date = DateUtils.getDateWithClockOffset();\n    }\n\n    return date.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n  },\n  getDateFromHeaderString: function getDateFromHeaderString(header) {\n    var _a = __read(header.match(/^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2}).+/), 7),\n        year = _a[1],\n        month = _a[2],\n        day = _a[3],\n        hour = _a[4],\n        minute = _a[5],\n        second = _a[6];\n\n    return new Date(Date.UTC(Number(year), Number(month) - 1, Number(day), Number(hour), Number(minute), Number(second)));\n  },\n  isClockSkewed: function isClockSkewed(serverDate) {\n    // API gateway permits client calls that are off by no more than ±5 minutes\n    return Math.abs(serverDate.getTime() - DateUtils.getDateWithClockOffset().getTime()) >= FIVE_MINUTES_IN_MS;\n  },\n  isClockSkewError: function isClockSkewError(error) {\n    if (!error.response || !error.response.headers) {\n      return false;\n    }\n\n    var headers = error.response.headers;\n    return Boolean(headers['x-amzn-errortype'] === 'BadRequestException' && (headers.date || headers.Date));\n  },\n\n  /**\n   * @param {number} offset Clock offset in milliseconds\n   */\n  setClockOffset: function setClockOffset(offset) {\n    DateUtils.clockOffset = offset;\n  }\n};","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { ConsoleLogger as Logger, Credentials, DateUtils, Signer, Platform } from '@aws-amplify/core';\nimport axios from 'axios';\nimport { parse, format } from 'url';\nvar logger = new Logger('RestClient');\n/**\n* HTTP Client for REST requests. Send and receive JSON data.\n* Sign request with AWS credentials if available\n* Usage:\n<pre>\nconst restClient = new RestClient();\nrestClient.get('...')\n    .then(function(data) {\n        console.log(data);\n    })\n    .catch(err => console.log(err));\n</pre>\n*/\n\nvar RestClient =\n/** @class */\nfunction () {\n  /**\n   * @param {RestClientOptions} [options] - Instance options\n   */\n  function RestClient(options) {\n    this._region = 'us-east-1'; // this will be updated by endpoint function\n\n    this._service = 'execute-api'; // this can be updated by endpoint function\n\n    this._custom_header = undefined; // this can be updated by endpoint function\n\n    /**\n     * This weak map provides functionality to let clients cancel\n     * in-flight axios requests. https://github.com/axios/axios#cancellation\n     *\n     * 1. For every axios request, a unique cancel token is generated and added in the request.\n     * 2. Promise for fulfilling the request is then mapped to that unique cancel token.\n     * 3. The promise is returned to the client.\n     * 4. Clients can either wait for the promise to fulfill or call `API.cancel(promise)` to cancel the request.\n     * 5. If `API.cancel(promise)` is called, then the corresponding cancel token is retrieved from the map below.\n     * 6. Promise returned to the client will be in rejected state with the error provided during cancel.\n     * 7. Clients can check if the error is because of cancelling by calling `API.isCancel(error)`.\n     *\n     * For more details, see https://github.com/aws-amplify/amplify-js/pull/3769#issuecomment-552660025\n     */\n\n    this._cancelTokenMap = null;\n    this.Credentials = Credentials;\n    this._options = options;\n    logger.debug('API Options', this._options);\n\n    if (this._cancelTokenMap == null) {\n      this._cancelTokenMap = new WeakMap();\n    }\n  }\n  /**\n  * Update AWS credentials\n  * @param {AWSCredentials} credentials - AWS credentials\n  *\n  updateCredentials(credentials: AWSCredentials) {\n      this.options.credentials = credentials;\n  }\n  */\n\n  /**\n   * Basic HTTP request. Customizable\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {string} method - Request HTTP method\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.ajax = function (urlOrApiInfo, method, init) {\n    return __awaiter(this, void 0, void 0, function () {\n      var parsed_url, url, region, service, custom_header, params, libraryHeaders, userAgent, initParams, isAllResponse, custom_header_obj, _a, _b, search, parsedUrl;\n\n      var _this = this;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            logger.debug(method, urlOrApiInfo);\n            region = 'us-east-1';\n            service = 'execute-api';\n            custom_header = undefined;\n\n            if (typeof urlOrApiInfo === 'string') {\n              parsed_url = this._parseUrl(urlOrApiInfo);\n              url = urlOrApiInfo;\n            } else {\n              url = urlOrApiInfo.endpoint, custom_header = urlOrApiInfo.custom_header, region = urlOrApiInfo.region, service = urlOrApiInfo.service;\n              parsed_url = this._parseUrl(urlOrApiInfo.endpoint);\n            }\n\n            params = {\n              method: method,\n              url: url,\n              host: parsed_url.host,\n              path: parsed_url.path,\n              headers: {},\n              data: null,\n              responseType: 'json',\n              timeout: 0,\n              cancelToken: null\n            };\n            libraryHeaders = {};\n\n            if (Platform.isReactNative) {\n              userAgent = Platform.userAgent || 'aws-amplify/0.1.x';\n              libraryHeaders = {\n                'User-Agent': userAgent\n              };\n            }\n\n            initParams = Object.assign({}, init);\n            isAllResponse = initParams.response;\n\n            if (initParams.body) {\n              if (typeof FormData === 'function' && initParams.body instanceof FormData) {\n                libraryHeaders['Content-Type'] = 'multipart/form-data';\n                params.data = initParams.body;\n              } else {\n                libraryHeaders['Content-Type'] = 'application/json; charset=UTF-8';\n                params.data = JSON.stringify(initParams.body);\n              }\n            }\n\n            if (initParams.responseType) {\n              params.responseType = initParams.responseType;\n            }\n\n            if (initParams.withCredentials) {\n              params['withCredentials'] = initParams.withCredentials;\n            }\n\n            if (initParams.timeout) {\n              params.timeout = initParams.timeout;\n            }\n\n            if (initParams.cancellableToken) {\n              params.cancelToken = initParams.cancellableToken.token;\n            }\n\n            params['signerServiceInfo'] = initParams.signerServiceInfo;\n            if (!(typeof custom_header === 'function')) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , custom_header()];\n\n          case 1:\n            _a = _c.sent();\n            return [3\n            /*break*/\n            , 3];\n\n          case 2:\n            _a = undefined;\n            _c.label = 3;\n\n          case 3:\n            custom_header_obj = _a;\n            params.headers = __assign(__assign(__assign({}, libraryHeaders), custom_header_obj), initParams.headers);\n            _b = parse(url, true, true), search = _b.search, parsedUrl = __rest(_b, [\"search\"]);\n            params.url = format(__assign(__assign({}, parsedUrl), {\n              query: __assign(__assign({}, parsedUrl.query), initParams.queryStringParameters || {})\n            })); // Do not sign the request if client has added 'Authorization' header,\n            // which means custom authorizer.\n\n            if (typeof params.headers['Authorization'] !== 'undefined') {\n              params.headers = Object.keys(params.headers).reduce(function (acc, k) {\n                if (params.headers[k]) {\n                  acc[k] = params.headers[k];\n                }\n\n                return acc; // tslint:disable-next-line:align\n              }, {});\n              return [2\n              /*return*/\n              , this._request(params, isAllResponse)];\n            } // Signing the request in case there credentials are available\n\n\n            return [2\n            /*return*/\n            , this.Credentials.get().then(function (credentials) {\n              return _this._signed(__assign({}, params), credentials, isAllResponse, {\n                region: region,\n                service: service\n              }).catch(function (error) {\n                if (DateUtils.isClockSkewError(error)) {\n                  var headers = error.response.headers;\n                  var dateHeader = headers && (headers.date || headers.Date);\n                  var responseDate = new Date(dateHeader);\n                  var requestDate = DateUtils.getDateFromHeaderString(params.headers['x-amz-date']);\n\n                  if (DateUtils.isClockSkewed(requestDate, responseDate)) {\n                    DateUtils.setClockOffset(responseDate.getTime() - requestDate.getTime());\n                    return _this.ajax(urlOrApiInfo, method, init);\n                  }\n                }\n\n                throw error;\n              });\n            }, function (err) {\n              logger.debug('No credentials available, the request will be unsigned');\n              return _this._request(params, isAllResponse);\n            })];\n        }\n      });\n    });\n  };\n  /**\n   * GET HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {JSON} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.get = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'GET', init);\n  };\n  /**\n   * PUT HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {json} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.put = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'PUT', init);\n  };\n  /**\n   * PATCH HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {json} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.patch = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'PATCH', init);\n  };\n  /**\n   * POST HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {json} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.post = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'POST', init);\n  };\n  /**\n   * DELETE HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {json} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.del = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'DELETE', init);\n  };\n  /**\n   * HEAD HTTP request\n   * @param {string | ApiInfo } urlOrApiInfo - Full request URL or Api information\n   * @param {json} init - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestClient.prototype.head = function (urlOrApiInfo, init) {\n    return this.ajax(urlOrApiInfo, 'HEAD', init);\n  };\n  /**\n   * Cancel an inflight API request\n   * @param {Promise<any>} request - The request promise to cancel\n   * @param {string} [message] - A message to include in the cancelation exception\n   */\n\n\n  RestClient.prototype.cancel = function (request, message) {\n    var source = this._cancelTokenMap.get(request);\n\n    if (source) {\n      source.cancel(message);\n    }\n\n    return true;\n  };\n  /**\n   * Checks to see if an error thrown is from an api request cancellation\n   * @param {any} error - Any error\n   * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n   */\n\n\n  RestClient.prototype.isCancel = function (error) {\n    return axios.isCancel(error);\n  };\n  /**\n   * Retrieves a new and unique cancel token which can be\n   * provided in an axios request to be cancelled later.\n   */\n\n\n  RestClient.prototype.getCancellableToken = function () {\n    return axios.CancelToken.source();\n  };\n  /**\n   * Updates the weakmap with a response promise and its\n   * cancel token such that the cancel token can be easily\n   * retrieved (and used for cancelling the request)\n   */\n\n\n  RestClient.prototype.updateRequestToBeCancellable = function (promise, cancelTokenSource) {\n    this._cancelTokenMap.set(promise, cancelTokenSource);\n  };\n  /**\n   * Getting endpoint for API\n   * @param {string} apiName - The name of the api\n   * @return {string} - The endpoint of the api\n   */\n\n\n  RestClient.prototype.endpoint = function (apiName) {\n    var _this = this;\n\n    var cloud_logic_array = this._options.endpoints;\n    var response = '';\n\n    if (!Array.isArray(cloud_logic_array)) {\n      return response;\n    }\n\n    cloud_logic_array.forEach(function (v) {\n      if (v.name === apiName) {\n        response = v.endpoint;\n\n        if (typeof v.region === 'string') {\n          _this._region = v.region;\n        } else if (typeof _this._options.region === 'string') {\n          _this._region = _this._options.region;\n        }\n\n        if (typeof v.service === 'string') {\n          _this._service = v.service || 'execute-api';\n        } else {\n          _this._service = 'execute-api';\n        }\n\n        if (typeof v.custom_header === 'function') {\n          _this._custom_header = v.custom_header;\n        } else {\n          _this._custom_header = undefined;\n        }\n      }\n    });\n    return response;\n  };\n  /** private methods **/\n\n\n  RestClient.prototype._signed = function (params, credentials, isAllResponse, _a) {\n    var service = _a.service,\n        region = _a.region;\n\n    var signerServiceInfoParams = params.signerServiceInfo,\n        otherParams = __rest(params, [\"signerServiceInfo\"]);\n\n    var endpoint_region = region || this._region || this._options.region;\n    var endpoint_service = service || this._service || this._options.service;\n    var creds = {\n      secret_key: credentials.secretAccessKey,\n      access_key: credentials.accessKeyId,\n      session_token: credentials.sessionToken\n    };\n    var endpointInfo = {\n      region: endpoint_region,\n      service: endpoint_service\n    };\n    var signerServiceInfo = Object.assign(endpointInfo, signerServiceInfoParams);\n    var signed_params = Signer.sign(otherParams, creds, signerServiceInfo);\n\n    if (signed_params.data) {\n      signed_params.body = signed_params.data;\n    }\n\n    logger.debug('Signed Request: ', signed_params);\n    delete signed_params.headers['host'];\n    return axios(signed_params).then(function (response) {\n      return isAllResponse ? response : response.data;\n    }).catch(function (error) {\n      logger.debug(error);\n      throw error;\n    });\n  };\n\n  RestClient.prototype._request = function (params, isAllResponse) {\n    if (isAllResponse === void 0) {\n      isAllResponse = false;\n    }\n\n    return axios(params).then(function (response) {\n      return isAllResponse ? response : response.data;\n    }).catch(function (error) {\n      logger.debug(error);\n      throw error;\n    });\n  };\n\n  RestClient.prototype._parseUrl = function (url) {\n    var parts = url.split('/');\n    return {\n      host: parts[2],\n      path: '/' + parts.slice(3).join('/')\n    };\n  };\n\n  return RestClient;\n}();\n\nexport { RestClient };","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { Auth } from './Auth';\nimport { CognitoHostedUIIdentityProvider } from './types/Auth';\nimport { CognitoUser, CookieStorage, appendToCognitoUserAgent } from 'amazon-cognito-identity-js';\nimport { AuthErrorStrings } from './common/AuthErrorStrings';\n/**\n * @deprecated use named import\n */\n\nexport default Auth;\nexport { Auth, CognitoUser, CookieStorage, CognitoHostedUIIdentityProvider, appendToCognitoUserAgent, AuthErrorStrings };","/*\n * Copyright 2018-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n/**\n * This Symbol is used to reference an internal-only PubSub provider that\n * is used for AppSync/GraphQL subscriptions in the API category.\n */\nvar hasSymbol = typeof Symbol !== 'undefined' && typeof Symbol.for === 'function';\nexport var INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER = hasSymbol ? Symbol.for('INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER') : '@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER';\nexport var INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER = hasSymbol ? Symbol.for('INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER') : '@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER';\nexport var USER_AGENT_HEADER = 'x-amz-user-agent';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar constants_1 = require(\"./constants\");\n\nvar RawSha256_1 = require(\"./RawSha256\");\n\nvar util_utf8_browser_1 = require(\"@aws-sdk/util-utf8-browser\");\n\nvar Sha256 =\n/** @class */\nfunction () {\n  function Sha256(secret) {\n    this.hash = new RawSha256_1.RawSha256();\n\n    if (secret) {\n      this.outer = new RawSha256_1.RawSha256();\n      var inner = bufferFromSecret(secret);\n      var outer = new Uint8Array(constants_1.BLOCK_SIZE);\n      outer.set(inner);\n\n      for (var i = 0; i < constants_1.BLOCK_SIZE; i++) {\n        inner[i] ^= 0x36;\n        outer[i] ^= 0x5c;\n      }\n\n      this.hash.update(inner);\n      this.outer.update(outer); // overwrite the copied key in memory\n\n      for (var i = 0; i < inner.byteLength; i++) {\n        inner[i] = 0;\n      }\n    }\n  }\n\n  Sha256.prototype.update = function (toHash) {\n    if (isEmptyData(toHash) || this.error) {\n      return;\n    }\n\n    try {\n      this.hash.update(convertToBuffer(toHash));\n    } catch (e) {\n      this.error = e;\n    }\n  };\n  /* This synchronous method keeps compatibility\n   * with the v2 aws-sdk.\n   */\n\n\n  Sha256.prototype.digestSync = function () {\n    if (this.error) {\n      throw this.error;\n    }\n\n    if (this.outer) {\n      if (!this.outer.finished) {\n        this.outer.update(this.hash.digest());\n      }\n\n      return this.outer.digest();\n    }\n\n    return this.hash.digest();\n  };\n  /* The underlying digest method here is synchronous.\n   * To keep the same interface with the other hash functions\n   * the default is to expose this as an async method.\n   * However, it can sometimes be useful to have a sync method.\n   */\n\n\n  Sha256.prototype.digest = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      return tslib_1.__generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.digestSync()];\n      });\n    });\n  };\n\n  return Sha256;\n}();\n\nexports.Sha256 = Sha256;\n\nfunction bufferFromSecret(secret) {\n  var input = convertToBuffer(secret);\n\n  if (input.byteLength > constants_1.BLOCK_SIZE) {\n    var bufferHash = new RawSha256_1.RawSha256();\n    bufferHash.update(input);\n    input = bufferHash.digest();\n  }\n\n  var buffer = new Uint8Array(constants_1.BLOCK_SIZE);\n  buffer.set(input);\n  return buffer;\n}\n\nfunction isEmptyData(data) {\n  if (typeof data === \"string\") {\n    return data.length === 0;\n  }\n\n  return data.byteLength === 0;\n}\n\nfunction convertToBuffer(data) {\n  if (typeof data === \"string\") {\n    return util_utf8_browser_1.fromUtf8(data);\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n  }\n\n  return new Uint8Array(data);\n}","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { Amplify } from './Amplify';\nimport { Platform } from './Platform';\nexport { AmplifyClass } from './Amplify';\nexport { ClientDevice } from './ClientDevice';\nexport { ConsoleLogger, ConsoleLogger as Logger } from './Logger';\nexport * from './Errors';\nexport { Hub } from './Hub';\nexport { I18n } from './I18n';\nexport * from './JS';\nexport { Signer } from './Signer';\nexport * from './Parser';\nexport { FacebookOAuth, GoogleOAuth } from './OAuthHelper';\nexport * from './RNComponents';\nexport { Credentials, CredentialsClass } from './Credentials';\nexport { ServiceWorker } from './ServiceWorker';\nexport { StorageHelper, MemoryStorage } from './StorageHelper';\nexport { UniversalStorage } from './UniversalStorage';\nexport { Platform, getAmplifyUserAgent } from './Platform';\nexport * from './constants';\nexport var Constants = {\n  userAgent: Platform.userAgent\n};\nexport * from './constants';\nexport * from './Util';\nexport { Amplify };\n/**\n * @deprecated use named import\n */\n\nexport default Amplify;","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nvar logger = new Logger('I18n');\n/**\n * Language transition class\n */\n\nvar I18n =\n/** @class */\nfunction () {\n  /**\n   * @constructor\n   * Initialize with configurations\n   * @param {Object} options\n   */\n  function I18n(options) {\n    /**\n     * @private\n     */\n    this._options = null;\n    /**\n     * @private\n     */\n\n    this._lang = null;\n    /**\n     * @private\n     */\n\n    this._dict = {};\n    this._options = Object.assign({}, options);\n    this._lang = this._options.language;\n\n    if (!this._lang && typeof window !== 'undefined' && window && window.navigator) {\n      this._lang = window.navigator.language;\n    }\n\n    logger.debug(this._lang);\n  }\n  /**\n   * @method\n   * Explicitly setting language\n   * @param {String} lang\n   */\n\n\n  I18n.prototype.setLanguage = function (lang) {\n    this._lang = lang;\n  };\n  /**\n   * @method\n   * Get value\n   * @param {String} key\n   * @param {String} defVal - Default value\n   */\n\n\n  I18n.prototype.get = function (key, defVal) {\n    if (defVal === void 0) {\n      defVal = undefined;\n    }\n\n    if (!this._lang) {\n      return typeof defVal !== 'undefined' ? defVal : key;\n    }\n\n    var lang = this._lang;\n    var val = this.getByLanguage(key, lang);\n\n    if (val) {\n      return val;\n    }\n\n    if (lang.indexOf('-') > 0) {\n      val = this.getByLanguage(key, lang.split('-')[0]);\n    }\n\n    if (val) {\n      return val;\n    }\n\n    return typeof defVal !== 'undefined' ? defVal : key;\n  };\n  /**\n   * @method\n   * Get value according to specified language\n   * @param {String} key\n   * @param {String} language - Specified langurage to be used\n   * @param {String} defVal - Default value\n   */\n\n\n  I18n.prototype.getByLanguage = function (key, language, defVal) {\n    if (defVal === void 0) {\n      defVal = null;\n    }\n\n    if (!language) {\n      return defVal;\n    }\n\n    var lang_dict = this._dict[language];\n\n    if (!lang_dict) {\n      return defVal;\n    }\n\n    return lang_dict[key];\n  };\n  /**\n   * @method\n   * Add vocabularies for one language\n   * @param {String} language - Language of the dictionary\n   * @param {Object} vocabularies - Object that has key-value as dictionary entry\n   */\n\n\n  I18n.prototype.putVocabulariesForLanguage = function (language, vocabularies) {\n    var lang_dict = this._dict[language];\n\n    if (!lang_dict) {\n      lang_dict = this._dict[language] = {};\n    }\n\n    Object.assign(lang_dict, vocabularies);\n  };\n  /**\n   * @method\n   * Add vocabularies for one language\n   * @param {Object} vocabularies - Object that has language as key,\n   *                                vocabularies of each language as value\n   */\n\n\n  I18n.prototype.putVocabularies = function (vocabularies) {\n    var _this = this;\n\n    Object.keys(vocabularies).map(function (key) {\n      _this.putVocabulariesForLanguage(key, vocabularies[key]);\n    });\n  };\n\n  return I18n;\n}();\n\nexport { I18n };","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { I18n as I18nClass } from './I18n';\nimport { ConsoleLogger as Logger } from '../Logger';\nimport { Amplify } from '../Amplify';\nvar logger = new Logger('I18n');\nvar _config = null;\nvar _i18n = null;\n/**\n * Export I18n APIs\n */\n\nvar I18n =\n/** @class */\nfunction () {\n  function I18n() {}\n  /**\n   * @static\n   * @method\n   * Configure I18n part\n   * @param {Object} config - Configuration of the I18n\n   */\n\n\n  I18n.configure = function (config) {\n    logger.debug('configure I18n');\n\n    if (!config) {\n      return _config;\n    }\n\n    _config = Object.assign({}, _config, config.I18n || config);\n    I18n.createInstance();\n    return _config;\n  };\n\n  I18n.getModuleName = function () {\n    return 'I18n';\n  };\n  /**\n   * @static\n   * @method\n   * Create an instance of I18n for the library\n   */\n\n\n  I18n.createInstance = function () {\n    logger.debug('create I18n instance');\n\n    if (_i18n) {\n      return;\n    }\n\n    _i18n = new I18nClass(_config);\n  };\n  /**\n   * @static @method\n   * Explicitly setting language\n   * @param {String} lang\n   */\n\n\n  I18n.setLanguage = function (lang) {\n    I18n.checkConfig();\n    return _i18n.setLanguage(lang);\n  };\n  /**\n   * @static @method\n   * Get value\n   * @param {String} key\n   * @param {String} defVal - Default value\n   */\n\n\n  I18n.get = function (key, defVal) {\n    if (!I18n.checkConfig()) {\n      return typeof defVal === 'undefined' ? key : defVal;\n    }\n\n    return _i18n.get(key, defVal);\n  };\n  /**\n   * @static\n   * @method\n   * Add vocabularies for one language\n   * @param {String} langurage - Language of the dictionary\n   * @param {Object} vocabularies - Object that has key-value as dictionary entry\n   */\n\n\n  I18n.putVocabulariesForLanguage = function (language, vocabularies) {\n    I18n.checkConfig();\n    return _i18n.putVocabulariesForLanguage(language, vocabularies);\n  };\n  /**\n   * @static\n   * @method\n   * Add vocabularies for one language\n   * @param {Object} vocabularies - Object that has language as key,\n   *                                vocabularies of each language as value\n   */\n\n\n  I18n.putVocabularies = function (vocabularies) {\n    I18n.checkConfig();\n    return _i18n.putVocabularies(vocabularies);\n  };\n\n  I18n.checkConfig = function () {\n    if (!_i18n) {\n      _i18n = new I18nClass(_config);\n    }\n\n    return true;\n  };\n\n  return I18n;\n}();\n\nexport { I18n };\nAmplify.register(I18n);\n/**\n * @deprecated use named import\n */\n\nexport default I18n;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"./constants\");\n/**\n * @internal\n */\n\n\nvar RawSha256 =\n/** @class */\nfunction () {\n  function RawSha256() {\n    this.state = Int32Array.from(constants_1.INIT);\n    this.temp = new Int32Array(64);\n    this.buffer = new Uint8Array(64);\n    this.bufferLength = 0;\n    this.bytesHashed = 0;\n    /**\n     * @internal\n     */\n\n    this.finished = false;\n  }\n\n  RawSha256.prototype.update = function (data) {\n    if (this.finished) {\n      throw new Error(\"Attempted to update an already finished hash.\");\n    }\n\n    var position = 0;\n    var byteLength = data.byteLength;\n    this.bytesHashed += byteLength;\n\n    if (this.bytesHashed * 8 > constants_1.MAX_HASHABLE_LENGTH) {\n      throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n    }\n\n    while (byteLength > 0) {\n      this.buffer[this.bufferLength++] = data[position++];\n      byteLength--;\n\n      if (this.bufferLength === constants_1.BLOCK_SIZE) {\n        this.hashBuffer();\n        this.bufferLength = 0;\n      }\n    }\n  };\n\n  RawSha256.prototype.digest = function () {\n    if (!this.finished) {\n      var bitsHashed = this.bytesHashed * 8;\n      var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n      var undecoratedLength = this.bufferLength;\n      bufferView.setUint8(this.bufferLength++, 0x80); // Ensure the final block has enough room for the hashed length\n\n      if (undecoratedLength % constants_1.BLOCK_SIZE >= constants_1.BLOCK_SIZE - 8) {\n        for (var i = this.bufferLength; i < constants_1.BLOCK_SIZE; i++) {\n          bufferView.setUint8(i, 0);\n        }\n\n        this.hashBuffer();\n        this.bufferLength = 0;\n      }\n\n      for (var i = this.bufferLength; i < constants_1.BLOCK_SIZE - 8; i++) {\n        bufferView.setUint8(i, 0);\n      }\n\n      bufferView.setUint32(constants_1.BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n      bufferView.setUint32(constants_1.BLOCK_SIZE - 4, bitsHashed);\n      this.hashBuffer();\n      this.finished = true;\n    } // The value in state is little-endian rather than big-endian, so flip\n    // each word into a new Uint8Array\n\n\n    var out = new Uint8Array(constants_1.DIGEST_LENGTH);\n\n    for (var i = 0; i < 8; i++) {\n      out[i * 4] = this.state[i] >>> 24 & 0xff;\n      out[i * 4 + 1] = this.state[i] >>> 16 & 0xff;\n      out[i * 4 + 2] = this.state[i] >>> 8 & 0xff;\n      out[i * 4 + 3] = this.state[i] >>> 0 & 0xff;\n    }\n\n    return out;\n  };\n\n  RawSha256.prototype.hashBuffer = function () {\n    var _a = this,\n        buffer = _a.buffer,\n        state = _a.state;\n\n    var state0 = state[0],\n        state1 = state[1],\n        state2 = state[2],\n        state3 = state[3],\n        state4 = state[4],\n        state5 = state[5],\n        state6 = state[6],\n        state7 = state[7];\n\n    for (var i = 0; i < constants_1.BLOCK_SIZE; i++) {\n      if (i < 16) {\n        this.temp[i] = (buffer[i * 4] & 0xff) << 24 | (buffer[i * 4 + 1] & 0xff) << 16 | (buffer[i * 4 + 2] & 0xff) << 8 | buffer[i * 4 + 3] & 0xff;\n      } else {\n        var u = this.temp[i - 2];\n        var t1_1 = (u >>> 17 | u << 15) ^ (u >>> 19 | u << 13) ^ u >>> 10;\n        u = this.temp[i - 15];\n        var t2_1 = (u >>> 7 | u << 25) ^ (u >>> 18 | u << 14) ^ u >>> 3;\n        this.temp[i] = (t1_1 + this.temp[i - 7] | 0) + (t2_1 + this.temp[i - 16] | 0);\n      }\n\n      var t1 = (((state4 >>> 6 | state4 << 26) ^ (state4 >>> 11 | state4 << 21) ^ (state4 >>> 25 | state4 << 7)) + (state4 & state5 ^ ~state4 & state6) | 0) + (state7 + (constants_1.KEY[i] + this.temp[i] | 0) | 0) | 0;\n      var t2 = ((state0 >>> 2 | state0 << 30) ^ (state0 >>> 13 | state0 << 19) ^ (state0 >>> 22 | state0 << 10)) + (state0 & state1 ^ state0 & state2 ^ state1 & state2) | 0;\n      state7 = state6;\n      state6 = state5;\n      state5 = state4;\n      state4 = state3 + t1 | 0;\n      state3 = state2;\n      state2 = state1;\n      state1 = state0;\n      state0 = t1 + t2 | 0;\n    }\n\n    state[0] += state0;\n    state[1] += state1;\n    state[2] += state2;\n    state[3] += state3;\n    state[4] += state4;\n    state[5] += state5;\n    state[6] += state6;\n    state[7] += state7;\n  };\n\n  return RawSha256;\n}();\n\nexports.RawSha256 = RawSha256;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\ntslib_1.__exportStar(require(\"./jsSha256\"), exports);","module.exports = require('./lib/Observable.js').Observable;","/*******************************************************************************\n * Copyright (c) 2013 IBM Corp.\n *\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * and Eclipse Distribution License v1.0 which accompany this distribution.\n *\n * The Eclipse Public License is available at\n *    http://www.eclipse.org/legal/epl-v10.html\n * and the Eclipse Distribution License is available at\n *   http://www.eclipse.org/org/documents/edl-v10.php.\n *\n * Contributors:\n *    Andrew Banks - initial API and implementation and initial documentation\n *******************************************************************************/\n// Only expose a single object name in the global namespace.\n// Everything must go through this module. Global Paho module\n// only has a single public function, client, which returns\n// a Paho client object given connection details.\n\n/**\n * Send and receive messages using web browsers.\n * <p>\n * This programming interface lets a JavaScript client application use the MQTT V3.1 or\n * V3.1.1 protocol to connect to an MQTT-supporting messaging server.\n *\n * The function supported includes:\n * <ol>\n * <li>Connecting to and disconnecting from a server. The server is identified by its host name and port number.\n * <li>Specifying options that relate to the communications link with the server,\n * for example the frequency of keep-alive heartbeats, and whether SSL/TLS is required.\n * <li>Subscribing to and receiving messages from MQTT Topics.\n * <li>Publishing messages to MQTT Topics.\n * </ol>\n * <p>\n * The API consists of two main objects:\n * <dl>\n * <dt><b>{@link Paho.Client}</b></dt>\n * <dd>This contains methods that provide the functionality of the API,\n * including provision of callbacks that notify the application when a message\n * arrives from or is delivered to the messaging server,\n * or when the status of its connection to the messaging server changes.</dd>\n * <dt><b>{@link Paho.Message}</b></dt>\n * <dd>This encapsulates the payload of the message along with various attributes\n * associated with its delivery, in particular the destination to which it has\n * been (or is about to be) sent.</dd>\n * </dl>\n * <p>\n * The programming interface validates parameters passed to it, and will throw\n * an Error containing an error message intended for developer use, if it detects\n * an error with any parameter.\n * <p>\n * Example:\n *\n * <code><pre>\nvar client = new Paho.MQTT.Client(location.hostname, Number(location.port), \"clientId\");\nclient.onConnectionLost = onConnectionLost;\nclient.onMessageArrived = onMessageArrived;\nclient.connect({onSuccess:onConnect});\n\nfunction onConnect() {\n  // Once a connection has been made, make a subscription and send a message.\n  console.log(\"onConnect\");\n  client.subscribe(\"/World\");\n  var message = new Paho.MQTT.Message(\"Hello\");\n  message.destinationName = \"/World\";\n  client.send(message);\n};\nfunction onConnectionLost(responseObject) {\n  if (responseObject.errorCode !== 0)\n\tconsole.log(\"onConnectionLost:\"+responseObject.errorMessage);\n};\nfunction onMessageArrived(message) {\n  console.log(\"onMessageArrived:\"+message.payloadString);\n  client.disconnect();\n};\n * </pre></code>\n * @namespace Paho\n */\n\n/* jshint shadow:true */\n(function ExportLibrary(root, factory) {\n  if (typeof exports === \"object\" && typeof module === \"object\") {\n    module.exports = factory();\n  } else if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else if (typeof exports === \"object\") {\n    exports = factory();\n  } else {\n    //if (typeof root.Paho === \"undefined\"){\n    //\troot.Paho = {};\n    //}\n    root.Paho = factory();\n  }\n})(this, function LibraryFactory() {\n  var PahoMQTT = function (global) {\n    // Private variables below, these are only visible inside the function closure\n    // which is used to define the module.\n    var version = \"@VERSION@-@BUILDLEVEL@\";\n    /**\n     * @private\n     */\n\n    var localStorage = global.localStorage || function () {\n      var data = {};\n      return {\n        setItem: function setItem(key, item) {\n          data[key] = item;\n        },\n        getItem: function getItem(key) {\n          return data[key];\n        },\n        removeItem: function removeItem(key) {\n          delete data[key];\n        }\n      };\n    }();\n    /**\n    * Unique message type identifiers, with associated\n    * associated integer values.\n    * @private\n    */\n\n\n    var MESSAGE_TYPE = {\n      CONNECT: 1,\n      CONNACK: 2,\n      PUBLISH: 3,\n      PUBACK: 4,\n      PUBREC: 5,\n      PUBREL: 6,\n      PUBCOMP: 7,\n      SUBSCRIBE: 8,\n      SUBACK: 9,\n      UNSUBSCRIBE: 10,\n      UNSUBACK: 11,\n      PINGREQ: 12,\n      PINGRESP: 13,\n      DISCONNECT: 14\n    }; // Collection of utility methods used to simplify module code\n    // and promote the DRY pattern.\n\n    /**\n    * Validate an object's parameter names to ensure they\n    * match a list of expected variables name for this option\n    * type. Used to ensure option object passed into the API don't\n    * contain erroneous parameters.\n    * @param {Object} obj - User options object\n    * @param {Object} keys - valid keys and types that may exist in obj.\n    * @throws {Error} Invalid option parameter found.\n    * @private\n    */\n\n    var validate = function validate(obj, keys) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (keys.hasOwnProperty(key)) {\n            if (typeof obj[key] !== keys[key]) throw new Error(format(ERROR.INVALID_TYPE, [typeof obj[key], key]));\n          } else {\n            var errorStr = \"Unknown property, \" + key + \". Valid properties are:\";\n\n            for (var validKey in keys) {\n              if (keys.hasOwnProperty(validKey)) errorStr = errorStr + \" \" + validKey;\n            }\n\n            throw new Error(errorStr);\n          }\n        }\n      }\n    };\n    /**\n    * Return a new function which runs the user function bound\n    * to a fixed scope.\n    * @param {function} User function\n    * @param {object} Function scope\n    * @return {function} User function bound to another scope\n    * @private\n    */\n\n\n    var scope = function scope(f, _scope) {\n      return function () {\n        return f.apply(_scope, arguments);\n      };\n    };\n    /**\n    * Unique message type identifiers, with associated\n    * associated integer values.\n    * @private\n    */\n\n\n    var ERROR = {\n      OK: {\n        code: 0,\n        text: \"AMQJSC0000I OK.\"\n      },\n      CONNECT_TIMEOUT: {\n        code: 1,\n        text: \"AMQJSC0001E Connect timed out.\"\n      },\n      SUBSCRIBE_TIMEOUT: {\n        code: 2,\n        text: \"AMQJS0002E Subscribe timed out.\"\n      },\n      UNSUBSCRIBE_TIMEOUT: {\n        code: 3,\n        text: \"AMQJS0003E Unsubscribe timed out.\"\n      },\n      PING_TIMEOUT: {\n        code: 4,\n        text: \"AMQJS0004E Ping timed out.\"\n      },\n      INTERNAL_ERROR: {\n        code: 5,\n        text: \"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"\n      },\n      CONNACK_RETURNCODE: {\n        code: 6,\n        text: \"AMQJS0006E Bad Connack return code:{0} {1}.\"\n      },\n      SOCKET_ERROR: {\n        code: 7,\n        text: \"AMQJS0007E Socket error:{0}.\"\n      },\n      SOCKET_CLOSE: {\n        code: 8,\n        text: \"AMQJS0008I Socket closed.\"\n      },\n      MALFORMED_UTF: {\n        code: 9,\n        text: \"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"\n      },\n      UNSUPPORTED: {\n        code: 10,\n        text: \"AMQJS0010E {0} is not supported by this browser.\"\n      },\n      INVALID_STATE: {\n        code: 11,\n        text: \"AMQJS0011E Invalid state {0}.\"\n      },\n      INVALID_TYPE: {\n        code: 12,\n        text: \"AMQJS0012E Invalid type {0} for {1}.\"\n      },\n      INVALID_ARGUMENT: {\n        code: 13,\n        text: \"AMQJS0013E Invalid argument {0} for {1}.\"\n      },\n      UNSUPPORTED_OPERATION: {\n        code: 14,\n        text: \"AMQJS0014E Unsupported operation.\"\n      },\n      INVALID_STORED_DATA: {\n        code: 15,\n        text: \"AMQJS0015E Invalid data in local storage key={0} value={1}.\"\n      },\n      INVALID_MQTT_MESSAGE_TYPE: {\n        code: 16,\n        text: \"AMQJS0016E Invalid MQTT message type {0}.\"\n      },\n      MALFORMED_UNICODE: {\n        code: 17,\n        text: \"AMQJS0017E Malformed Unicode string:{0} {1}.\"\n      },\n      BUFFER_FULL: {\n        code: 18,\n        text: \"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\"\n      }\n    };\n    /** CONNACK RC Meaning. */\n\n    var CONNACK_RC = {\n      0: \"Connection Accepted\",\n      1: \"Connection Refused: unacceptable protocol version\",\n      2: \"Connection Refused: identifier rejected\",\n      3: \"Connection Refused: server unavailable\",\n      4: \"Connection Refused: bad user name or password\",\n      5: \"Connection Refused: not authorized\"\n    };\n    /**\n     * Format an error message text.\n     * @private\n     * @param {error} ERROR value above.\n     * @param {substitutions} [array] substituted into the text.\n     * @return the text with the substitutions made.\n     */\n\n    var format = function format(error, substitutions) {\n      var text = error.text;\n\n      if (substitutions) {\n        var field, start;\n\n        for (var i = 0; i < substitutions.length; i++) {\n          field = \"{\" + i + \"}\";\n          start = text.indexOf(field);\n\n          if (start > 0) {\n            var part1 = text.substring(0, start);\n            var part2 = text.substring(start + field.length);\n            text = part1 + substitutions[i] + part2;\n          }\n        }\n      }\n\n      return text;\n    }; //MQTT protocol and version          6    M    Q    I    s    d    p    3\n\n\n    var MqttProtoIdentifierv3 = [0x00, 0x06, 0x4d, 0x51, 0x49, 0x73, 0x64, 0x70, 0x03]; //MQTT proto/version for 311         4    M    Q    T    T    4\n\n    var MqttProtoIdentifierv4 = [0x00, 0x04, 0x4d, 0x51, 0x54, 0x54, 0x04];\n    /**\n    * Construct an MQTT wire protocol message.\n    * @param type MQTT packet type.\n    * @param options optional wire message attributes.\n    *\n    * Optional properties\n    *\n    * messageIdentifier: message ID in the range [0..65535]\n    * payloadMessage:\tApplication Message - PUBLISH only\n    * connectStrings:\tarray of 0 or more Strings to be put into the CONNECT payload\n    * topics:\t\t\tarray of strings (SUBSCRIBE, UNSUBSCRIBE)\n    * requestQoS:\t\tarray of QoS values [0..2]\n    *\n    * \"Flag\" properties\n    * cleanSession:\ttrue if present / false if absent (CONNECT)\n    * willMessage:  \ttrue if present / false if absent (CONNECT)\n    * isRetained:\t\ttrue if present / false if absent (CONNECT)\n    * userName:\t\ttrue if present / false if absent (CONNECT)\n    * password:\t\ttrue if present / false if absent (CONNECT)\n    * keepAliveInterval:\tinteger [0..65535]  (CONNECT)\n    *\n    * @private\n    * @ignore\n    */\n\n    var WireMessage = function WireMessage(type, options) {\n      this.type = type;\n\n      for (var name in options) {\n        if (options.hasOwnProperty(name)) {\n          this[name] = options[name];\n        }\n      }\n    };\n\n    WireMessage.prototype.encode = function () {\n      // Compute the first byte of the fixed header\n      var first = (this.type & 0x0f) << 4;\n      /*\n      * Now calculate the length of the variable header + payload by adding up the lengths\n      * of all the component parts\n      */\n\n      var remLength = 0;\n      var topicStrLength = [];\n      var destinationNameLength = 0;\n      var willMessagePayloadBytes; // if the message contains a messageIdentifier then we need two bytes for that\n\n      if (this.messageIdentifier !== undefined) remLength += 2;\n\n      switch (this.type) {\n        // If this a Connect then we need to include 12 bytes for its header\n        case MESSAGE_TYPE.CONNECT:\n          switch (this.mqttVersion) {\n            case 3:\n              remLength += MqttProtoIdentifierv3.length + 3;\n              break;\n\n            case 4:\n              remLength += MqttProtoIdentifierv4.length + 3;\n              break;\n          }\n\n          remLength += UTF8Length(this.clientId) + 2;\n\n          if (this.willMessage !== undefined) {\n            remLength += UTF8Length(this.willMessage.destinationName) + 2; // Will message is always a string, sent as UTF-8 characters with a preceding length.\n\n            willMessagePayloadBytes = this.willMessage.payloadBytes;\n            if (!(willMessagePayloadBytes instanceof Uint8Array)) willMessagePayloadBytes = new Uint8Array(payloadBytes);\n            remLength += willMessagePayloadBytes.byteLength + 2;\n          }\n\n          if (this.userName !== undefined) remLength += UTF8Length(this.userName) + 2;\n          if (this.password !== undefined) remLength += UTF8Length(this.password) + 2;\n          break;\n        // Subscribe, Unsubscribe can both contain topic strings\n\n        case MESSAGE_TYPE.SUBSCRIBE:\n          first |= 0x02; // Qos = 1;\n\n          for (var i = 0; i < this.topics.length; i++) {\n            topicStrLength[i] = UTF8Length(this.topics[i]);\n            remLength += topicStrLength[i] + 2;\n          }\n\n          remLength += this.requestedQos.length; // 1 byte for each topic's Qos\n          // QoS on Subscribe only\n\n          break;\n\n        case MESSAGE_TYPE.UNSUBSCRIBE:\n          first |= 0x02; // Qos = 1;\n\n          for (var i = 0; i < this.topics.length; i++) {\n            topicStrLength[i] = UTF8Length(this.topics[i]);\n            remLength += topicStrLength[i] + 2;\n          }\n\n          break;\n\n        case MESSAGE_TYPE.PUBREL:\n          first |= 0x02; // Qos = 1;\n\n          break;\n\n        case MESSAGE_TYPE.PUBLISH:\n          if (this.payloadMessage.duplicate) first |= 0x08;\n          first = first |= this.payloadMessage.qos << 1;\n          if (this.payloadMessage.retained) first |= 0x01;\n          destinationNameLength = UTF8Length(this.payloadMessage.destinationName);\n          remLength += destinationNameLength + 2;\n          var payloadBytes = this.payloadMessage.payloadBytes;\n          remLength += payloadBytes.byteLength;\n          if (payloadBytes instanceof ArrayBuffer) payloadBytes = new Uint8Array(payloadBytes);else if (!(payloadBytes instanceof Uint8Array)) payloadBytes = new Uint8Array(payloadBytes.buffer);\n          break;\n\n        case MESSAGE_TYPE.DISCONNECT:\n          break;\n\n        default:\n          break;\n      } // Now we can allocate a buffer for the message\n\n\n      var mbi = encodeMBI(remLength); // Convert the length to MQTT MBI format\n\n      var pos = mbi.length + 1; // Offset of start of variable header\n\n      var buffer = new ArrayBuffer(remLength + pos);\n      var byteStream = new Uint8Array(buffer); // view it as a sequence of bytes\n      //Write the fixed header into the buffer\n\n      byteStream[0] = first;\n      byteStream.set(mbi, 1); // If this is a PUBLISH then the variable header starts with a topic\n\n      if (this.type == MESSAGE_TYPE.PUBLISH) pos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos); // If this is a CONNECT then the variable header contains the protocol name/version, flags and keepalive time\n      else if (this.type == MESSAGE_TYPE.CONNECT) {\n          switch (this.mqttVersion) {\n            case 3:\n              byteStream.set(MqttProtoIdentifierv3, pos);\n              pos += MqttProtoIdentifierv3.length;\n              break;\n\n            case 4:\n              byteStream.set(MqttProtoIdentifierv4, pos);\n              pos += MqttProtoIdentifierv4.length;\n              break;\n          }\n\n          var connectFlags = 0;\n          if (this.cleanSession) connectFlags = 0x02;\n\n          if (this.willMessage !== undefined) {\n            connectFlags |= 0x04;\n            connectFlags |= this.willMessage.qos << 3;\n\n            if (this.willMessage.retained) {\n              connectFlags |= 0x20;\n            }\n          }\n\n          if (this.userName !== undefined) connectFlags |= 0x80;\n          if (this.password !== undefined) connectFlags |= 0x40;\n          byteStream[pos++] = connectFlags;\n          pos = writeUint16(this.keepAliveInterval, byteStream, pos);\n        } // Output the messageIdentifier - if there is one\n\n      if (this.messageIdentifier !== undefined) pos = writeUint16(this.messageIdentifier, byteStream, pos);\n\n      switch (this.type) {\n        case MESSAGE_TYPE.CONNECT:\n          pos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos);\n\n          if (this.willMessage !== undefined) {\n            pos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);\n            pos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);\n            byteStream.set(willMessagePayloadBytes, pos);\n            pos += willMessagePayloadBytes.byteLength;\n          }\n\n          if (this.userName !== undefined) pos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);\n          if (this.password !== undefined) pos = writeString(this.password, UTF8Length(this.password), byteStream, pos);\n          break;\n\n        case MESSAGE_TYPE.PUBLISH:\n          // PUBLISH has a text or binary payload, if text do not add a 2 byte length field, just the UTF characters.\n          byteStream.set(payloadBytes, pos);\n          break;\n        //    \t    case MESSAGE_TYPE.PUBREC:\n        //    \t    case MESSAGE_TYPE.PUBREL:\n        //    \t    case MESSAGE_TYPE.PUBCOMP:\n        //    \t    \tbreak;\n\n        case MESSAGE_TYPE.SUBSCRIBE:\n          // SUBSCRIBE has a list of topic strings and request QoS\n          for (var i = 0; i < this.topics.length; i++) {\n            pos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n            byteStream[pos++] = this.requestedQos[i];\n          }\n\n          break;\n\n        case MESSAGE_TYPE.UNSUBSCRIBE:\n          // UNSUBSCRIBE has a list of topic strings\n          for (var i = 0; i < this.topics.length; i++) {\n            pos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n          }\n\n          break;\n\n        default: // Do nothing.\n\n      }\n\n      return buffer;\n    };\n\n    function decodeMessage(input, pos) {\n      var startingPos = pos;\n      var first = input[pos];\n      var type = first >> 4;\n      var messageInfo = first &= 0x0f;\n      pos += 1; // Decode the remaining length (MBI format)\n\n      var digit;\n      var remLength = 0;\n      var multiplier = 1;\n\n      do {\n        if (pos == input.length) {\n          return [null, startingPos];\n        }\n\n        digit = input[pos++];\n        remLength += (digit & 0x7F) * multiplier;\n        multiplier *= 128;\n      } while ((digit & 0x80) !== 0);\n\n      var endPos = pos + remLength;\n\n      if (endPos > input.length) {\n        return [null, startingPos];\n      }\n\n      var wireMessage = new WireMessage(type);\n\n      switch (type) {\n        case MESSAGE_TYPE.CONNACK:\n          var connectAcknowledgeFlags = input[pos++];\n          if (connectAcknowledgeFlags & 0x01) wireMessage.sessionPresent = true;\n          wireMessage.returnCode = input[pos++];\n          break;\n\n        case MESSAGE_TYPE.PUBLISH:\n          var qos = messageInfo >> 1 & 0x03;\n          var len = readUint16(input, pos);\n          pos += 2;\n          var topicName = parseUTF8(input, pos, len);\n          pos += len; // If QoS 1 or 2 there will be a messageIdentifier\n\n          if (qos > 0) {\n            wireMessage.messageIdentifier = readUint16(input, pos);\n            pos += 2;\n          }\n\n          var message = new Message(input.subarray(pos, endPos));\n          if ((messageInfo & 0x01) == 0x01) message.retained = true;\n          if ((messageInfo & 0x08) == 0x08) message.duplicate = true;\n          message.qos = qos;\n          message.destinationName = topicName;\n          wireMessage.payloadMessage = message;\n          break;\n\n        case MESSAGE_TYPE.PUBACK:\n        case MESSAGE_TYPE.PUBREC:\n        case MESSAGE_TYPE.PUBREL:\n        case MESSAGE_TYPE.PUBCOMP:\n        case MESSAGE_TYPE.UNSUBACK:\n          wireMessage.messageIdentifier = readUint16(input, pos);\n          break;\n\n        case MESSAGE_TYPE.SUBACK:\n          wireMessage.messageIdentifier = readUint16(input, pos);\n          pos += 2;\n          wireMessage.returnCode = input.subarray(pos, endPos);\n          break;\n\n        default:\n          break;\n      }\n\n      return [wireMessage, endPos];\n    }\n\n    function writeUint16(input, buffer, offset) {\n      buffer[offset++] = input >> 8; //MSB\n\n      buffer[offset++] = input % 256; //LSB\n\n      return offset;\n    }\n\n    function writeString(input, utf8Length, buffer, offset) {\n      offset = writeUint16(utf8Length, buffer, offset);\n      stringToUTF8(input, buffer, offset);\n      return offset + utf8Length;\n    }\n\n    function readUint16(buffer, offset) {\n      return 256 * buffer[offset] + buffer[offset + 1];\n    }\n    /**\n    * Encodes an MQTT Multi-Byte Integer\n    * @private\n    */\n\n\n    function encodeMBI(number) {\n      var output = new Array(1);\n      var numBytes = 0;\n\n      do {\n        var digit = number % 128;\n        number = number >> 7;\n\n        if (number > 0) {\n          digit |= 0x80;\n        }\n\n        output[numBytes++] = digit;\n      } while (number > 0 && numBytes < 4);\n\n      return output;\n    }\n    /**\n    * Takes a String and calculates its length in bytes when encoded in UTF8.\n    * @private\n    */\n\n\n    function UTF8Length(input) {\n      var output = 0;\n\n      for (var i = 0; i < input.length; i++) {\n        var charCode = input.charCodeAt(i);\n\n        if (charCode > 0x7FF) {\n          // Surrogate pair means its a 4 byte character\n          if (0xD800 <= charCode && charCode <= 0xDBFF) {\n            i++;\n            output++;\n          }\n\n          output += 3;\n        } else if (charCode > 0x7F) output += 2;else output++;\n      }\n\n      return output;\n    }\n    /**\n    * Takes a String and writes it into an array as UTF8 encoded bytes.\n    * @private\n    */\n\n\n    function stringToUTF8(input, output, start) {\n      var pos = start;\n\n      for (var i = 0; i < input.length; i++) {\n        var charCode = input.charCodeAt(i); // Check for a surrogate pair.\n\n        if (0xD800 <= charCode && charCode <= 0xDBFF) {\n          var lowCharCode = input.charCodeAt(++i);\n\n          if (isNaN(lowCharCode)) {\n            throw new Error(format(ERROR.MALFORMED_UNICODE, [charCode, lowCharCode]));\n          }\n\n          charCode = (charCode - 0xD800 << 10) + (lowCharCode - 0xDC00) + 0x10000;\n        }\n\n        if (charCode <= 0x7F) {\n          output[pos++] = charCode;\n        } else if (charCode <= 0x7FF) {\n          output[pos++] = charCode >> 6 & 0x1F | 0xC0;\n          output[pos++] = charCode & 0x3F | 0x80;\n        } else if (charCode <= 0xFFFF) {\n          output[pos++] = charCode >> 12 & 0x0F | 0xE0;\n          output[pos++] = charCode >> 6 & 0x3F | 0x80;\n          output[pos++] = charCode & 0x3F | 0x80;\n        } else {\n          output[pos++] = charCode >> 18 & 0x07 | 0xF0;\n          output[pos++] = charCode >> 12 & 0x3F | 0x80;\n          output[pos++] = charCode >> 6 & 0x3F | 0x80;\n          output[pos++] = charCode & 0x3F | 0x80;\n        }\n      }\n\n      return output;\n    }\n\n    function parseUTF8(input, offset, length) {\n      var output = \"\";\n      var utf16;\n      var pos = offset;\n\n      while (pos < offset + length) {\n        var byte1 = input[pos++];\n        if (byte1 < 128) utf16 = byte1;else {\n          var byte2 = input[pos++] - 128;\n          if (byte2 < 0) throw new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), \"\"]));\n          if (byte1 < 0xE0) // 2 byte character\n            utf16 = 64 * (byte1 - 0xC0) + byte2;else {\n            var byte3 = input[pos++] - 128;\n            if (byte3 < 0) throw new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16)]));\n            if (byte1 < 0xF0) // 3 byte character\n              utf16 = 4096 * (byte1 - 0xE0) + 64 * byte2 + byte3;else {\n              var byte4 = input[pos++] - 128;\n              if (byte4 < 0) throw new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n              if (byte1 < 0xF8) // 4 byte character\n                utf16 = 262144 * (byte1 - 0xF0) + 4096 * byte2 + 64 * byte3 + byte4;else // longer encodings are not supported\n                throw new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n            }\n          }\n        }\n\n        if (utf16 > 0xFFFF) // 4 byte character - express as a surrogate pair\n          {\n            utf16 -= 0x10000;\n            output += String.fromCharCode(0xD800 + (utf16 >> 10)); // lead character\n\n            utf16 = 0xDC00 + (utf16 & 0x3FF); // trail character\n          }\n\n        output += String.fromCharCode(utf16);\n      }\n\n      return output;\n    }\n    /**\n    * Repeat keepalive requests, monitor responses.\n    * @ignore\n    */\n\n\n    var Pinger = function Pinger(client, keepAliveInterval) {\n      this._client = client;\n      this._keepAliveInterval = keepAliveInterval * 1000;\n      this.isReset = false;\n      var pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode();\n\n      var doTimeout = function doTimeout(pinger) {\n        return function () {\n          return doPing.apply(pinger);\n        };\n      };\n      /** @ignore */\n\n\n      var doPing = function doPing() {\n        if (!this.isReset) {\n          this._client._trace(\"Pinger.doPing\", \"Timed out\");\n\n          this._client._disconnected(ERROR.PING_TIMEOUT.code, format(ERROR.PING_TIMEOUT));\n        } else {\n          this.isReset = false;\n\n          this._client._trace(\"Pinger.doPing\", \"send PINGREQ\");\n\n          this._client.socket.send(pingReq);\n\n          this.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n        }\n      };\n\n      this.reset = function () {\n        this.isReset = true;\n        clearTimeout(this.timeout);\n        if (this._keepAliveInterval > 0) this.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n      };\n\n      this.cancel = function () {\n        clearTimeout(this.timeout);\n      };\n    };\n    /**\n    * Monitor request completion.\n    * @ignore\n    */\n\n\n    var Timeout = function Timeout(client, timeoutSeconds, action, args) {\n      if (!timeoutSeconds) timeoutSeconds = 30;\n\n      var doTimeout = function doTimeout(action, client, args) {\n        return function () {\n          return action.apply(client, args);\n        };\n      };\n\n      this.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);\n\n      this.cancel = function () {\n        clearTimeout(this.timeout);\n      };\n    };\n    /**\n     * Internal implementation of the Websockets MQTT V3.1 client.\n     *\n     * @name Paho.ClientImpl @constructor\n     * @param {String} host the DNS nameof the webSocket host.\n     * @param {Number} port the port number for that host.\n     * @param {String} clientId the MQ client identifier.\n     */\n\n\n    var ClientImpl = function ClientImpl(uri, host, port, path, clientId) {\n      // Check dependencies are satisfied in this browser.\n      if (!(\"WebSocket\" in global && global.WebSocket !== null)) {\n        throw new Error(format(ERROR.UNSUPPORTED, [\"WebSocket\"]));\n      }\n\n      if (!(\"ArrayBuffer\" in global && global.ArrayBuffer !== null)) {\n        throw new Error(format(ERROR.UNSUPPORTED, [\"ArrayBuffer\"]));\n      }\n\n      this._trace(\"Paho.Client\", uri, host, port, path, clientId);\n\n      this.host = host;\n      this.port = port;\n      this.path = path;\n      this.uri = uri;\n      this.clientId = clientId;\n      this._wsuri = null; // Local storagekeys are qualified with the following string.\n      // The conditional inclusion of path in the key is for backward\n      // compatibility to when the path was not configurable and assumed to\n      // be /mqtt\n\n      this._localKey = host + \":\" + port + (path != \"/mqtt\" ? \":\" + path : \"\") + \":\" + clientId + \":\"; // Create private instance-only message queue\n      // Internal queue of messages to be sent, in sending order.\n\n      this._msg_queue = [];\n      this._buffered_msg_queue = []; // Messages we have sent and are expecting a response for, indexed by their respective message ids.\n\n      this._sentMessages = {}; // Messages we have received and acknowleged and are expecting a confirm message for\n      // indexed by their respective message ids.\n\n      this._receivedMessages = {}; // Internal list of callbacks to be executed when messages\n      // have been successfully sent over web socket, e.g. disconnect\n      // when it doesn't have to wait for ACK, just message is dispatched.\n\n      this._notify_msg_sent = {}; // Unique identifier for SEND messages, incrementing\n      // counter as messages are sent.\n\n      this._message_identifier = 1; // Used to determine the transmission sequence of stored sent messages.\n\n      this._sequence = 0; // Load the local state, if any, from the saved version, only restore state relevant to this client.\n\n      for (var key in localStorage) {\n        if (key.indexOf(\"Sent:\" + this._localKey) === 0 || key.indexOf(\"Received:\" + this._localKey) === 0) this.restore(key);\n      }\n    }; // Messaging Client public instance members.\n\n\n    ClientImpl.prototype.host = null;\n    ClientImpl.prototype.port = null;\n    ClientImpl.prototype.path = null;\n    ClientImpl.prototype.uri = null;\n    ClientImpl.prototype.clientId = null; // Messaging Client private instance members.\n\n    ClientImpl.prototype.socket = null;\n    /* true once we have received an acknowledgement to a CONNECT packet. */\n\n    ClientImpl.prototype.connected = false;\n    /* The largest message identifier allowed, may not be larger than 2**16 but\n     * if set smaller reduces the maximum number of outbound messages allowed.\n     */\n\n    ClientImpl.prototype.maxMessageIdentifier = 65536;\n    ClientImpl.prototype.connectOptions = null;\n    ClientImpl.prototype.hostIndex = null;\n    ClientImpl.prototype.onConnected = null;\n    ClientImpl.prototype.onConnectionLost = null;\n    ClientImpl.prototype.onMessageDelivered = null;\n    ClientImpl.prototype.onMessageArrived = null;\n    ClientImpl.prototype.traceFunction = null;\n    ClientImpl.prototype._msg_queue = null;\n    ClientImpl.prototype._buffered_msg_queue = null;\n    ClientImpl.prototype._connectTimeout = null;\n    /* The sendPinger monitors how long we allow before we send data to prove to the server that we are alive. */\n\n    ClientImpl.prototype.sendPinger = null;\n    /* The receivePinger monitors how long we allow before we require evidence that the server is alive. */\n\n    ClientImpl.prototype.receivePinger = null;\n    ClientImpl.prototype._reconnectInterval = 1; // Reconnect Delay, starts at 1 second\n\n    ClientImpl.prototype._reconnecting = false;\n    ClientImpl.prototype._reconnectTimeout = null;\n    ClientImpl.prototype.disconnectedPublishing = false;\n    ClientImpl.prototype.disconnectedBufferSize = 5000;\n    ClientImpl.prototype.receiveBuffer = null;\n    ClientImpl.prototype._traceBuffer = null;\n    ClientImpl.prototype._MAX_TRACE_ENTRIES = 100;\n\n    ClientImpl.prototype.connect = function (connectOptions) {\n      var connectOptionsMasked = this._traceMask(connectOptions, \"password\");\n\n      this._trace(\"Client.connect\", connectOptionsMasked, this.socket, this.connected);\n\n      if (this.connected) throw new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n      if (this.socket) throw new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n\n      if (this._reconnecting) {\n        // connect() function is called while reconnect is in progress.\n        // Terminate the auto reconnect process to use new connect options.\n        this._reconnectTimeout.cancel();\n\n        this._reconnectTimeout = null;\n        this._reconnecting = false;\n      }\n\n      this.connectOptions = connectOptions;\n      this._reconnectInterval = 1;\n      this._reconnecting = false;\n\n      if (connectOptions.uris) {\n        this.hostIndex = 0;\n\n        this._doConnect(connectOptions.uris[0]);\n      } else {\n        this._doConnect(this.uri);\n      }\n    };\n\n    ClientImpl.prototype.subscribe = function (filter, subscribeOptions) {\n      this._trace(\"Client.subscribe\", filter, subscribeOptions);\n\n      if (!this.connected) throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n      var wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);\n      wireMessage.topics = filter.constructor === Array ? filter : [filter];\n      if (subscribeOptions.qos === undefined) subscribeOptions.qos = 0;\n      wireMessage.requestedQos = [];\n\n      for (var i = 0; i < wireMessage.topics.length; i++) {\n        wireMessage.requestedQos[i] = subscribeOptions.qos;\n      }\n\n      if (subscribeOptions.onSuccess) {\n        wireMessage.onSuccess = function (grantedQos) {\n          subscribeOptions.onSuccess({\n            invocationContext: subscribeOptions.invocationContext,\n            grantedQos: grantedQos\n          });\n        };\n      }\n\n      if (subscribeOptions.onFailure) {\n        wireMessage.onFailure = function (errorCode) {\n          subscribeOptions.onFailure({\n            invocationContext: subscribeOptions.invocationContext,\n            errorCode: errorCode,\n            errorMessage: format(errorCode)\n          });\n        };\n      }\n\n      if (subscribeOptions.timeout) {\n        wireMessage.timeOut = new Timeout(this, subscribeOptions.timeout, subscribeOptions.onFailure, [{\n          invocationContext: subscribeOptions.invocationContext,\n          errorCode: ERROR.SUBSCRIBE_TIMEOUT.code,\n          errorMessage: format(ERROR.SUBSCRIBE_TIMEOUT)\n        }]);\n      } // All subscriptions return a SUBACK.\n\n\n      this._requires_ack(wireMessage);\n\n      this._schedule_message(wireMessage);\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype.unsubscribe = function (filter, unsubscribeOptions) {\n      this._trace(\"Client.unsubscribe\", filter, unsubscribeOptions);\n\n      if (!this.connected) throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n      var wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);\n      wireMessage.topics = filter.constructor === Array ? filter : [filter];\n\n      if (unsubscribeOptions.onSuccess) {\n        wireMessage.callback = function () {\n          unsubscribeOptions.onSuccess({\n            invocationContext: unsubscribeOptions.invocationContext\n          });\n        };\n      }\n\n      if (unsubscribeOptions.timeout) {\n        wireMessage.timeOut = new Timeout(this, unsubscribeOptions.timeout, unsubscribeOptions.onFailure, [{\n          invocationContext: unsubscribeOptions.invocationContext,\n          errorCode: ERROR.UNSUBSCRIBE_TIMEOUT.code,\n          errorMessage: format(ERROR.UNSUBSCRIBE_TIMEOUT)\n        }]);\n      } // All unsubscribes return a SUBACK.\n\n\n      this._requires_ack(wireMessage);\n\n      this._schedule_message(wireMessage);\n    };\n\n    ClientImpl.prototype.send = function (message) {\n      this._trace(\"Client.send\", message);\n\n      var wireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);\n      wireMessage.payloadMessage = message;\n\n      if (this.connected) {\n        // Mark qos 1 & 2 message as \"ACK required\"\n        // For qos 0 message, invoke onMessageDelivered callback if there is one.\n        // Then schedule the message.\n        if (message.qos > 0) {\n          this._requires_ack(wireMessage);\n        } else if (this.onMessageDelivered) {\n          this._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);\n        }\n\n        this._schedule_message(wireMessage);\n      } else {\n        // Currently disconnected, will not schedule this message\n        // Check if reconnecting is in progress and disconnected publish is enabled.\n        if (this._reconnecting && this.disconnectedPublishing) {\n          // Check the limit which include the \"required ACK\" messages\n          var messageCount = Object.keys(this._sentMessages).length + this._buffered_msg_queue.length;\n\n          if (messageCount > this.disconnectedBufferSize) {\n            throw new Error(format(ERROR.BUFFER_FULL, [this.disconnectedBufferSize]));\n          } else {\n            if (message.qos > 0) {\n              // Mark this message as \"ACK required\"\n              this._requires_ack(wireMessage);\n            } else {\n              wireMessage.sequence = ++this._sequence; // Add messages in fifo order to array, by adding to start\n\n              this._buffered_msg_queue.unshift(wireMessage);\n            }\n          }\n        } else {\n          throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n        }\n      }\n    };\n\n    ClientImpl.prototype.disconnect = function () {\n      this._trace(\"Client.disconnect\");\n\n      if (this._reconnecting) {\n        // disconnect() function is called while reconnect is in progress.\n        // Terminate the auto reconnect process.\n        this._reconnectTimeout.cancel();\n\n        this._reconnectTimeout = null;\n        this._reconnecting = false;\n      }\n\n      if (!this.socket) throw new Error(format(ERROR.INVALID_STATE, [\"not connecting or connected\"]));\n      var wireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT); // Run the disconnected call back as soon as the message has been sent,\n      // in case of a failure later on in the disconnect processing.\n      // as a consequence, the _disconected call back may be run several times.\n\n      this._notify_msg_sent[wireMessage] = scope(this._disconnected, this);\n\n      this._schedule_message(wireMessage);\n    };\n\n    ClientImpl.prototype.getTraceLog = function () {\n      if (this._traceBuffer !== null) {\n        this._trace(\"Client.getTraceLog\", new Date());\n\n        this._trace(\"Client.getTraceLog in flight messages\", this._sentMessages.length);\n\n        for (var key in this._sentMessages) {\n          this._trace(\"_sentMessages \", key, this._sentMessages[key]);\n        }\n\n        for (var key in this._receivedMessages) {\n          this._trace(\"_receivedMessages \", key, this._receivedMessages[key]);\n        }\n\n        return this._traceBuffer;\n      }\n    };\n\n    ClientImpl.prototype.startTrace = function () {\n      if (this._traceBuffer === null) {\n        this._traceBuffer = [];\n      }\n\n      this._trace(\"Client.startTrace\", new Date(), version);\n    };\n\n    ClientImpl.prototype.stopTrace = function () {\n      delete this._traceBuffer;\n    };\n\n    ClientImpl.prototype._doConnect = function (wsurl) {\n      // When the socket is open, this client will send the CONNECT WireMessage using the saved parameters.\n      if (this.connectOptions.useSSL) {\n        var uriParts = wsurl.split(\":\");\n        uriParts[0] = \"wss\";\n        wsurl = uriParts.join(\":\");\n      }\n\n      this._wsuri = wsurl;\n      this.connected = false;\n\n      if (this.connectOptions.mqttVersion < 4) {\n        this.socket = new WebSocket(wsurl, [\"mqttv3.1\"]);\n      } else {\n        this.socket = new WebSocket(wsurl, [\"mqtt\"]);\n      }\n\n      this.socket.binaryType = \"arraybuffer\";\n      this.socket.onopen = scope(this._on_socket_open, this);\n      this.socket.onmessage = scope(this._on_socket_message, this);\n      this.socket.onerror = scope(this._on_socket_error, this);\n      this.socket.onclose = scope(this._on_socket_close, this);\n      this.sendPinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n      this.receivePinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n\n      if (this._connectTimeout) {\n        this._connectTimeout.cancel();\n\n        this._connectTimeout = null;\n      }\n\n      this._connectTimeout = new Timeout(this, this.connectOptions.timeout, this._disconnected, [ERROR.CONNECT_TIMEOUT.code, format(ERROR.CONNECT_TIMEOUT)]);\n    }; // Schedule a new message to be sent over the WebSockets\n    // connection. CONNECT messages cause WebSocket connection\n    // to be started. All other messages are queued internally\n    // until this has happened. When WS connection starts, process\n    // all outstanding messages.\n\n\n    ClientImpl.prototype._schedule_message = function (message) {\n      // Add messages in fifo order to array, by adding to start\n      this._msg_queue.unshift(message); // Process outstanding messages in the queue if we have an  open socket, and have received CONNACK.\n\n\n      if (this.connected) {\n        this._process_queue();\n      }\n    };\n\n    ClientImpl.prototype.store = function (prefix, wireMessage) {\n      var storedMessage = {\n        type: wireMessage.type,\n        messageIdentifier: wireMessage.messageIdentifier,\n        version: 1\n      };\n\n      switch (wireMessage.type) {\n        case MESSAGE_TYPE.PUBLISH:\n          if (wireMessage.pubRecReceived) storedMessage.pubRecReceived = true; // Convert the payload to a hex string.\n\n          storedMessage.payloadMessage = {};\n          var hex = \"\";\n          var messageBytes = wireMessage.payloadMessage.payloadBytes;\n\n          for (var i = 0; i < messageBytes.length; i++) {\n            if (messageBytes[i] <= 0xF) hex = hex + \"0\" + messageBytes[i].toString(16);else hex = hex + messageBytes[i].toString(16);\n          }\n\n          storedMessage.payloadMessage.payloadHex = hex;\n          storedMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;\n          storedMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;\n          if (wireMessage.payloadMessage.duplicate) storedMessage.payloadMessage.duplicate = true;\n          if (wireMessage.payloadMessage.retained) storedMessage.payloadMessage.retained = true; // Add a sequence number to sent messages.\n\n          if (prefix.indexOf(\"Sent:\") === 0) {\n            if (wireMessage.sequence === undefined) wireMessage.sequence = ++this._sequence;\n            storedMessage.sequence = wireMessage.sequence;\n          }\n\n          break;\n\n        default:\n          throw Error(format(ERROR.INVALID_STORED_DATA, [prefix + this._localKey + wireMessage.messageIdentifier, storedMessage]));\n      }\n\n      localStorage.setItem(prefix + this._localKey + wireMessage.messageIdentifier, JSON.stringify(storedMessage));\n    };\n\n    ClientImpl.prototype.restore = function (key) {\n      var value = localStorage.getItem(key);\n      var storedMessage = JSON.parse(value);\n      var wireMessage = new WireMessage(storedMessage.type, storedMessage);\n\n      switch (storedMessage.type) {\n        case MESSAGE_TYPE.PUBLISH:\n          // Replace the payload message with a Message object.\n          var hex = storedMessage.payloadMessage.payloadHex;\n          var buffer = new ArrayBuffer(hex.length / 2);\n          var byteStream = new Uint8Array(buffer);\n          var i = 0;\n\n          while (hex.length >= 2) {\n            var x = parseInt(hex.substring(0, 2), 16);\n            hex = hex.substring(2, hex.length);\n            byteStream[i++] = x;\n          }\n\n          var payloadMessage = new Message(byteStream);\n          payloadMessage.qos = storedMessage.payloadMessage.qos;\n          payloadMessage.destinationName = storedMessage.payloadMessage.destinationName;\n          if (storedMessage.payloadMessage.duplicate) payloadMessage.duplicate = true;\n          if (storedMessage.payloadMessage.retained) payloadMessage.retained = true;\n          wireMessage.payloadMessage = payloadMessage;\n          break;\n\n        default:\n          throw Error(format(ERROR.INVALID_STORED_DATA, [key, value]));\n      }\n\n      if (key.indexOf(\"Sent:\" + this._localKey) === 0) {\n        wireMessage.payloadMessage.duplicate = true;\n        this._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n      } else if (key.indexOf(\"Received:\" + this._localKey) === 0) {\n        this._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n      }\n    };\n\n    ClientImpl.prototype._process_queue = function () {\n      var message = null; // Send all queued messages down socket connection\n\n      while (message = this._msg_queue.pop()) {\n        this._socket_send(message); // Notify listeners that message was successfully sent\n\n\n        if (this._notify_msg_sent[message]) {\n          this._notify_msg_sent[message]();\n\n          delete this._notify_msg_sent[message];\n        }\n      }\n    };\n    /**\n    * Expect an ACK response for this message. Add message to the set of in progress\n    * messages and set an unused identifier in this message.\n    * @ignore\n    */\n\n\n    ClientImpl.prototype._requires_ack = function (wireMessage) {\n      var messageCount = Object.keys(this._sentMessages).length;\n      if (messageCount > this.maxMessageIdentifier) throw Error(\"Too many messages:\" + messageCount);\n\n      while (this._sentMessages[this._message_identifier] !== undefined) {\n        this._message_identifier++;\n      }\n\n      wireMessage.messageIdentifier = this._message_identifier;\n      this._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n\n      if (wireMessage.type === MESSAGE_TYPE.PUBLISH) {\n        this.store(\"Sent:\", wireMessage);\n      }\n\n      if (this._message_identifier === this.maxMessageIdentifier) {\n        this._message_identifier = 1;\n      }\n    };\n    /**\n    * Called when the underlying websocket has been opened.\n    * @ignore\n    */\n\n\n    ClientImpl.prototype._on_socket_open = function () {\n      // Create the CONNECT message object.\n      var wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions);\n      wireMessage.clientId = this.clientId;\n\n      this._socket_send(wireMessage);\n    };\n    /**\n    * Called when the underlying websocket has received a complete packet.\n    * @ignore\n    */\n\n\n    ClientImpl.prototype._on_socket_message = function (event) {\n      this._trace(\"Client._on_socket_message\", event.data);\n\n      var messages = this._deframeMessages(event.data);\n\n      for (var i = 0; i < messages.length; i += 1) {\n        this._handleMessage(messages[i]);\n      }\n    };\n\n    ClientImpl.prototype._deframeMessages = function (data) {\n      var byteArray = new Uint8Array(data);\n      var messages = [];\n\n      if (this.receiveBuffer) {\n        var newData = new Uint8Array(this.receiveBuffer.length + byteArray.length);\n        newData.set(this.receiveBuffer);\n        newData.set(byteArray, this.receiveBuffer.length);\n        byteArray = newData;\n        delete this.receiveBuffer;\n      }\n\n      try {\n        var offset = 0;\n\n        while (offset < byteArray.length) {\n          var result = decodeMessage(byteArray, offset);\n          var wireMessage = result[0];\n          offset = result[1];\n\n          if (wireMessage !== null) {\n            messages.push(wireMessage);\n          } else {\n            break;\n          }\n        }\n\n        if (offset < byteArray.length) {\n          this.receiveBuffer = byteArray.subarray(offset);\n        }\n      } catch (error) {\n        var errorStack = error.hasOwnProperty(\"stack\") == \"undefined\" ? error.stack.toString() : \"No Error Stack Available\";\n\n        this._disconnected(ERROR.INTERNAL_ERROR.code, format(ERROR.INTERNAL_ERROR, [error.message, errorStack]));\n\n        return;\n      }\n\n      return messages;\n    };\n\n    ClientImpl.prototype._handleMessage = function (wireMessage) {\n      this._trace(\"Client._handleMessage\", wireMessage);\n\n      try {\n        switch (wireMessage.type) {\n          case MESSAGE_TYPE.CONNACK:\n            this._connectTimeout.cancel();\n\n            if (this._reconnectTimeout) this._reconnectTimeout.cancel(); // If we have started using clean session then clear up the local state.\n\n            if (this.connectOptions.cleanSession) {\n              for (var key in this._sentMessages) {\n                var sentMessage = this._sentMessages[key];\n                localStorage.removeItem(\"Sent:\" + this._localKey + sentMessage.messageIdentifier);\n              }\n\n              this._sentMessages = {};\n\n              for (var key in this._receivedMessages) {\n                var receivedMessage = this._receivedMessages[key];\n                localStorage.removeItem(\"Received:\" + this._localKey + receivedMessage.messageIdentifier);\n              }\n\n              this._receivedMessages = {};\n            } // Client connected and ready for business.\n\n\n            if (wireMessage.returnCode === 0) {\n              this.connected = true; // Jump to the end of the list of uris and stop looking for a good host.\n\n              if (this.connectOptions.uris) this.hostIndex = this.connectOptions.uris.length;\n            } else {\n              this._disconnected(ERROR.CONNACK_RETURNCODE.code, format(ERROR.CONNACK_RETURNCODE, [wireMessage.returnCode, CONNACK_RC[wireMessage.returnCode]]));\n\n              break;\n            } // Resend messages.\n\n\n            var sequencedMessages = [];\n\n            for (var msgId in this._sentMessages) {\n              if (this._sentMessages.hasOwnProperty(msgId)) sequencedMessages.push(this._sentMessages[msgId]);\n            } // Also schedule qos 0 buffered messages if any\n\n\n            if (this._buffered_msg_queue.length > 0) {\n              var msg = null;\n\n              while (msg = this._buffered_msg_queue.pop()) {\n                sequencedMessages.push(msg);\n                if (this.onMessageDelivered) this._notify_msg_sent[msg] = this.onMessageDelivered(msg.payloadMessage);\n              }\n            } // Sort sentMessages into the original sent order.\n\n\n            var sequencedMessages = sequencedMessages.sort(function (a, b) {\n              return a.sequence - b.sequence;\n            });\n\n            for (var i = 0, len = sequencedMessages.length; i < len; i++) {\n              var sentMessage = sequencedMessages[i];\n\n              if (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {\n                var pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {\n                  messageIdentifier: sentMessage.messageIdentifier\n                });\n\n                this._schedule_message(pubRelMessage);\n              } else {\n                this._schedule_message(sentMessage);\n              }\n            } // Execute the connectOptions.onSuccess callback if there is one.\n            // Will also now return if this connection was the result of an automatic\n            // reconnect and which URI was successfully connected to.\n\n\n            if (this.connectOptions.onSuccess) {\n              this.connectOptions.onSuccess({\n                invocationContext: this.connectOptions.invocationContext\n              });\n            }\n\n            var reconnected = false;\n\n            if (this._reconnecting) {\n              reconnected = true;\n              this._reconnectInterval = 1;\n              this._reconnecting = false;\n            } // Execute the onConnected callback if there is one.\n\n\n            this._connected(reconnected, this._wsuri); // Process all queued messages now that the connection is established.\n\n\n            this._process_queue();\n\n            break;\n\n          case MESSAGE_TYPE.PUBLISH:\n            this._receivePublish(wireMessage);\n\n            break;\n\n          case MESSAGE_TYPE.PUBACK:\n            var sentMessage = this._sentMessages[wireMessage.messageIdentifier]; // If this is a re flow of a PUBACK after we have restarted receivedMessage will not exist.\n\n            if (sentMessage) {\n              delete this._sentMessages[wireMessage.messageIdentifier];\n              localStorage.removeItem(\"Sent:\" + this._localKey + wireMessage.messageIdentifier);\n              if (this.onMessageDelivered) this.onMessageDelivered(sentMessage.payloadMessage);\n            }\n\n            break;\n\n          case MESSAGE_TYPE.PUBREC:\n            var sentMessage = this._sentMessages[wireMessage.messageIdentifier]; // If this is a re flow of a PUBREC after we have restarted receivedMessage will not exist.\n\n            if (sentMessage) {\n              sentMessage.pubRecReceived = true;\n              var pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {\n                messageIdentifier: wireMessage.messageIdentifier\n              });\n              this.store(\"Sent:\", sentMessage);\n\n              this._schedule_message(pubRelMessage);\n            }\n\n            break;\n\n          case MESSAGE_TYPE.PUBREL:\n            var receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];\n            localStorage.removeItem(\"Received:\" + this._localKey + wireMessage.messageIdentifier); // If this is a re flow of a PUBREL after we have restarted receivedMessage will not exist.\n\n            if (receivedMessage) {\n              this._receiveMessage(receivedMessage);\n\n              delete this._receivedMessages[wireMessage.messageIdentifier];\n            } // Always flow PubComp, we may have previously flowed PubComp but the server lost it and restarted.\n\n\n            var pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, {\n              messageIdentifier: wireMessage.messageIdentifier\n            });\n\n            this._schedule_message(pubCompMessage);\n\n            break;\n\n          case MESSAGE_TYPE.PUBCOMP:\n            var sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n            delete this._sentMessages[wireMessage.messageIdentifier];\n            localStorage.removeItem(\"Sent:\" + this._localKey + wireMessage.messageIdentifier);\n            if (this.onMessageDelivered) this.onMessageDelivered(sentMessage.payloadMessage);\n            break;\n\n          case MESSAGE_TYPE.SUBACK:\n            var sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\n            if (sentMessage) {\n              if (sentMessage.timeOut) sentMessage.timeOut.cancel(); // This will need to be fixed when we add multiple topic support\n\n              if (wireMessage.returnCode[0] === 0x80) {\n                if (sentMessage.onFailure) {\n                  sentMessage.onFailure(wireMessage.returnCode);\n                }\n              } else if (sentMessage.onSuccess) {\n                sentMessage.onSuccess(wireMessage.returnCode);\n              }\n\n              delete this._sentMessages[wireMessage.messageIdentifier];\n            }\n\n            break;\n\n          case MESSAGE_TYPE.UNSUBACK:\n            var sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\n            if (sentMessage) {\n              if (sentMessage.timeOut) sentMessage.timeOut.cancel();\n\n              if (sentMessage.callback) {\n                sentMessage.callback();\n              }\n\n              delete this._sentMessages[wireMessage.messageIdentifier];\n            }\n\n            break;\n\n          case MESSAGE_TYPE.PINGRESP:\n            /* The sendPinger or receivePinger may have sent a ping, the receivePinger has already been reset. */\n            this.sendPinger.reset();\n            break;\n\n          case MESSAGE_TYPE.DISCONNECT:\n            // Clients do not expect to receive disconnect packets.\n            this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code, format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\n            break;\n\n          default:\n            this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code, format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\n        }\n      } catch (error) {\n        var errorStack = error.hasOwnProperty(\"stack\") == \"undefined\" ? error.stack.toString() : \"No Error Stack Available\";\n\n        this._disconnected(ERROR.INTERNAL_ERROR.code, format(ERROR.INTERNAL_ERROR, [error.message, errorStack]));\n\n        return;\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._on_socket_error = function (error) {\n      if (!this._reconnecting) {\n        this._disconnected(ERROR.SOCKET_ERROR.code, format(ERROR.SOCKET_ERROR, [error.data]));\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._on_socket_close = function () {\n      if (!this._reconnecting) {\n        this._disconnected(ERROR.SOCKET_CLOSE.code, format(ERROR.SOCKET_CLOSE));\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._socket_send = function (wireMessage) {\n      if (wireMessage.type == 1) {\n        var wireMessageMasked = this._traceMask(wireMessage, \"password\");\n\n        this._trace(\"Client._socket_send\", wireMessageMasked);\n      } else this._trace(\"Client._socket_send\", wireMessage);\n\n      this.socket.send(wireMessage.encode());\n      /* We have proved to the server we are alive. */\n\n      this.sendPinger.reset();\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._receivePublish = function (wireMessage) {\n      switch (wireMessage.payloadMessage.qos) {\n        case \"undefined\":\n        case 0:\n          this._receiveMessage(wireMessage);\n\n          break;\n\n        case 1:\n          var pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, {\n            messageIdentifier: wireMessage.messageIdentifier\n          });\n\n          this._schedule_message(pubAckMessage);\n\n          this._receiveMessage(wireMessage);\n\n          break;\n\n        case 2:\n          this._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n          this.store(\"Received:\", wireMessage);\n          var pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, {\n            messageIdentifier: wireMessage.messageIdentifier\n          });\n\n          this._schedule_message(pubRecMessage);\n\n          break;\n\n        default:\n          throw Error(\"Invaild qos=\" + wireMessage.payloadMessage.qos);\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._receiveMessage = function (wireMessage) {\n      if (this.onMessageArrived) {\n        this.onMessageArrived(wireMessage.payloadMessage);\n      }\n    };\n    /**\n    * Client has connected.\n    * @param {reconnect} [boolean] indicate if this was a result of reconnect operation.\n    * @param {uri} [string] fully qualified WebSocket URI of the server.\n    */\n\n\n    ClientImpl.prototype._connected = function (reconnect, uri) {\n      // Execute the onConnected callback if there is one.\n      if (this.onConnected) this.onConnected(reconnect, uri);\n    };\n    /**\n    * Attempts to reconnect the client to the server.\n     * For each reconnect attempt, will double the reconnect interval\n     * up to 128 seconds.\n    */\n\n\n    ClientImpl.prototype._reconnect = function () {\n      this._trace(\"Client._reconnect\");\n\n      if (!this.connected) {\n        this._reconnecting = true;\n        this.sendPinger.cancel();\n        this.receivePinger.cancel();\n        if (this._reconnectInterval < 128) this._reconnectInterval = this._reconnectInterval * 2;\n\n        if (this.connectOptions.uris) {\n          this.hostIndex = 0;\n\n          this._doConnect(this.connectOptions.uris[0]);\n        } else {\n          this._doConnect(this.uri);\n        }\n      }\n    };\n    /**\n    * Client has disconnected either at its own request or because the server\n    * or network disconnected it. Remove all non-durable state.\n    * @param {errorCode} [number] the error number.\n    * @param {errorText} [string] the error text.\n    * @ignore\n    */\n\n\n    ClientImpl.prototype._disconnected = function (errorCode, errorText) {\n      this._trace(\"Client._disconnected\", errorCode, errorText);\n\n      if (errorCode !== undefined && this._reconnecting) {\n        //Continue automatic reconnect process\n        this._reconnectTimeout = new Timeout(this, this._reconnectInterval, this._reconnect);\n        return;\n      }\n\n      this.sendPinger.cancel();\n      this.receivePinger.cancel();\n\n      if (this._connectTimeout) {\n        this._connectTimeout.cancel();\n\n        this._connectTimeout = null;\n      } // Clear message buffers.\n\n\n      this._msg_queue = [];\n      this._buffered_msg_queue = [];\n      this._notify_msg_sent = {};\n\n      if (this.socket) {\n        // Cancel all socket callbacks so that they cannot be driven again by this socket.\n        this.socket.onopen = null;\n        this.socket.onmessage = null;\n        this.socket.onerror = null;\n        this.socket.onclose = null;\n        if (this.socket.readyState === 1) this.socket.close();\n        delete this.socket;\n      }\n\n      if (this.connectOptions.uris && this.hostIndex < this.connectOptions.uris.length - 1) {\n        // Try the next host.\n        this.hostIndex++;\n\n        this._doConnect(this.connectOptions.uris[this.hostIndex]);\n      } else {\n        if (errorCode === undefined) {\n          errorCode = ERROR.OK.code;\n          errorText = format(ERROR.OK);\n        } // Run any application callbacks last as they may attempt to reconnect and hence create a new socket.\n\n\n        if (this.connected) {\n          this.connected = false; // Execute the connectionLostCallback if there is one, and we were connected.\n\n          if (this.onConnectionLost) {\n            this.onConnectionLost({\n              errorCode: errorCode,\n              errorMessage: errorText,\n              reconnect: this.connectOptions.reconnect,\n              uri: this._wsuri\n            });\n          }\n\n          if (errorCode !== ERROR.OK.code && this.connectOptions.reconnect) {\n            // Start automatic reconnect process for the very first time since last successful connect.\n            this._reconnectInterval = 1;\n\n            this._reconnect();\n\n            return;\n          }\n        } else {\n          // Otherwise we never had a connection, so indicate that the connect has failed.\n          if (this.connectOptions.mqttVersion === 4 && this.connectOptions.mqttVersionExplicit === false) {\n            this._trace(\"Failed to connect V4, dropping back to V3\");\n\n            this.connectOptions.mqttVersion = 3;\n\n            if (this.connectOptions.uris) {\n              this.hostIndex = 0;\n\n              this._doConnect(this.connectOptions.uris[0]);\n            } else {\n              this._doConnect(this.uri);\n            }\n          } else if (this.connectOptions.onFailure) {\n            this.connectOptions.onFailure({\n              invocationContext: this.connectOptions.invocationContext,\n              errorCode: errorCode,\n              errorMessage: errorText\n            });\n          }\n        }\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._trace = function () {\n      // Pass trace message back to client's callback function\n      if (this.traceFunction) {\n        var args = Array.prototype.slice.call(arguments);\n\n        for (var i in args) {\n          if (typeof args[i] !== \"undefined\") args.splice(i, 1, JSON.stringify(args[i]));\n        }\n\n        var record = args.join(\"\");\n        this.traceFunction({\n          severity: \"Debug\",\n          message: record\n        });\n      } //buffer style trace\n\n\n      if (this._traceBuffer !== null) {\n        for (var i = 0, max = arguments.length; i < max; i++) {\n          if (this._traceBuffer.length == this._MAX_TRACE_ENTRIES) {\n            this._traceBuffer.shift();\n          }\n\n          if (i === 0) this._traceBuffer.push(arguments[i]);else if (typeof arguments[i] === \"undefined\") this._traceBuffer.push(arguments[i]);else this._traceBuffer.push(\"  \" + JSON.stringify(arguments[i]));\n        }\n      }\n    };\n    /** @ignore */\n\n\n    ClientImpl.prototype._traceMask = function (traceObject, masked) {\n      var traceObjectMasked = {};\n\n      for (var attr in traceObject) {\n        if (traceObject.hasOwnProperty(attr)) {\n          if (attr == masked) traceObjectMasked[attr] = \"******\";else traceObjectMasked[attr] = traceObject[attr];\n        }\n      }\n\n      return traceObjectMasked;\n    }; // ------------------------------------------------------------------------\n    // Public Programming interface.\n    // ------------------------------------------------------------------------\n\n    /**\n    * The JavaScript application communicates to the server using a {@link Paho.Client} object.\n    * <p>\n    * Most applications will create just one Client object and then call its connect() method,\n    * however applications can create more than one Client object if they wish.\n    * In this case the combination of host, port and clientId attributes must be different for each Client object.\n    * <p>\n    * The send, subscribe and unsubscribe methods are implemented as asynchronous JavaScript methods\n    * (even though the underlying protocol exchange might be synchronous in nature).\n    * This means they signal their completion by calling back to the application,\n    * via Success or Failure callback functions provided by the application on the method in question.\n    * Such callbacks are called at most once per method invocation and do not persist beyond the lifetime\n    * of the script that made the invocation.\n    * <p>\n    * In contrast there are some callback functions, most notably <i>onMessageArrived</i>,\n    * that are defined on the {@link Paho.Client} object.\n    * These may get called multiple times, and aren't directly related to specific method invocations made by the client.\n    *\n    * @name Paho.Client\n    *\n    * @constructor\n    *\n    * @param {string} host - the address of the messaging server, as a fully qualified WebSocket URI, as a DNS name or dotted decimal IP address.\n    * @param {number} port - the port number to connect to - only required if host is not a URI\n    * @param {string} path - the path on the host to connect to - only used if host is not a URI. Default: '/mqtt'.\n    * @param {string} clientId - the Messaging client identifier, between 1 and 23 characters in length.\n    *\n    * @property {string} host - <i>read only</i> the server's DNS hostname or dotted decimal IP address.\n    * @property {number} port - <i>read only</i> the server's port.\n    * @property {string} path - <i>read only</i> the server's path.\n    * @property {string} clientId - <i>read only</i> used when connecting to the server.\n    * @property {function} onConnectionLost - called when a connection has been lost.\n    *                            after a connect() method has succeeded.\n    *                            Establish the call back used when a connection has been lost. The connection may be\n    *                            lost because the client initiates a disconnect or because the server or network\n    *                            cause the client to be disconnected. The disconnect call back may be called without\n    *                            the connectionComplete call back being invoked if, for example the client fails to\n    *                            connect.\n    *                            A single response object parameter is passed to the onConnectionLost callback containing the following fields:\n    *                            <ol>\n    *                            <li>errorCode\n    *                            <li>errorMessage\n    *                            </ol>\n    * @property {function} onMessageDelivered - called when a message has been delivered.\n    *                            All processing that this Client will ever do has been completed. So, for example,\n    *                            in the case of a Qos=2 message sent by this client, the PubComp flow has been received from the server\n    *                            and the message has been removed from persistent storage before this callback is invoked.\n    *                            Parameters passed to the onMessageDelivered callback are:\n    *                            <ol>\n    *                            <li>{@link Paho.Message} that was delivered.\n    *                            </ol>\n    * @property {function} onMessageArrived - called when a message has arrived in this Paho.client.\n    *                            Parameters passed to the onMessageArrived callback are:\n    *                            <ol>\n    *                            <li>{@link Paho.Message} that has arrived.\n    *                            </ol>\n    * @property {function} onConnected - called when a connection is successfully made to the server.\n    *                                  after a connect() method.\n    *                                  Parameters passed to the onConnected callback are:\n    *                                  <ol>\n    *                                  <li>reconnect (boolean) - If true, the connection was the result of a reconnect.</li>\n    *                                  <li>URI (string) - The URI used to connect to the server.</li>\n    *                                  </ol>\n    * @property {boolean} disconnectedPublishing - if set, will enable disconnected publishing in\n    *                                            in the event that the connection to the server is lost.\n    * @property {number} disconnectedBufferSize - Used to set the maximum number of messages that the disconnected\n    *                                             buffer will hold before rejecting new messages. Default size: 5000 messages\n    * @property {function} trace - called whenever trace is called. TODO\n    */\n\n\n    var Client = function Client(host, port, path, clientId) {\n      var uri;\n      if (typeof host !== \"string\") throw new Error(format(ERROR.INVALID_TYPE, [typeof host, \"host\"]));\n\n      if (arguments.length == 2) {\n        // host: must be full ws:// uri\n        // port: clientId\n        clientId = port;\n        uri = host;\n        var match = uri.match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);\n\n        if (match) {\n          host = match[4] || match[2];\n          port = parseInt(match[7]);\n          path = match[8];\n        } else {\n          throw new Error(format(ERROR.INVALID_ARGUMENT, [host, \"host\"]));\n        }\n      } else {\n        if (arguments.length == 3) {\n          clientId = path;\n          path = \"/mqtt\";\n        }\n\n        if (typeof port !== \"number\" || port < 0) throw new Error(format(ERROR.INVALID_TYPE, [typeof port, \"port\"]));\n        if (typeof path !== \"string\") throw new Error(format(ERROR.INVALID_TYPE, [typeof path, \"path\"]));\n        var ipv6AddSBracket = host.indexOf(\":\") !== -1 && host.slice(0, 1) !== \"[\" && host.slice(-1) !== \"]\";\n        uri = \"ws://\" + (ipv6AddSBracket ? \"[\" + host + \"]\" : host) + \":\" + port + path;\n      }\n\n      var clientIdLength = 0;\n\n      for (var i = 0; i < clientId.length; i++) {\n        var charCode = clientId.charCodeAt(i);\n\n        if (0xD800 <= charCode && charCode <= 0xDBFF) {\n          i++; // Surrogate pair.\n        }\n\n        clientIdLength++;\n      }\n\n      if (typeof clientId !== \"string\" || clientIdLength > 65535) throw new Error(format(ERROR.INVALID_ARGUMENT, [clientId, \"clientId\"]));\n      var client = new ClientImpl(uri, host, port, path, clientId); //Public Properties\n\n      Object.defineProperties(this, {\n        \"host\": {\n          get: function get() {\n            return host;\n          },\n          set: function set() {\n            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));\n          }\n        },\n        \"port\": {\n          get: function get() {\n            return port;\n          },\n          set: function set() {\n            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));\n          }\n        },\n        \"path\": {\n          get: function get() {\n            return path;\n          },\n          set: function set() {\n            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));\n          }\n        },\n        \"uri\": {\n          get: function get() {\n            return uri;\n          },\n          set: function set() {\n            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));\n          }\n        },\n        \"clientId\": {\n          get: function get() {\n            return client.clientId;\n          },\n          set: function set() {\n            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));\n          }\n        },\n        \"onConnected\": {\n          get: function get() {\n            return client.onConnected;\n          },\n          set: function set(newOnConnected) {\n            if (typeof newOnConnected === \"function\") client.onConnected = newOnConnected;else throw new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnected, \"onConnected\"]));\n          }\n        },\n        \"disconnectedPublishing\": {\n          get: function get() {\n            return client.disconnectedPublishing;\n          },\n          set: function set(newDisconnectedPublishing) {\n            client.disconnectedPublishing = newDisconnectedPublishing;\n          }\n        },\n        \"disconnectedBufferSize\": {\n          get: function get() {\n            return client.disconnectedBufferSize;\n          },\n          set: function set(newDisconnectedBufferSize) {\n            client.disconnectedBufferSize = newDisconnectedBufferSize;\n          }\n        },\n        \"onConnectionLost\": {\n          get: function get() {\n            return client.onConnectionLost;\n          },\n          set: function set(newOnConnectionLost) {\n            if (typeof newOnConnectionLost === \"function\") client.onConnectionLost = newOnConnectionLost;else throw new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnectionLost, \"onConnectionLost\"]));\n          }\n        },\n        \"onMessageDelivered\": {\n          get: function get() {\n            return client.onMessageDelivered;\n          },\n          set: function set(newOnMessageDelivered) {\n            if (typeof newOnMessageDelivered === \"function\") client.onMessageDelivered = newOnMessageDelivered;else throw new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageDelivered, \"onMessageDelivered\"]));\n          }\n        },\n        \"onMessageArrived\": {\n          get: function get() {\n            return client.onMessageArrived;\n          },\n          set: function set(newOnMessageArrived) {\n            if (typeof newOnMessageArrived === \"function\") client.onMessageArrived = newOnMessageArrived;else throw new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageArrived, \"onMessageArrived\"]));\n          }\n        },\n        \"trace\": {\n          get: function get() {\n            return client.traceFunction;\n          },\n          set: function set(trace) {\n            if (typeof trace === \"function\") {\n              client.traceFunction = trace;\n            } else {\n              throw new Error(format(ERROR.INVALID_TYPE, [typeof trace, \"onTrace\"]));\n            }\n          }\n        }\n      });\n      /**\n      * Connect this Messaging client to its server.\n      *\n      * @name Paho.Client#connect\n      * @function\n      * @param {object} connectOptions - Attributes used with the connection.\n      * @param {number} connectOptions.timeout - If the connect has not succeeded within this\n      *                    number of seconds, it is deemed to have failed.\n      *                    The default is 30 seconds.\n      * @param {string} connectOptions.userName - Authentication username for this connection.\n      * @param {string} connectOptions.password - Authentication password for this connection.\n      * @param {Paho.Message} connectOptions.willMessage - sent by the server when the client\n      *                    disconnects abnormally.\n      * @param {number} connectOptions.keepAliveInterval - the server disconnects this client if\n      *                    there is no activity for this number of seconds.\n      *                    The default value of 60 seconds is assumed if not set.\n      * @param {boolean} connectOptions.cleanSession - if true(default) the client and server\n      *                    persistent state is deleted on successful connect.\n      * @param {boolean} connectOptions.useSSL - if present and true, use an SSL Websocket connection.\n      * @param {object} connectOptions.invocationContext - passed to the onSuccess callback or onFailure callback.\n      * @param {function} connectOptions.onSuccess - called when the connect acknowledgement\n      *                    has been received from the server.\n      * A single response object parameter is passed to the onSuccess callback containing the following fields:\n      * <ol>\n      * <li>invocationContext as passed in to the onSuccess method in the connectOptions.\n      * </ol>\n      * @param {function} connectOptions.onFailure - called when the connect request has failed or timed out.\n      * A single response object parameter is passed to the onFailure callback containing the following fields:\n      * <ol>\n      * <li>invocationContext as passed in to the onFailure method in the connectOptions.\n      * <li>errorCode a number indicating the nature of the error.\n      * <li>errorMessage text describing the error.\n      * </ol>\n      * @param {array} connectOptions.hosts - If present this contains either a set of hostnames or fully qualified\n      * WebSocket URIs (ws://iot.eclipse.org:80/ws), that are tried in order in place\n      * of the host and port paramater on the construtor. The hosts are tried one at at time in order until\n      * one of then succeeds.\n      * @param {array} connectOptions.ports - If present the set of ports matching the hosts. If hosts contains URIs, this property\n      * is not used.\n      * @param {boolean} connectOptions.reconnect - Sets whether the client will automatically attempt to reconnect\n      * to the server if the connection is lost.\n      *<ul>\n      *<li>If set to false, the client will not attempt to automatically reconnect to the server in the event that the\n      * connection is lost.</li>\n      *<li>If set to true, in the event that the connection is lost, the client will attempt to reconnect to the server.\n      * It will initially wait 1 second before it attempts to reconnect, for every failed reconnect attempt, the delay\n      * will double until it is at 2 minutes at which point the delay will stay at 2 minutes.</li>\n      *</ul>\n      * @param {number} connectOptions.mqttVersion - The version of MQTT to use to connect to the MQTT Broker.\n      *<ul>\n      *<li>3 - MQTT V3.1</li>\n      *<li>4 - MQTT V3.1.1</li>\n      *</ul>\n      * @param {boolean} connectOptions.mqttVersionExplicit - If set to true, will force the connection to use the\n      * selected MQTT Version or will fail to connect.\n      * @param {array} connectOptions.uris - If present, should contain a list of fully qualified WebSocket uris\n      * (e.g. ws://iot.eclipse.org:80/ws), that are tried in order in place of the host and port parameter of the construtor.\n      * The uris are tried one at a time in order until one of them succeeds. Do not use this in conjunction with hosts as\n      * the hosts array will be converted to uris and will overwrite this property.\n      * @throws {InvalidState} If the client is not in disconnected state. The client must have received connectionLost\n      * or disconnected before calling connect for a second or subsequent time.\n      */\n\n      this.connect = function (connectOptions) {\n        connectOptions = connectOptions || {};\n        validate(connectOptions, {\n          timeout: \"number\",\n          userName: \"string\",\n          password: \"string\",\n          willMessage: \"object\",\n          keepAliveInterval: \"number\",\n          cleanSession: \"boolean\",\n          useSSL: \"boolean\",\n          invocationContext: \"object\",\n          onSuccess: \"function\",\n          onFailure: \"function\",\n          hosts: \"object\",\n          ports: \"object\",\n          reconnect: \"boolean\",\n          mqttVersion: \"number\",\n          mqttVersionExplicit: \"boolean\",\n          uris: \"object\"\n        }); // If no keep alive interval is set, assume 60 seconds.\n\n        if (connectOptions.keepAliveInterval === undefined) connectOptions.keepAliveInterval = 60;\n\n        if (connectOptions.mqttVersion > 4 || connectOptions.mqttVersion < 3) {\n          throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.mqttVersion, \"connectOptions.mqttVersion\"]));\n        }\n\n        if (connectOptions.mqttVersion === undefined) {\n          connectOptions.mqttVersionExplicit = false;\n          connectOptions.mqttVersion = 4;\n        } else {\n          connectOptions.mqttVersionExplicit = true;\n        } //Check that if password is set, so is username\n\n\n        if (connectOptions.password !== undefined && connectOptions.userName === undefined) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.password, \"connectOptions.password\"]));\n\n        if (connectOptions.willMessage) {\n          if (!(connectOptions.willMessage instanceof Message)) throw new Error(format(ERROR.INVALID_TYPE, [connectOptions.willMessage, \"connectOptions.willMessage\"])); // The will message must have a payload that can be represented as a string.\n          // Cause the willMessage to throw an exception if this is not the case.\n\n          connectOptions.willMessage.stringPayload = null;\n          if (typeof connectOptions.willMessage.destinationName === \"undefined\") throw new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.willMessage.destinationName, \"connectOptions.willMessage.destinationName\"]));\n        }\n\n        if (typeof connectOptions.cleanSession === \"undefined\") connectOptions.cleanSession = true;\n\n        if (connectOptions.hosts) {\n          if (!(connectOptions.hosts instanceof Array)) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n          if (connectOptions.hosts.length < 1) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n          var usingURIs = false;\n\n          for (var i = 0; i < connectOptions.hosts.length; i++) {\n            if (typeof connectOptions.hosts[i] !== \"string\") throw new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.hosts[i], \"connectOptions.hosts[\" + i + \"]\"]));\n\n            if (/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(connectOptions.hosts[i])) {\n              if (i === 0) {\n                usingURIs = true;\n              } else if (!usingURIs) {\n                throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\" + i + \"]\"]));\n              }\n            } else if (usingURIs) {\n              throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\" + i + \"]\"]));\n            }\n          }\n\n          if (!usingURIs) {\n            if (!connectOptions.ports) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n            if (!(connectOptions.ports instanceof Array)) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n            if (connectOptions.hosts.length !== connectOptions.ports.length) throw new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n            connectOptions.uris = [];\n\n            for (var i = 0; i < connectOptions.hosts.length; i++) {\n              if (typeof connectOptions.ports[i] !== \"number\" || connectOptions.ports[i] < 0) throw new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.ports[i], \"connectOptions.ports[\" + i + \"]\"]));\n              var host = connectOptions.hosts[i];\n              var port = connectOptions.ports[i];\n              var ipv6 = host.indexOf(\":\") !== -1;\n              uri = \"ws://\" + (ipv6 ? \"[\" + host + \"]\" : host) + \":\" + port + path;\n              connectOptions.uris.push(uri);\n            }\n          } else {\n            connectOptions.uris = connectOptions.hosts;\n          }\n        }\n\n        client.connect(connectOptions);\n      };\n      /**\n      * Subscribe for messages, request receipt of a copy of messages sent to the destinations described by the filter.\n      *\n      * @name Paho.Client#subscribe\n      * @function\n      * @param {string} filter describing the destinations to receive messages from.\n      * <br>\n      * @param {object} subscribeOptions - used to control the subscription\n      *\n      * @param {number} subscribeOptions.qos - the maximum qos of any publications sent\n      *                                  as a result of making this subscription.\n      * @param {object} subscribeOptions.invocationContext - passed to the onSuccess callback\n      *                                  or onFailure callback.\n      * @param {function} subscribeOptions.onSuccess - called when the subscribe acknowledgement\n      *                                  has been received from the server.\n      *                                  A single response object parameter is passed to the onSuccess callback containing the following fields:\n      *                                  <ol>\n      *                                  <li>invocationContext if set in the subscribeOptions.\n      *                                  </ol>\n      * @param {function} subscribeOptions.onFailure - called when the subscribe request has failed or timed out.\n      *                                  A single response object parameter is passed to the onFailure callback containing the following fields:\n      *                                  <ol>\n      *                                  <li>invocationContext - if set in the subscribeOptions.\n      *                                  <li>errorCode - a number indicating the nature of the error.\n      *                                  <li>errorMessage - text describing the error.\n      *                                  </ol>\n      * @param {number} subscribeOptions.timeout - which, if present, determines the number of\n      *                                  seconds after which the onFailure calback is called.\n      *                                  The presence of a timeout does not prevent the onSuccess\n      *                                  callback from being called when the subscribe completes.\n      * @throws {InvalidState} if the client is not in connected state.\n      */\n\n\n      this.subscribe = function (filter, subscribeOptions) {\n        if (typeof filter !== \"string\" && filter.constructor !== Array) throw new Error(\"Invalid argument:\" + filter);\n        subscribeOptions = subscribeOptions || {};\n        validate(subscribeOptions, {\n          qos: \"number\",\n          invocationContext: \"object\",\n          onSuccess: \"function\",\n          onFailure: \"function\",\n          timeout: \"number\"\n        });\n        if (subscribeOptions.timeout && !subscribeOptions.onFailure) throw new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");\n        if (typeof subscribeOptions.qos !== \"undefined\" && !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2)) throw new Error(format(ERROR.INVALID_ARGUMENT, [subscribeOptions.qos, \"subscribeOptions.qos\"]));\n        client.subscribe(filter, subscribeOptions);\n      };\n      /**\n       * Unsubscribe for messages, stop receiving messages sent to destinations described by the filter.\n       *\n       * @name Paho.Client#unsubscribe\n       * @function\n       * @param {string} filter - describing the destinations to receive messages from.\n       * @param {object} unsubscribeOptions - used to control the subscription\n       * @param {object} unsubscribeOptions.invocationContext - passed to the onSuccess callback\n      \t\t\t\t\t\t\t\t\t  or onFailure callback.\n       * @param {function} unsubscribeOptions.onSuccess - called when the unsubscribe acknowledgement has been received from the server.\n       *                                    A single response object parameter is passed to the\n       *                                    onSuccess callback containing the following fields:\n       *                                    <ol>\n       *                                    <li>invocationContext - if set in the unsubscribeOptions.\n       *                                    </ol>\n       * @param {function} unsubscribeOptions.onFailure called when the unsubscribe request has failed or timed out.\n       *                                    A single response object parameter is passed to the onFailure callback containing the following fields:\n       *                                    <ol>\n       *                                    <li>invocationContext - if set in the unsubscribeOptions.\n       *                                    <li>errorCode - a number indicating the nature of the error.\n       *                                    <li>errorMessage - text describing the error.\n       *                                    </ol>\n       * @param {number} unsubscribeOptions.timeout - which, if present, determines the number of seconds\n       *                                    after which the onFailure callback is called. The presence of\n       *                                    a timeout does not prevent the onSuccess callback from being\n       *                                    called when the unsubscribe completes\n       * @throws {InvalidState} if the client is not in connected state.\n       */\n\n\n      this.unsubscribe = function (filter, unsubscribeOptions) {\n        if (typeof filter !== \"string\" && filter.constructor !== Array) throw new Error(\"Invalid argument:\" + filter);\n        unsubscribeOptions = unsubscribeOptions || {};\n        validate(unsubscribeOptions, {\n          invocationContext: \"object\",\n          onSuccess: \"function\",\n          onFailure: \"function\",\n          timeout: \"number\"\n        });\n        if (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure) throw new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");\n        client.unsubscribe(filter, unsubscribeOptions);\n      };\n      /**\n      * Send a message to the consumers of the destination in the Message.\n      *\n      * @name Paho.Client#send\n      * @function\n      * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the destination to which the message is to be sent.\n      * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n      * @param {String|ArrayBuffer} payload - The message data to be sent.\n      * @param {number} qos The Quality of Service used to deliver the message.\n      * \t\t<dl>\n      * \t\t\t<dt>0 Best effort (default).\n      *     \t\t\t<dt>1 At least once.\n      *     \t\t\t<dt>2 Exactly once.\n      * \t\t</dl>\n      * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n      *                     to both current and future subscriptions.\n      *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n      *                     A received message has the retained boolean set to true if the message was published\n      *                     with the retained boolean set to true\n      *                     and the subscrption was made after the message has been published.\n      * @throws {InvalidState} if the client is not connected.\n      */\n\n\n      this.send = function (topic, payload, qos, retained) {\n        var message;\n\n        if (arguments.length === 0) {\n          throw new Error(\"Invalid argument.\" + \"length\");\n        } else if (arguments.length == 1) {\n          if (!(topic instanceof Message) && typeof topic !== \"string\") throw new Error(\"Invalid argument:\" + typeof topic);\n          message = topic;\n          if (typeof message.destinationName === \"undefined\") throw new Error(format(ERROR.INVALID_ARGUMENT, [message.destinationName, \"Message.destinationName\"]));\n          client.send(message);\n        } else {\n          //parameter checking in Message object\n          message = new Message(payload);\n          message.destinationName = topic;\n          if (arguments.length >= 3) message.qos = qos;\n          if (arguments.length >= 4) message.retained = retained;\n          client.send(message);\n        }\n      };\n      /**\n      * Publish a message to the consumers of the destination in the Message.\n      * Synonym for Paho.Mqtt.Client#send\n      *\n      * @name Paho.Client#publish\n      * @function\n      * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the topic to which the message is to be published.\n      * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n      * @param {String|ArrayBuffer} payload - The message data to be published.\n      * @param {number} qos The Quality of Service used to deliver the message.\n      * \t\t<dl>\n      * \t\t\t<dt>0 Best effort (default).\n      *     \t\t\t<dt>1 At least once.\n      *     \t\t\t<dt>2 Exactly once.\n      * \t\t</dl>\n      * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n      *                     to both current and future subscriptions.\n      *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n      *                     A received message has the retained boolean set to true if the message was published\n      *                     with the retained boolean set to true\n      *                     and the subscrption was made after the message has been published.\n      * @throws {InvalidState} if the client is not connected.\n      */\n\n\n      this.publish = function (topic, payload, qos, retained) {\n        var message;\n\n        if (arguments.length === 0) {\n          throw new Error(\"Invalid argument.\" + \"length\");\n        } else if (arguments.length == 1) {\n          if (!(topic instanceof Message) && typeof topic !== \"string\") throw new Error(\"Invalid argument:\" + typeof topic);\n          message = topic;\n          if (typeof message.destinationName === \"undefined\") throw new Error(format(ERROR.INVALID_ARGUMENT, [message.destinationName, \"Message.destinationName\"]));\n          client.send(message);\n        } else {\n          //parameter checking in Message object\n          message = new Message(payload);\n          message.destinationName = topic;\n          if (arguments.length >= 3) message.qos = qos;\n          if (arguments.length >= 4) message.retained = retained;\n          client.send(message);\n        }\n      };\n      /**\n      * Normal disconnect of this Messaging client from its server.\n      *\n      * @name Paho.Client#disconnect\n      * @function\n      * @throws {InvalidState} if the client is already disconnected.\n      */\n\n\n      this.disconnect = function () {\n        client.disconnect();\n      };\n      /**\n      * Get the contents of the trace log.\n      *\n      * @name Paho.Client#getTraceLog\n      * @function\n      * @return {Object[]} tracebuffer containing the time ordered trace records.\n      */\n\n\n      this.getTraceLog = function () {\n        return client.getTraceLog();\n      };\n      /**\n      * Start tracing.\n      *\n      * @name Paho.Client#startTrace\n      * @function\n      */\n\n\n      this.startTrace = function () {\n        client.startTrace();\n      };\n      /**\n      * Stop tracing.\n      *\n      * @name Paho.Client#stopTrace\n      * @function\n      */\n\n\n      this.stopTrace = function () {\n        client.stopTrace();\n      };\n\n      this.isConnected = function () {\n        return client.connected;\n      };\n    };\n    /**\n    * An application message, sent or received.\n    * <p>\n    * All attributes may be null, which implies the default values.\n    *\n    * @name Paho.Message\n    * @constructor\n    * @param {String|ArrayBuffer} payload The message data to be sent.\n    * <p>\n    * @property {string} payloadString <i>read only</i> The payload as a string if the payload consists of valid UTF-8 characters.\n    * @property {ArrayBuffer} payloadBytes <i>read only</i> The payload as an ArrayBuffer.\n    * <p>\n    * @property {string} destinationName <b>mandatory</b> The name of the destination to which the message is to be sent\n    *                    (for messages about to be sent) or the name of the destination from which the message has been received.\n    *                    (for messages received by the onMessage function).\n    * <p>\n    * @property {number} qos The Quality of Service used to deliver the message.\n    * <dl>\n    *     <dt>0 Best effort (default).\n    *     <dt>1 At least once.\n    *     <dt>2 Exactly once.\n    * </dl>\n    * <p>\n    * @property {Boolean} retained If true, the message is to be retained by the server and delivered\n    *                     to both current and future subscriptions.\n    *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n    *                     A received message has the retained boolean set to true if the message was published\n    *                     with the retained boolean set to true\n    *                     and the subscrption was made after the message has been published.\n    * <p>\n    * @property {Boolean} duplicate <i>read only</i> If true, this message might be a duplicate of one which has already been received.\n    *                     This is only set on messages received from the server.\n    *\n    */\n\n\n    var Message = function Message(newPayload) {\n      var payload;\n\n      if (typeof newPayload === \"string\" || newPayload instanceof ArrayBuffer || ArrayBuffer.isView(newPayload) && !(newPayload instanceof DataView)) {\n        payload = newPayload;\n      } else {\n        throw format(ERROR.INVALID_ARGUMENT, [newPayload, \"newPayload\"]);\n      }\n\n      var destinationName;\n      var qos = 0;\n      var retained = false;\n      var duplicate = false;\n      Object.defineProperties(this, {\n        \"payloadString\": {\n          enumerable: true,\n          get: function get() {\n            if (typeof payload === \"string\") return payload;else return parseUTF8(payload, 0, payload.length);\n          }\n        },\n        \"payloadBytes\": {\n          enumerable: true,\n          get: function get() {\n            if (typeof payload === \"string\") {\n              var buffer = new ArrayBuffer(UTF8Length(payload));\n              var byteStream = new Uint8Array(buffer);\n              stringToUTF8(payload, byteStream, 0);\n              return byteStream;\n            } else {\n              return payload;\n            }\n          }\n        },\n        \"destinationName\": {\n          enumerable: true,\n          get: function get() {\n            return destinationName;\n          },\n          set: function set(newDestinationName) {\n            if (typeof newDestinationName === \"string\") destinationName = newDestinationName;else throw new Error(format(ERROR.INVALID_ARGUMENT, [newDestinationName, \"newDestinationName\"]));\n          }\n        },\n        \"qos\": {\n          enumerable: true,\n          get: function get() {\n            return qos;\n          },\n          set: function set(newQos) {\n            if (newQos === 0 || newQos === 1 || newQos === 2) qos = newQos;else throw new Error(\"Invalid argument:\" + newQos);\n          }\n        },\n        \"retained\": {\n          enumerable: true,\n          get: function get() {\n            return retained;\n          },\n          set: function set(newRetained) {\n            if (typeof newRetained === \"boolean\") retained = newRetained;else throw new Error(format(ERROR.INVALID_ARGUMENT, [newRetained, \"newRetained\"]));\n          }\n        },\n        \"topic\": {\n          enumerable: true,\n          get: function get() {\n            return destinationName;\n          },\n          set: function set(newTopic) {\n            destinationName = newTopic;\n          }\n        },\n        \"duplicate\": {\n          enumerable: true,\n          get: function get() {\n            return duplicate;\n          },\n          set: function set(newDuplicate) {\n            duplicate = newDuplicate;\n          }\n        }\n      });\n    }; // Module contents.\n\n\n    return {\n      Client: Client,\n      Message: Message\n    }; // eslint-disable-next-line no-nested-ternary\n  }(typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\n  return PahoMQTT;\n});","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { PubSub } from './PubSub';\nexport * from './Providers';\nvar CONTROL_MSG;\n\n(function (CONTROL_MSG) {\n  CONTROL_MSG[\"CONNECTION_CLOSED\"] = \"Connection closed\";\n  CONTROL_MSG[\"TIMEOUT_DISCONNECT\"] = \"Timeout disconnect\";\n  CONTROL_MSG[\"SUBSCRIPTION_ACK\"] = \"Subscription ack\";\n})(CONTROL_MSG || (CONTROL_MSG = {}));\n\nexport { PubSub, CONTROL_MSG };\n/**\n * @deprecated use named import\n */\n\nexport default PubSub;","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nexport function getLocation(source, position) {\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\n  var line = 1;\n  var column = position + 1;\n  var match;\n\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\n    line += 1;\n    column = position + 1 - (match.index + match[0].length);\n  }\n\n  return {\n    line: line,\n    column: column\n  };\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { getLocation } from '../language/location';\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n */\n\nexport function printError(error) {\n  var printedLocations = [];\n\n  if (error.nodes) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = error.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var node = _step.value;\n\n        if (node.loc) {\n          printedLocations.push(highlightSourceAtLocation(node.loc.source, getLocation(node.loc.source, node.loc.start)));\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } else if (error.source && error.locations) {\n    var source = error.source;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = error.locations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var location = _step2.value;\n        printedLocations.push(highlightSourceAtLocation(source, location));\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n\n  return printedLocations.length === 0 ? error.message : [error.message].concat(printedLocations).join('\\n\\n') + '\\n';\n}\n/**\n * Render a helpful description of the location of the error in the GraphQL\n * Source document.\n */\n\nfunction highlightSourceAtLocation(source, location) {\n  var firstLineColumnOffset = source.locationOffset.column - 1;\n  var body = whitespace(firstLineColumnOffset) + source.body;\n  var lineIndex = location.line - 1;\n  var lineOffset = source.locationOffset.line - 1;\n  var lineNum = location.line + lineOffset;\n  var columnOffset = location.line === 1 ? firstLineColumnOffset : 0;\n  var columnNum = location.column + columnOffset;\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\n  return \"\".concat(source.name, \" (\").concat(lineNum, \":\").concat(columnNum, \")\\n\") + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\n  [\"\".concat(lineNum - 1, \": \"), lines[lineIndex - 1]], [\"\".concat(lineNum, \": \"), lines[lineIndex]], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1, \": \"), lines[lineIndex + 1]]]);\n}\n\nfunction printPrefixedLines(lines) {\n  var existingLines = lines.filter(function (_ref) {\n    var _ = _ref[0],\n        line = _ref[1];\n    return line !== undefined;\n  });\n  var padLen = 0;\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = existingLines[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref4 = _step3.value;\n      var prefix = _ref4[0];\n      padLen = Math.max(padLen, prefix.length);\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return existingLines.map(function (_ref3) {\n    var prefix = _ref3[0],\n        line = _ref3[1];\n    return lpad(padLen, prefix) + line;\n  }).join('\\n');\n}\n\nfunction whitespace(len) {\n  return Array(len + 1).join(' ');\n}\n\nfunction lpad(len, str) {\n  return whitespace(len - str.length) + str;\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { printError } from './printError';\nimport { getLocation } from '../language/location';\nexport function GraphQLError( // eslint-disable-line no-redeclare\nmessage, nodes, source, positions, path, originalError, extensions) {\n  // Compute list of blame nodes.\n  var _nodes = Array.isArray(nodes) ? nodes.length !== 0 ? nodes : undefined : nodes ? [nodes] : undefined; // Compute locations in the source for the given nodes/positions.\n\n\n  var _source = source;\n\n  if (!_source && _nodes) {\n    var node = _nodes[0];\n    _source = node && node.loc && node.loc.source;\n  }\n\n  var _positions = positions;\n\n  if (!_positions && _nodes) {\n    _positions = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(node.loc.start);\n      }\n\n      return list;\n    }, []);\n  }\n\n  if (_positions && _positions.length === 0) {\n    _positions = undefined;\n  }\n\n  var _locations;\n\n  if (positions && source) {\n    _locations = positions.map(function (pos) {\n      return getLocation(source, pos);\n    });\n  } else if (_nodes) {\n    _locations = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(getLocation(node.loc.source, node.loc.start));\n      }\n\n      return list;\n    }, []);\n  }\n\n  var _extensions = extensions || originalError && originalError.extensions;\n\n  Object.defineProperties(this, {\n    message: {\n      value: message,\n      // By being enumerable, JSON.stringify will include `message` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: true,\n      writable: true\n    },\n    locations: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _locations || undefined,\n      // By being enumerable, JSON.stringify will include `locations` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_locations)\n    },\n    path: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: path || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(path)\n    },\n    nodes: {\n      value: _nodes || undefined\n    },\n    source: {\n      value: _source || undefined\n    },\n    positions: {\n      value: _positions || undefined\n    },\n    originalError: {\n      value: originalError\n    },\n    extensions: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _extensions || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_extensions)\n    }\n  }); // Include (non-enumerable) stack trace.\n\n  if (originalError && originalError.stack) {\n    Object.defineProperty(this, 'stack', {\n      value: originalError.stack,\n      writable: true,\n      configurable: true\n    });\n  } else if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, GraphQLError);\n  } else {\n    Object.defineProperty(this, 'stack', {\n      value: Error().stack,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nGraphQLError.prototype = Object.create(Error.prototype, {\n  constructor: {\n    value: GraphQLError\n  },\n  name: {\n    value: 'GraphQLError'\n  },\n  toString: {\n    value: function toString() {\n      return printError(this);\n    }\n  }\n});","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * A visitor is provided to visit, it contains the collection of\n * relevant functions to be called during the visitor's traversal.\n */\n\n/**\n * A visitor is comprised of visit functions, which are called on each node\n * during the visitor's traversal.\n */\n\n/**\n * A KeyMap describes each the traversable properties of each kind of node.\n */\nexport var QueryDocumentKeys = {\n  Name: [],\n  Document: ['definitions'],\n  OperationDefinition: ['name', 'variableDefinitions', 'directives', 'selectionSet'],\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\n  Variable: ['name'],\n  SelectionSet: ['selections'],\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\n  Argument: ['name', 'value'],\n  FragmentSpread: ['name', 'directives'],\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\n  FragmentDefinition: ['name', // Note: fragment variable definitions are experimental and may be changed\n  // or removed in the future.\n  'variableDefinitions', 'typeCondition', 'directives', 'selectionSet'],\n  IntValue: [],\n  FloatValue: [],\n  StringValue: [],\n  BooleanValue: [],\n  NullValue: [],\n  EnumValue: [],\n  ListValue: ['values'],\n  ObjectValue: ['fields'],\n  ObjectField: ['name', 'value'],\n  Directive: ['name', 'arguments'],\n  NamedType: ['name'],\n  ListType: ['type'],\n  NonNullType: ['type'],\n  SchemaDefinition: ['directives', 'operationTypes'],\n  OperationTypeDefinition: ['type'],\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\n  ObjectTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\n  InputValueDefinition: ['description', 'name', 'type', 'defaultValue', 'directives'],\n  InterfaceTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\n  EnumValueDefinition: ['description', 'name', 'directives'],\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\n  SchemaExtension: ['directives', 'operationTypes'],\n  ScalarTypeExtension: ['name', 'directives'],\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  InterfaceTypeExtension: ['name', 'directives', 'fields'],\n  UnionTypeExtension: ['name', 'directives', 'types'],\n  EnumTypeExtension: ['name', 'directives', 'values'],\n  InputObjectTypeExtension: ['name', 'directives', 'fields']\n};\nexport var BREAK = {};\n/**\n * visit() will walk through an AST using a depth first traversal, calling\n * the visitor's enter function at each node in the traversal, and calling the\n * leave function after visiting that node and all of its child nodes.\n *\n * By returning different values from the enter and leave functions, the\n * behavior of the visitor can be altered, including skipping over a sub-tree of\n * the AST (by returning false), editing the AST by returning a value or null\n * to remove the value, or to stop the whole traversal by returning BREAK.\n *\n * When using visit() to edit an AST, the original AST will not be modified, and\n * a new version of the AST with the changes applied will be returned from the\n * visit function.\n *\n *     const editedAST = visit(ast, {\n *       enter(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: skip visiting this node\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       },\n *       leave(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: no action\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       }\n *     });\n *\n * Alternatively to providing enter() and leave() functions, a visitor can\n * instead provide functions named the same as the kinds of AST nodes, or\n * enter/leave visitors at a named key, leading to four permutations of\n * visitor API:\n *\n * 1) Named visitors triggered when entering a node a specific kind.\n *\n *     visit(ast, {\n *       Kind(node) {\n *         // enter the \"Kind\" node\n *       }\n *     })\n *\n * 2) Named visitors that trigger upon entering and leaving a node of\n *    a specific kind.\n *\n *     visit(ast, {\n *       Kind: {\n *         enter(node) {\n *           // enter the \"Kind\" node\n *         }\n *         leave(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n *\n * 3) Generic visitors that trigger upon entering and leaving any node.\n *\n *     visit(ast, {\n *       enter(node) {\n *         // enter any node\n *       },\n *       leave(node) {\n *         // leave any node\n *       }\n *     })\n *\n * 4) Parallel visitors for entering and leaving nodes of a specific kind.\n *\n *     visit(ast, {\n *       enter: {\n *         Kind(node) {\n *           // enter the \"Kind\" node\n *         }\n *       },\n *       leave: {\n *         Kind(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n */\n\nexport function visit(root, visitor) {\n  var visitorKeys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : QueryDocumentKeys;\n  /* eslint-disable no-undef-init */\n\n  var stack = undefined;\n  var inArray = Array.isArray(root);\n  var keys = [root];\n  var index = -1;\n  var edits = [];\n  var node = undefined;\n  var key = undefined;\n  var parent = undefined;\n  var path = [];\n  var ancestors = [];\n  var newRoot = root;\n  /* eslint-enable no-undef-init */\n\n  do {\n    index++;\n    var isLeaving = index === keys.length;\n    var isEdited = isLeaving && edits.length !== 0;\n\n    if (isLeaving) {\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\n      node = parent;\n      parent = ancestors.pop();\n\n      if (isEdited) {\n        if (inArray) {\n          node = node.slice();\n        } else {\n          var clone = {};\n\n          for (var k in node) {\n            if (node.hasOwnProperty(k)) {\n              clone[k] = node[k];\n            }\n          }\n\n          node = clone;\n        }\n\n        var editOffset = 0;\n\n        for (var ii = 0; ii < edits.length; ii++) {\n          var editKey = edits[ii][0];\n          var editValue = edits[ii][1];\n\n          if (inArray) {\n            editKey -= editOffset;\n          }\n\n          if (inArray && editValue === null) {\n            node.splice(editKey, 1);\n            editOffset++;\n          } else {\n            node[editKey] = editValue;\n          }\n        }\n      }\n\n      index = stack.index;\n      keys = stack.keys;\n      edits = stack.edits;\n      inArray = stack.inArray;\n      stack = stack.prev;\n    } else {\n      key = parent ? inArray ? index : keys[index] : undefined;\n      node = parent ? parent[key] : newRoot;\n\n      if (node === null || node === undefined) {\n        continue;\n      }\n\n      if (parent) {\n        path.push(key);\n      }\n    }\n\n    var result = void 0;\n\n    if (!Array.isArray(node)) {\n      if (!isNode(node)) {\n        throw new Error('Invalid AST Node: ' + JSON.stringify(node));\n      }\n\n      var visitFn = getVisitFn(visitor, node.kind, isLeaving);\n\n      if (visitFn) {\n        result = visitFn.call(visitor, node, key, parent, path, ancestors);\n\n        if (result === BREAK) {\n          break;\n        }\n\n        if (result === false) {\n          if (!isLeaving) {\n            path.pop();\n            continue;\n          }\n        } else if (result !== undefined) {\n          edits.push([key, result]);\n\n          if (!isLeaving) {\n            if (isNode(result)) {\n              node = result;\n            } else {\n              path.pop();\n              continue;\n            }\n          }\n        }\n      }\n    }\n\n    if (result === undefined && isEdited) {\n      edits.push([key, node]);\n    }\n\n    if (isLeaving) {\n      path.pop();\n    } else {\n      stack = {\n        inArray: inArray,\n        index: index,\n        keys: keys,\n        edits: edits,\n        prev: stack\n      };\n      inArray = Array.isArray(node);\n      keys = inArray ? node : visitorKeys[node.kind] || [];\n      index = -1;\n      edits = [];\n\n      if (parent) {\n        ancestors.push(parent);\n      }\n\n      parent = node;\n    }\n  } while (stack !== undefined);\n\n  if (edits.length !== 0) {\n    newRoot = edits[edits.length - 1][1];\n  }\n\n  return newRoot;\n}\n\nfunction isNode(maybeNode) {\n  return Boolean(maybeNode && typeof maybeNode.kind === 'string');\n}\n/**\n * Creates a new visitor instance which delegates to many visitors to run in\n * parallel. Each visitor will be visited for each node before moving on.\n *\n * If a prior visitor edits a node, no following visitors will see that node.\n */\n\n\nexport function visitInParallel(visitors) {\n  var skipping = new Array(visitors.length);\n  return {\n    enter: function enter(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (!skipping[i]) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          false);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === false) {\n              skipping[i] = node;\n            } else if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined) {\n              return result;\n            }\n          }\n        }\n      }\n    },\n    leave: function leave(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (!skipping[i]) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          true);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined && result !== false) {\n              return result;\n            }\n          }\n        } else if (skipping[i] === node) {\n          skipping[i] = null;\n        }\n      }\n    }\n  };\n}\n/**\n * Creates a new visitor instance which maintains a provided TypeInfo instance\n * along with visiting visitor.\n */\n\nexport function visitWithTypeInfo(typeInfo, visitor) {\n  return {\n    enter: function enter(node) {\n      typeInfo.enter(node);\n      var fn = getVisitFn(visitor, node.kind,\n      /* isLeaving */\n      false);\n\n      if (fn) {\n        var result = fn.apply(visitor, arguments);\n\n        if (result !== undefined) {\n          typeInfo.leave(node);\n\n          if (isNode(result)) {\n            typeInfo.enter(result);\n          }\n        }\n\n        return result;\n      }\n    },\n    leave: function leave(node) {\n      var fn = getVisitFn(visitor, node.kind,\n      /* isLeaving */\n      true);\n      var result;\n\n      if (fn) {\n        result = fn.apply(visitor, arguments);\n      }\n\n      typeInfo.leave(node);\n      return result;\n    }\n  };\n}\n/**\n * Given a visitor instance, if it is leaving or not, and a node kind, return\n * the function the visitor runtime should call.\n */\n\nexport function getVisitFn(visitor, kind, isLeaving) {\n  var kindVisitor = visitor[kind];\n\n  if (kindVisitor) {\n    if (!isLeaving && typeof kindVisitor === 'function') {\n      // { Kind() {} }\n      return kindVisitor;\n    }\n\n    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;\n\n    if (typeof kindSpecificVisitor === 'function') {\n      // { Kind: { enter() {}, leave() {} } }\n      return kindSpecificVisitor;\n    }\n  } else {\n    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;\n\n    if (specificVisitor) {\n      if (typeof specificVisitor === 'function') {\n        // { enter() {}, leave() {} }\n        return specificVisitor;\n      }\n\n      var specificKindVisitor = specificVisitor[kind];\n\n      if (typeof specificKindVisitor === 'function') {\n        // { enter: { Kind() {} }, leave: { Kind() {} } }\n        return specificKindVisitor;\n      }\n    }\n  }\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { visit } from './visitor';\n/**\n * Converts an AST into a string, using one set of reasonable\n * formatting rules.\n */\n\nexport function print(ast) {\n  return visit(ast, {\n    leave: printDocASTReducer\n  });\n}\nvar printDocASTReducer = {\n  Name: function Name(node) {\n    return node.value;\n  },\n  Variable: function Variable(node) {\n    return '$' + node.name;\n  },\n  // Document\n  Document: function Document(node) {\n    return join(node.definitions, '\\n\\n') + '\\n';\n  },\n  OperationDefinition: function OperationDefinition(node) {\n    var op = node.operation;\n    var name = node.name;\n    var varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\n    var directives = join(node.directives, ' ');\n    var selectionSet = node.selectionSet; // Anonymous queries with no directives or variable definitions can use\n    // the query short form.\n\n    return !name && !directives && !varDefs && op === 'query' ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], ' ');\n  },\n  VariableDefinition: function VariableDefinition(_ref) {\n    var variable = _ref.variable,\n        type = _ref.type,\n        defaultValue = _ref.defaultValue,\n        directives = _ref.directives;\n    return variable + ': ' + type + wrap(' = ', defaultValue) + wrap(' ', join(directives, ' '));\n  },\n  SelectionSet: function SelectionSet(_ref2) {\n    var selections = _ref2.selections;\n    return block(selections);\n  },\n  Field: function Field(_ref3) {\n    var alias = _ref3.alias,\n        name = _ref3.name,\n        args = _ref3.arguments,\n        directives = _ref3.directives,\n        selectionSet = _ref3.selectionSet;\n    return join([wrap('', alias, ': ') + name + wrap('(', join(args, ', '), ')'), join(directives, ' '), selectionSet], ' ');\n  },\n  Argument: function Argument(_ref4) {\n    var name = _ref4.name,\n        value = _ref4.value;\n    return name + ': ' + value;\n  },\n  // Fragments\n  FragmentSpread: function FragmentSpread(_ref5) {\n    var name = _ref5.name,\n        directives = _ref5.directives;\n    return '...' + name + wrap(' ', join(directives, ' '));\n  },\n  InlineFragment: function InlineFragment(_ref6) {\n    var typeCondition = _ref6.typeCondition,\n        directives = _ref6.directives,\n        selectionSet = _ref6.selectionSet;\n    return join(['...', wrap('on ', typeCondition), join(directives, ' '), selectionSet], ' ');\n  },\n  FragmentDefinition: function FragmentDefinition(_ref7) {\n    var name = _ref7.name,\n        typeCondition = _ref7.typeCondition,\n        variableDefinitions = _ref7.variableDefinitions,\n        directives = _ref7.directives,\n        selectionSet = _ref7.selectionSet;\n    return (// Note: fragment variable definitions are experimental and may be changed\n      // or removed in the future.\n      \"fragment \".concat(name).concat(wrap('(', join(variableDefinitions, ', '), ')'), \" \") + \"on \".concat(typeCondition, \" \").concat(wrap('', join(directives, ' '), ' ')) + selectionSet\n    );\n  },\n  // Value\n  IntValue: function IntValue(_ref8) {\n    var value = _ref8.value;\n    return value;\n  },\n  FloatValue: function FloatValue(_ref9) {\n    var value = _ref9.value;\n    return value;\n  },\n  StringValue: function StringValue(_ref10, key) {\n    var value = _ref10.value,\n        isBlockString = _ref10.block;\n    return isBlockString ? printBlockString(value, key === 'description') : JSON.stringify(value);\n  },\n  BooleanValue: function BooleanValue(_ref11) {\n    var value = _ref11.value;\n    return value ? 'true' : 'false';\n  },\n  NullValue: function NullValue() {\n    return 'null';\n  },\n  EnumValue: function EnumValue(_ref12) {\n    var value = _ref12.value;\n    return value;\n  },\n  ListValue: function ListValue(_ref13) {\n    var values = _ref13.values;\n    return '[' + join(values, ', ') + ']';\n  },\n  ObjectValue: function ObjectValue(_ref14) {\n    var fields = _ref14.fields;\n    return '{' + join(fields, ', ') + '}';\n  },\n  ObjectField: function ObjectField(_ref15) {\n    var name = _ref15.name,\n        value = _ref15.value;\n    return name + ': ' + value;\n  },\n  // Directive\n  Directive: function Directive(_ref16) {\n    var name = _ref16.name,\n        args = _ref16.arguments;\n    return '@' + name + wrap('(', join(args, ', '), ')');\n  },\n  // Type\n  NamedType: function NamedType(_ref17) {\n    var name = _ref17.name;\n    return name;\n  },\n  ListType: function ListType(_ref18) {\n    var type = _ref18.type;\n    return '[' + type + ']';\n  },\n  NonNullType: function NonNullType(_ref19) {\n    var type = _ref19.type;\n    return type + '!';\n  },\n  // Type System Definitions\n  SchemaDefinition: function SchemaDefinition(_ref20) {\n    var directives = _ref20.directives,\n        operationTypes = _ref20.operationTypes;\n    return join(['schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {\n    var operation = _ref21.operation,\n        type = _ref21.type;\n    return operation + ': ' + type;\n  },\n  ScalarTypeDefinition: addDescription(function (_ref22) {\n    var name = _ref22.name,\n        directives = _ref22.directives;\n    return join(['scalar', name, join(directives, ' ')], ' ');\n  }),\n  ObjectTypeDefinition: addDescription(function (_ref23) {\n    var name = _ref23.name,\n        interfaces = _ref23.interfaces,\n        directives = _ref23.directives,\n        fields = _ref23.fields;\n    return join(['type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  FieldDefinition: addDescription(function (_ref24) {\n    var name = _ref24.name,\n        args = _ref24.arguments,\n        type = _ref24.type,\n        directives = _ref24.directives;\n    return name + (args.every(function (arg) {\n      return arg.indexOf('\\n') === -1;\n    }) ? wrap('(', join(args, ', '), ')') : wrap('(\\n', indent(join(args, '\\n')), '\\n)')) + ': ' + type + wrap(' ', join(directives, ' '));\n  }),\n  InputValueDefinition: addDescription(function (_ref25) {\n    var name = _ref25.name,\n        type = _ref25.type,\n        defaultValue = _ref25.defaultValue,\n        directives = _ref25.directives;\n    return join([name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')], ' ');\n  }),\n  InterfaceTypeDefinition: addDescription(function (_ref26) {\n    var name = _ref26.name,\n        directives = _ref26.directives,\n        fields = _ref26.fields;\n    return join(['interface', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  UnionTypeDefinition: addDescription(function (_ref27) {\n    var name = _ref27.name,\n        directives = _ref27.directives,\n        types = _ref27.types;\n    return join(['union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  }),\n  EnumTypeDefinition: addDescription(function (_ref28) {\n    var name = _ref28.name,\n        directives = _ref28.directives,\n        values = _ref28.values;\n    return join(['enum', name, join(directives, ' '), block(values)], ' ');\n  }),\n  EnumValueDefinition: addDescription(function (_ref29) {\n    var name = _ref29.name,\n        directives = _ref29.directives;\n    return join([name, join(directives, ' ')], ' ');\n  }),\n  InputObjectTypeDefinition: addDescription(function (_ref30) {\n    var name = _ref30.name,\n        directives = _ref30.directives,\n        fields = _ref30.fields;\n    return join(['input', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  DirectiveDefinition: addDescription(function (_ref31) {\n    var name = _ref31.name,\n        args = _ref31.arguments,\n        locations = _ref31.locations;\n    return 'directive @' + name + (args.every(function (arg) {\n      return arg.indexOf('\\n') === -1;\n    }) ? wrap('(', join(args, ', '), ')') : wrap('(\\n', indent(join(args, '\\n')), '\\n)')) + ' on ' + join(locations, ' | ');\n  }),\n  SchemaExtension: function SchemaExtension(_ref32) {\n    var directives = _ref32.directives,\n        operationTypes = _ref32.operationTypes;\n    return join(['extend schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {\n    var name = _ref33.name,\n        directives = _ref33.directives;\n    return join(['extend scalar', name, join(directives, ' ')], ' ');\n  },\n  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {\n    var name = _ref34.name,\n        interfaces = _ref34.interfaces,\n        directives = _ref34.directives,\n        fields = _ref34.fields;\n    return join(['extend type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {\n    var name = _ref35.name,\n        directives = _ref35.directives,\n        fields = _ref35.fields;\n    return join(['extend interface', name, join(directives, ' '), block(fields)], ' ');\n  },\n  UnionTypeExtension: function UnionTypeExtension(_ref36) {\n    var name = _ref36.name,\n        directives = _ref36.directives,\n        types = _ref36.types;\n    return join(['extend union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  },\n  EnumTypeExtension: function EnumTypeExtension(_ref37) {\n    var name = _ref37.name,\n        directives = _ref37.directives,\n        values = _ref37.values;\n    return join(['extend enum', name, join(directives, ' '), block(values)], ' ');\n  },\n  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {\n    var name = _ref38.name,\n        directives = _ref38.directives,\n        fields = _ref38.fields;\n    return join(['extend input', name, join(directives, ' '), block(fields)], ' ');\n  }\n};\n\nfunction addDescription(cb) {\n  return function (node) {\n    return join([node.description, cb(node)], '\\n');\n  };\n}\n/**\n * Given maybeArray, print an empty string if it is null or empty, otherwise\n * print all items together separated by separator if provided\n */\n\n\nfunction join(maybeArray, separator) {\n  return maybeArray ? maybeArray.filter(function (x) {\n    return x;\n  }).join(separator || '') : '';\n}\n/**\n * Given array, print each item on its own line, wrapped in an\n * indented \"{ }\" block.\n */\n\n\nfunction block(array) {\n  return array && array.length !== 0 ? '{\\n' + indent(join(array, '\\n')) + '\\n}' : '';\n}\n/**\n * If maybeString is not null or empty, then wrap with start and end, otherwise\n * print an empty string.\n */\n\n\nfunction wrap(start, maybeString, end) {\n  return maybeString ? start + maybeString + (end || '') : '';\n}\n\nfunction indent(maybeString) {\n  return maybeString && '  ' + maybeString.replace(/\\n/g, '\\n  ');\n}\n/**\n * Print a block string in the indented block form by adding a leading and\n * trailing blank line. However, if a block string starts with whitespace and is\n * a single-line, adding a leading blank line would strip that whitespace.\n */\n\n\nfunction printBlockString(value, isDescription) {\n  var escaped = value.replace(/\"\"\"/g, '\\\\\"\"\"');\n  return (value[0] === ' ' || value[0] === '\\t') && value.indexOf('\\n') === -1 ? \"\\\"\\\"\\\"\".concat(escaped.replace(/\"$/, '\"\\n'), \"\\\"\\\"\\\"\") : \"\\\"\\\"\\\"\\n\".concat(isDescription ? escaped : indent(escaped), \"\\n\\\"\\\"\\\"\");\n}","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Used to print values in error messages.\n */\n\n\nexport default function inspect(value) {\n  return value && _typeof(value) === 'object' ? typeof value.inspect === 'function' ? value.inspect() : Array.isArray(value) ? '[' + value.map(inspect).join(', ') + ']' : '{' + Object.keys(value).map(function (k) {\n    return \"\".concat(k, \": \").concat(inspect(value[k]));\n  }).join(', ') + '}' : typeof value === 'string' ? '\"' + value + '\"' : typeof value === 'function' ? \"[function \".concat(value.name, \"]\") : String(value);\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nexport default function invariant(condition, message) {\n  /* istanbul ignore else */\n  if (!condition) {\n    throw new Error(message);\n  }\n}","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n\nimport invariant from '../jsutils/invariant';\nimport defineToStringTag from '../jsutils/defineToStringTag';\n/**\n * A representation of source input to GraphQL.\n * `name` and `locationOffset` are optional. They are useful for clients who\n * store GraphQL documents in source files; for example, if the GraphQL input\n * starts at line 40 in a file named Foo.graphql, it might be useful for name to\n * be \"Foo.graphql\" and location to be `{ line: 40, column: 0 }`.\n * line and column in locationOffset are 1-indexed\n */\n\nexport var Source = function Source(body, name, locationOffset) {\n  _defineProperty(this, \"body\", void 0);\n\n  _defineProperty(this, \"name\", void 0);\n\n  _defineProperty(this, \"locationOffset\", void 0);\n\n  this.body = body;\n  this.name = name || 'GraphQL request';\n  this.locationOffset = locationOffset || {\n    line: 1,\n    column: 1\n  };\n  !(this.locationOffset.line > 0) ? invariant(0, 'line in locationOffset is 1-indexed and must be positive') : void 0;\n  !(this.locationOffset.column > 0) ? invariant(0, 'column in locationOffset is 1-indexed and must be positive') : void 0;\n}; // Conditionally apply `[Symbol.toStringTag]` if `Symbol`s are supported\n\ndefineToStringTag(Source);","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The `applyToStringTag()` function checks first to see if the runtime\n * supports the `Symbol` class and then if the `Symbol.toStringTag` constant\n * is defined as a `Symbol` instance. If both conditions are met, the\n * Symbol.toStringTag property is defined as a getter that returns the\n * supplied class constructor's name.\n *\n * @method applyToStringTag\n *\n * @param {Class<any>} classObject a class such as Object, String, Number but\n * typically one of your own creation through the class keyword; `class A {}`,\n * for example.\n */\nexport default function applyToStringTag(classObject) {\n  if (typeof Symbol === 'function' && Symbol.toStringTag) {\n    Object.defineProperty(classObject.prototype, Symbol.toStringTag, {\n      get: function get() {\n        return this.constructor.name;\n      }\n    });\n  }\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { GraphQLError } from './GraphQLError';\n/**\n * Produces a GraphQLError representing a syntax error, containing useful\n * descriptive information about the syntax error's position in the source.\n */\n\nexport function syntaxError(source, position, description) {\n  return new GraphQLError(\"Syntax Error: \".concat(description), undefined, source, [position]);\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Produces the value of a block string from its parsed raw value, similar to\n * Coffeescript's block string, Python's docstring trim or Ruby's strip_heredoc.\n *\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\n */\nexport default function blockStringValue(rawString) {\n  // Expand a block string's raw value into independent lines.\n  var lines = rawString.split(/\\r\\n|[\\n\\r]/g); // Remove common indentation from all lines but first.\n\n  var commonIndent = null;\n\n  for (var i = 1; i < lines.length; i++) {\n    var line = lines[i];\n    var indent = leadingWhitespace(line);\n\n    if (indent < line.length && (commonIndent === null || indent < commonIndent)) {\n      commonIndent = indent;\n\n      if (commonIndent === 0) {\n        break;\n      }\n    }\n  }\n\n  if (commonIndent) {\n    for (var _i = 1; _i < lines.length; _i++) {\n      lines[_i] = lines[_i].slice(commonIndent);\n    }\n  } // Remove leading and trailing blank lines.\n\n\n  while (lines.length > 0 && isBlank(lines[0])) {\n    lines.shift();\n  }\n\n  while (lines.length > 0 && isBlank(lines[lines.length - 1])) {\n    lines.pop();\n  } // Return a string of the lines joined with U+000A.\n\n\n  return lines.join('\\n');\n}\n\nfunction leadingWhitespace(str) {\n  var i = 0;\n\n  while (i < str.length && (str[i] === ' ' || str[i] === '\\t')) {\n    i++;\n  }\n\n  return i;\n}\n\nfunction isBlank(str) {\n  return leadingWhitespace(str) === str.length;\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { syntaxError } from '../error';\nimport blockStringValue from './blockStringValue';\n/**\n * Given a Source object, this returns a Lexer for that source.\n * A Lexer is a stateful stream generator in that every time\n * it is advanced, it returns the next token in the Source. Assuming the\n * source lexes, the final Token emitted by the lexer will be of kind\n * EOF, after which the lexer will repeatedly return the same EOF token\n * whenever called.\n */\n\nexport function createLexer(source, options) {\n  var startOfFileToken = new Tok(TokenKind.SOF, 0, 0, 0, 0, null);\n  var lexer = {\n    source: source,\n    options: options,\n    lastToken: startOfFileToken,\n    token: startOfFileToken,\n    line: 1,\n    lineStart: 0,\n    advance: advanceLexer,\n    lookahead: lookahead\n  };\n  return lexer;\n}\n\nfunction advanceLexer() {\n  this.lastToken = this.token;\n  var token = this.token = this.lookahead();\n  return token;\n}\n\nfunction lookahead() {\n  var token = this.token;\n\n  if (token.kind !== TokenKind.EOF) {\n    do {\n      // Note: next is only mutable during parsing, so we cast to allow this.\n      token = token.next || (token.next = readToken(this, token));\n    } while (token.kind === TokenKind.COMMENT);\n  }\n\n  return token;\n}\n/**\n * The return type of createLexer.\n */\n\n/**\n * An exported enum describing the different kinds of tokens that the\n * lexer emits.\n */\n\n\nexport var TokenKind = Object.freeze({\n  SOF: '<SOF>',\n  EOF: '<EOF>',\n  BANG: '!',\n  DOLLAR: '$',\n  AMP: '&',\n  PAREN_L: '(',\n  PAREN_R: ')',\n  SPREAD: '...',\n  COLON: ':',\n  EQUALS: '=',\n  AT: '@',\n  BRACKET_L: '[',\n  BRACKET_R: ']',\n  BRACE_L: '{',\n  PIPE: '|',\n  BRACE_R: '}',\n  NAME: 'Name',\n  INT: 'Int',\n  FLOAT: 'Float',\n  STRING: 'String',\n  BLOCK_STRING: 'BlockString',\n  COMMENT: 'Comment'\n});\n/**\n * The enum type representing the token kinds values.\n */\n\n/**\n * A helper function to describe a token as a string for debugging\n */\n\nexport function getTokenDesc(token) {\n  var value = token.value;\n  return value ? \"\".concat(token.kind, \" \\\"\").concat(value, \"\\\"\") : token.kind;\n}\nvar charCodeAt = String.prototype.charCodeAt;\nvar slice = String.prototype.slice;\n/**\n * Helper function for constructing the Token object.\n */\n\nfunction Tok(kind, start, end, line, column, prev, value) {\n  this.kind = kind;\n  this.start = start;\n  this.end = end;\n  this.line = line;\n  this.column = column;\n  this.value = value;\n  this.prev = prev;\n  this.next = null;\n} // Print a simplified form when appearing in JSON/util.inspect.\n\n\nTok.prototype.toJSON = Tok.prototype.inspect = function toJSON() {\n  return {\n    kind: this.kind,\n    value: this.value,\n    line: this.line,\n    column: this.column\n  };\n};\n\nfunction printCharCode(code) {\n  return (// NaN/undefined represents access beyond the end of the file.\n    isNaN(code) ? TokenKind.EOF : // Trust JSON for ASCII.\n    code < 0x007f ? JSON.stringify(String.fromCharCode(code)) : // Otherwise print the escaped form.\n    \"\\\"\\\\u\".concat(('00' + code.toString(16).toUpperCase()).slice(-4), \"\\\"\")\n  );\n}\n/**\n * Gets the next token from the source starting at the given position.\n *\n * This skips over whitespace and comments until it finds the next lexable\n * token, then lexes punctuators immediately or calls the appropriate helper\n * function for more complicated tokens.\n */\n\n\nfunction readToken(lexer, prev) {\n  var source = lexer.source;\n  var body = source.body;\n  var bodyLength = body.length;\n  var pos = positionAfterWhitespace(body, prev.end, lexer);\n  var line = lexer.line;\n  var col = 1 + pos - lexer.lineStart;\n\n  if (pos >= bodyLength) {\n    return new Tok(TokenKind.EOF, bodyLength, bodyLength, line, col, prev);\n  }\n\n  var code = charCodeAt.call(body, pos); // SourceCharacter\n\n  switch (code) {\n    // !\n    case 33:\n      return new Tok(TokenKind.BANG, pos, pos + 1, line, col, prev);\n    // #\n\n    case 35:\n      return readComment(source, pos, line, col, prev);\n    // $\n\n    case 36:\n      return new Tok(TokenKind.DOLLAR, pos, pos + 1, line, col, prev);\n    // &\n\n    case 38:\n      return new Tok(TokenKind.AMP, pos, pos + 1, line, col, prev);\n    // (\n\n    case 40:\n      return new Tok(TokenKind.PAREN_L, pos, pos + 1, line, col, prev);\n    // )\n\n    case 41:\n      return new Tok(TokenKind.PAREN_R, pos, pos + 1, line, col, prev);\n    // .\n\n    case 46:\n      if (charCodeAt.call(body, pos + 1) === 46 && charCodeAt.call(body, pos + 2) === 46) {\n        return new Tok(TokenKind.SPREAD, pos, pos + 3, line, col, prev);\n      }\n\n      break;\n    // :\n\n    case 58:\n      return new Tok(TokenKind.COLON, pos, pos + 1, line, col, prev);\n    // =\n\n    case 61:\n      return new Tok(TokenKind.EQUALS, pos, pos + 1, line, col, prev);\n    // @\n\n    case 64:\n      return new Tok(TokenKind.AT, pos, pos + 1, line, col, prev);\n    // [\n\n    case 91:\n      return new Tok(TokenKind.BRACKET_L, pos, pos + 1, line, col, prev);\n    // ]\n\n    case 93:\n      return new Tok(TokenKind.BRACKET_R, pos, pos + 1, line, col, prev);\n    // {\n\n    case 123:\n      return new Tok(TokenKind.BRACE_L, pos, pos + 1, line, col, prev);\n    // |\n\n    case 124:\n      return new Tok(TokenKind.PIPE, pos, pos + 1, line, col, prev);\n    // }\n\n    case 125:\n      return new Tok(TokenKind.BRACE_R, pos, pos + 1, line, col, prev);\n    // A-Z _ a-z\n\n    case 65:\n    case 66:\n    case 67:\n    case 68:\n    case 69:\n    case 70:\n    case 71:\n    case 72:\n    case 73:\n    case 74:\n    case 75:\n    case 76:\n    case 77:\n    case 78:\n    case 79:\n    case 80:\n    case 81:\n    case 82:\n    case 83:\n    case 84:\n    case 85:\n    case 86:\n    case 87:\n    case 88:\n    case 89:\n    case 90:\n    case 95:\n    case 97:\n    case 98:\n    case 99:\n    case 100:\n    case 101:\n    case 102:\n    case 103:\n    case 104:\n    case 105:\n    case 106:\n    case 107:\n    case 108:\n    case 109:\n    case 110:\n    case 111:\n    case 112:\n    case 113:\n    case 114:\n    case 115:\n    case 116:\n    case 117:\n    case 118:\n    case 119:\n    case 120:\n    case 121:\n    case 122:\n      return readName(source, pos, line, col, prev);\n    // - 0-9\n\n    case 45:\n    case 48:\n    case 49:\n    case 50:\n    case 51:\n    case 52:\n    case 53:\n    case 54:\n    case 55:\n    case 56:\n    case 57:\n      return readNumber(source, pos, code, line, col, prev);\n    // \"\n\n    case 34:\n      if (charCodeAt.call(body, pos + 1) === 34 && charCodeAt.call(body, pos + 2) === 34) {\n        return readBlockString(source, pos, line, col, prev);\n      }\n\n      return readString(source, pos, line, col, prev);\n  }\n\n  throw syntaxError(source, pos, unexpectedCharacterMessage(code));\n}\n/**\n * Report a message that an unexpected character was encountered.\n */\n\n\nfunction unexpectedCharacterMessage(code) {\n  if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n    return \"Cannot contain the invalid character \".concat(printCharCode(code), \".\");\n  }\n\n  if (code === 39) {\n    // '\n    return \"Unexpected single quote character ('), did you mean to use \" + 'a double quote (\")?';\n  }\n\n  return \"Cannot parse the unexpected character \".concat(printCharCode(code), \".\");\n}\n/**\n * Reads from body starting at startPosition until it finds a non-whitespace\n * or commented character, then returns the position of that character for\n * lexing.\n */\n\n\nfunction positionAfterWhitespace(body, startPosition, lexer) {\n  var bodyLength = body.length;\n  var position = startPosition;\n\n  while (position < bodyLength) {\n    var code = charCodeAt.call(body, position); // tab | space | comma | BOM\n\n    if (code === 9 || code === 32 || code === 44 || code === 0xfeff) {\n      ++position;\n    } else if (code === 10) {\n      // new line\n      ++position;\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if (code === 13) {\n      // carriage return\n      if (charCodeAt.call(body, position + 1) === 10) {\n        position += 2;\n      } else {\n        ++position;\n      }\n\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else {\n      break;\n    }\n  }\n\n  return position;\n}\n/**\n * Reads a comment token from the source file.\n *\n * #[\\u0009\\u0020-\\uFFFF]*\n */\n\n\nfunction readComment(source, start, line, col, prev) {\n  var body = source.body;\n  var code;\n  var position = start;\n\n  do {\n    code = charCodeAt.call(body, ++position);\n  } while (code !== null && ( // SourceCharacter but not LineTerminator\n  code > 0x001f || code === 0x0009));\n\n  return new Tok(TokenKind.COMMENT, start, position, line, col, prev, slice.call(body, start + 1, position));\n}\n/**\n * Reads a number token from the source file, either a float\n * or an int depending on whether a decimal point appears.\n *\n * Int:   -?(0|[1-9][0-9]*)\n * Float: -?(0|[1-9][0-9]*)(\\.[0-9]+)?((E|e)(+|-)?[0-9]+)?\n */\n\n\nfunction readNumber(source, start, firstCode, line, col, prev) {\n  var body = source.body;\n  var code = firstCode;\n  var position = start;\n  var isFloat = false;\n\n  if (code === 45) {\n    // -\n    code = charCodeAt.call(body, ++position);\n  }\n\n  if (code === 48) {\n    // 0\n    code = charCodeAt.call(body, ++position);\n\n    if (code >= 48 && code <= 57) {\n      throw syntaxError(source, position, \"Invalid number, unexpected digit after 0: \".concat(printCharCode(code), \".\"));\n    }\n  } else {\n    position = readDigits(source, position, code);\n    code = charCodeAt.call(body, position);\n  }\n\n  if (code === 46) {\n    // .\n    isFloat = true;\n    code = charCodeAt.call(body, ++position);\n    position = readDigits(source, position, code);\n    code = charCodeAt.call(body, position);\n  }\n\n  if (code === 69 || code === 101) {\n    // E e\n    isFloat = true;\n    code = charCodeAt.call(body, ++position);\n\n    if (code === 43 || code === 45) {\n      // + -\n      code = charCodeAt.call(body, ++position);\n    }\n\n    position = readDigits(source, position, code);\n  }\n\n  return new Tok(isFloat ? TokenKind.FLOAT : TokenKind.INT, start, position, line, col, prev, slice.call(body, start, position));\n}\n/**\n * Returns the new position in the source after reading digits.\n */\n\n\nfunction readDigits(source, start, firstCode) {\n  var body = source.body;\n  var position = start;\n  var code = firstCode;\n\n  if (code >= 48 && code <= 57) {\n    // 0 - 9\n    do {\n      code = charCodeAt.call(body, ++position);\n    } while (code >= 48 && code <= 57); // 0 - 9\n\n\n    return position;\n  }\n\n  throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n}\n/**\n * Reads a string token from the source file.\n *\n * \"([^\"\\\\\\u000A\\u000D]|(\\\\(u[0-9a-fA-F]{4}|[\"\\\\/bfnrt])))*\"\n */\n\n\nfunction readString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 1;\n  var chunkStart = position;\n  var code = 0;\n  var value = '';\n\n  while (position < body.length && (code = charCodeAt.call(body, position)) !== null && // not LineTerminator\n  code !== 0x000a && code !== 0x000d) {\n    // Closing Quote (\")\n    if (code === 34) {\n      value += slice.call(body, chunkStart, position);\n      return new Tok(TokenKind.STRING, start, position + 1, line, col, prev, value);\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    ++position;\n\n    if (code === 92) {\n      // \\\n      value += slice.call(body, chunkStart, position - 1);\n      code = charCodeAt.call(body, position);\n\n      switch (code) {\n        case 34:\n          value += '\"';\n          break;\n\n        case 47:\n          value += '/';\n          break;\n\n        case 92:\n          value += '\\\\';\n          break;\n\n        case 98:\n          value += '\\b';\n          break;\n\n        case 102:\n          value += '\\f';\n          break;\n\n        case 110:\n          value += '\\n';\n          break;\n\n        case 114:\n          value += '\\r';\n          break;\n\n        case 116:\n          value += '\\t';\n          break;\n\n        case 117:\n          // u\n          var charCode = uniCharCode(charCodeAt.call(body, position + 1), charCodeAt.call(body, position + 2), charCodeAt.call(body, position + 3), charCodeAt.call(body, position + 4));\n\n          if (charCode < 0) {\n            throw syntaxError(source, position, 'Invalid character escape sequence: ' + \"\\\\u\".concat(body.slice(position + 1, position + 5), \".\"));\n          }\n\n          value += String.fromCharCode(charCode);\n          position += 4;\n          break;\n\n        default:\n          throw syntaxError(source, position, \"Invalid character escape sequence: \\\\\".concat(String.fromCharCode(code), \".\"));\n      }\n\n      ++position;\n      chunkStart = position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Reads a block string token from the source file.\n *\n * \"\"\"(\"?\"?(\\\\\"\"\"|\\\\(?!=\"\"\")|[^\"\\\\]))*\"\"\"\n */\n\n\nfunction readBlockString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 3;\n  var chunkStart = position;\n  var code = 0;\n  var rawValue = '';\n\n  while (position < body.length && (code = charCodeAt.call(body, position)) !== null) {\n    // Closing Triple-Quote (\"\"\")\n    if (code === 34 && charCodeAt.call(body, position + 1) === 34 && charCodeAt.call(body, position + 2) === 34) {\n      rawValue += slice.call(body, chunkStart, position);\n      return new Tok(TokenKind.BLOCK_STRING, start, position + 3, line, col, prev, blockStringValue(rawValue));\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    } // Escape Triple-Quote (\\\"\"\")\n\n\n    if (code === 92 && charCodeAt.call(body, position + 1) === 34 && charCodeAt.call(body, position + 2) === 34 && charCodeAt.call(body, position + 3) === 34) {\n      rawValue += slice.call(body, chunkStart, position) + '\"\"\"';\n      position += 4;\n      chunkStart = position;\n    } else {\n      ++position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Converts four hexidecimal chars to the integer that the\n * string represents. For example, uniCharCode('0','0','0','f')\n * will return 15, and uniCharCode('0','0','f','f') returns 255.\n *\n * Returns a negative number on error, if a char was invalid.\n *\n * This is implemented by noting that char2hex() returns -1 on error,\n * which means the result of ORing the char2hex() will also be negative.\n */\n\n\nfunction uniCharCode(a, b, c, d) {\n  return char2hex(a) << 12 | char2hex(b) << 8 | char2hex(c) << 4 | char2hex(d);\n}\n/**\n * Converts a hex character to its integer value.\n * '0' becomes 0, '9' becomes 9\n * 'A' becomes 10, 'F' becomes 15\n * 'a' becomes 10, 'f' becomes 15\n *\n * Returns -1 on error.\n */\n\n\nfunction char2hex(a) {\n  return a >= 48 && a <= 57 ? a - 48 // 0-9\n  : a >= 65 && a <= 70 ? a - 55 // A-F\n  : a >= 97 && a <= 102 ? a - 87 // a-f\n  : -1;\n}\n/**\n * Reads an alphanumeric + underscore name from the source.\n *\n * [_A-Za-z][_0-9A-Za-z]*\n */\n\n\nfunction readName(source, start, line, col, prev) {\n  var body = source.body;\n  var bodyLength = body.length;\n  var position = start + 1;\n  var code = 0;\n\n  while (position !== bodyLength && (code = charCodeAt.call(body, position)) !== null && (code === 95 || // _\n  code >= 48 && code <= 57 || // 0-9\n  code >= 65 && code <= 90 || // A-Z\n  code >= 97 && code <= 122) // a-z\n  ) {\n    ++position;\n  }\n\n  return new Tok(TokenKind.NAME, start, position, line, col, prev, slice.call(body, start, position));\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The set of allowed kind values for AST nodes.\n */\nexport var Kind = Object.freeze({\n  // Name\n  NAME: 'Name',\n  // Document\n  DOCUMENT: 'Document',\n  OPERATION_DEFINITION: 'OperationDefinition',\n  VARIABLE_DEFINITION: 'VariableDefinition',\n  SELECTION_SET: 'SelectionSet',\n  FIELD: 'Field',\n  ARGUMENT: 'Argument',\n  // Fragments\n  FRAGMENT_SPREAD: 'FragmentSpread',\n  INLINE_FRAGMENT: 'InlineFragment',\n  FRAGMENT_DEFINITION: 'FragmentDefinition',\n  // Values\n  VARIABLE: 'Variable',\n  INT: 'IntValue',\n  FLOAT: 'FloatValue',\n  STRING: 'StringValue',\n  BOOLEAN: 'BooleanValue',\n  NULL: 'NullValue',\n  ENUM: 'EnumValue',\n  LIST: 'ListValue',\n  OBJECT: 'ObjectValue',\n  OBJECT_FIELD: 'ObjectField',\n  // Directives\n  DIRECTIVE: 'Directive',\n  // Types\n  NAMED_TYPE: 'NamedType',\n  LIST_TYPE: 'ListType',\n  NON_NULL_TYPE: 'NonNullType',\n  // Type System Definitions\n  SCHEMA_DEFINITION: 'SchemaDefinition',\n  OPERATION_TYPE_DEFINITION: 'OperationTypeDefinition',\n  // Type Definitions\n  SCALAR_TYPE_DEFINITION: 'ScalarTypeDefinition',\n  OBJECT_TYPE_DEFINITION: 'ObjectTypeDefinition',\n  FIELD_DEFINITION: 'FieldDefinition',\n  INPUT_VALUE_DEFINITION: 'InputValueDefinition',\n  INTERFACE_TYPE_DEFINITION: 'InterfaceTypeDefinition',\n  UNION_TYPE_DEFINITION: 'UnionTypeDefinition',\n  ENUM_TYPE_DEFINITION: 'EnumTypeDefinition',\n  ENUM_VALUE_DEFINITION: 'EnumValueDefinition',\n  INPUT_OBJECT_TYPE_DEFINITION: 'InputObjectTypeDefinition',\n  // Directive Definitions\n  DIRECTIVE_DEFINITION: 'DirectiveDefinition',\n  // Type System Extensions\n  SCHEMA_EXTENSION: 'SchemaExtension',\n  // Type Extensions\n  SCALAR_TYPE_EXTENSION: 'ScalarTypeExtension',\n  OBJECT_TYPE_EXTENSION: 'ObjectTypeExtension',\n  INTERFACE_TYPE_EXTENSION: 'InterfaceTypeExtension',\n  UNION_TYPE_EXTENSION: 'UnionTypeExtension',\n  ENUM_TYPE_EXTENSION: 'EnumTypeExtension',\n  INPUT_OBJECT_TYPE_EXTENSION: 'InputObjectTypeExtension'\n});\n/**\n * The enum type representing the possible kind values of AST nodes.\n */","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The set of allowed directive location values.\n */\nexport var DirectiveLocation = Object.freeze({\n  // Request Definitions\n  QUERY: 'QUERY',\n  MUTATION: 'MUTATION',\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  FIELD: 'FIELD',\n  FRAGMENT_DEFINITION: 'FRAGMENT_DEFINITION',\n  FRAGMENT_SPREAD: 'FRAGMENT_SPREAD',\n  INLINE_FRAGMENT: 'INLINE_FRAGMENT',\n  VARIABLE_DEFINITION: 'VARIABLE_DEFINITION',\n  // Type System Definitions\n  SCHEMA: 'SCHEMA',\n  SCALAR: 'SCALAR',\n  OBJECT: 'OBJECT',\n  FIELD_DEFINITION: 'FIELD_DEFINITION',\n  ARGUMENT_DEFINITION: 'ARGUMENT_DEFINITION',\n  INTERFACE: 'INTERFACE',\n  UNION: 'UNION',\n  ENUM: 'ENUM',\n  ENUM_VALUE: 'ENUM_VALUE',\n  INPUT_OBJECT: 'INPUT_OBJECT',\n  INPUT_FIELD_DEFINITION: 'INPUT_FIELD_DEFINITION'\n});\n/**\n * The enum type representing the directive location values.\n */","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport inspect from '../jsutils/inspect';\nimport { Source } from './source';\nimport { syntaxError } from '../error';\nimport { createLexer, TokenKind, getTokenDesc } from './lexer';\nimport { Kind } from './kinds';\nimport { DirectiveLocation } from './directiveLocation';\n/**\n * Configuration options to control parser behavior\n */\n\n/**\n * Given a GraphQL source, parses it into a Document.\n * Throws GraphQLError if a syntax error is encountered.\n */\n\nexport function parse(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n\n  if (!(sourceObj instanceof Source)) {\n    throw new TypeError(\"Must provide Source. Received: \".concat(inspect(sourceObj)));\n  }\n\n  var lexer = createLexer(sourceObj, options || {});\n  return parseDocument(lexer);\n}\n/**\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\n * that value.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Values directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: valueFromAST().\n */\n\nexport function parseValue(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n  var lexer = createLexer(sourceObj, options || {});\n  expect(lexer, TokenKind.SOF);\n  var value = parseValueLiteral(lexer, false);\n  expect(lexer, TokenKind.EOF);\n  return value;\n}\n/**\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\n * that type.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Types directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: typeFromAST().\n */\n\nexport function parseType(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n  var lexer = createLexer(sourceObj, options || {});\n  expect(lexer, TokenKind.SOF);\n  var type = parseTypeReference(lexer);\n  expect(lexer, TokenKind.EOF);\n  return type;\n}\n/**\n * Converts a name lex token into a name parse node.\n */\n\nfunction parseName(lexer) {\n  var token = expect(lexer, TokenKind.NAME);\n  return {\n    kind: Kind.NAME,\n    value: token.value,\n    loc: loc(lexer, token)\n  };\n} // Implements the parsing rules in the Document section.\n\n/**\n * Document : Definition+\n */\n\n\nfunction parseDocument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.DOCUMENT,\n    definitions: many(lexer, TokenKind.SOF, parseDefinition, TokenKind.EOF),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Definition :\n *   - ExecutableDefinition\n *   - TypeSystemDefinition\n *   - TypeSystemExtension\n */\n\n\nfunction parseDefinition(lexer) {\n  if (peek(lexer, TokenKind.NAME)) {\n    switch (lexer.token.value) {\n      case 'query':\n      case 'mutation':\n      case 'subscription':\n      case 'fragment':\n        return parseExecutableDefinition(lexer);\n\n      case 'schema':\n      case 'scalar':\n      case 'type':\n      case 'interface':\n      case 'union':\n      case 'enum':\n      case 'input':\n      case 'directive':\n        return parseTypeSystemDefinition(lexer);\n\n      case 'extend':\n        return parseTypeSystemExtension(lexer);\n    }\n  } else if (peek(lexer, TokenKind.BRACE_L)) {\n    return parseExecutableDefinition(lexer);\n  } else if (peekDescription(lexer)) {\n    return parseTypeSystemDefinition(lexer);\n  }\n\n  throw unexpected(lexer);\n}\n/**\n * ExecutableDefinition :\n *   - OperationDefinition\n *   - FragmentDefinition\n */\n\n\nfunction parseExecutableDefinition(lexer) {\n  if (peek(lexer, TokenKind.NAME)) {\n    switch (lexer.token.value) {\n      case 'query':\n      case 'mutation':\n      case 'subscription':\n        return parseOperationDefinition(lexer);\n\n      case 'fragment':\n        return parseFragmentDefinition(lexer);\n    }\n  } else if (peek(lexer, TokenKind.BRACE_L)) {\n    return parseOperationDefinition(lexer);\n  }\n\n  throw unexpected(lexer);\n} // Implements the parsing rules in the Operations section.\n\n/**\n * OperationDefinition :\n *  - SelectionSet\n *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\n */\n\n\nfunction parseOperationDefinition(lexer) {\n  var start = lexer.token;\n\n  if (peek(lexer, TokenKind.BRACE_L)) {\n    return {\n      kind: Kind.OPERATION_DEFINITION,\n      operation: 'query',\n      name: undefined,\n      variableDefinitions: [],\n      directives: [],\n      selectionSet: parseSelectionSet(lexer),\n      loc: loc(lexer, start)\n    };\n  }\n\n  var operation = parseOperationType(lexer);\n  var name;\n\n  if (peek(lexer, TokenKind.NAME)) {\n    name = parseName(lexer);\n  }\n\n  return {\n    kind: Kind.OPERATION_DEFINITION,\n    operation: operation,\n    name: name,\n    variableDefinitions: parseVariableDefinitions(lexer),\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * OperationType : one of query mutation subscription\n */\n\n\nfunction parseOperationType(lexer) {\n  var operationToken = expect(lexer, TokenKind.NAME);\n\n  switch (operationToken.value) {\n    case 'query':\n      return 'query';\n\n    case 'mutation':\n      return 'mutation';\n\n    case 'subscription':\n      return 'subscription';\n  }\n\n  throw unexpected(lexer, operationToken);\n}\n/**\n * VariableDefinitions : ( VariableDefinition+ )\n */\n\n\nfunction parseVariableDefinitions(lexer) {\n  return peek(lexer, TokenKind.PAREN_L) ? many(lexer, TokenKind.PAREN_L, parseVariableDefinition, TokenKind.PAREN_R) : [];\n}\n/**\n * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\n */\n\n\nfunction parseVariableDefinition(lexer) {\n  var start = lexer.token;\n\n  if (lexer.options.experimentalVariableDefinitionDirectives) {\n    return {\n      kind: Kind.VARIABLE_DEFINITION,\n      variable: parseVariable(lexer),\n      type: (expect(lexer, TokenKind.COLON), parseTypeReference(lexer)),\n      defaultValue: skip(lexer, TokenKind.EQUALS) ? parseValueLiteral(lexer, true) : undefined,\n      directives: parseDirectives(lexer, true),\n      loc: loc(lexer, start)\n    };\n  }\n\n  return {\n    kind: Kind.VARIABLE_DEFINITION,\n    variable: parseVariable(lexer),\n    type: (expect(lexer, TokenKind.COLON), parseTypeReference(lexer)),\n    defaultValue: skip(lexer, TokenKind.EQUALS) ? parseValueLiteral(lexer, true) : undefined,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Variable : $ Name\n */\n\n\nfunction parseVariable(lexer) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.DOLLAR);\n  return {\n    kind: Kind.VARIABLE,\n    name: parseName(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * SelectionSet : { Selection+ }\n */\n\n\nfunction parseSelectionSet(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.SELECTION_SET,\n    selections: many(lexer, TokenKind.BRACE_L, parseSelection, TokenKind.BRACE_R),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Selection :\n *   - Field\n *   - FragmentSpread\n *   - InlineFragment\n */\n\n\nfunction parseSelection(lexer) {\n  return peek(lexer, TokenKind.SPREAD) ? parseFragment(lexer) : parseField(lexer);\n}\n/**\n * Field : Alias? Name Arguments? Directives? SelectionSet?\n *\n * Alias : Name :\n */\n\n\nfunction parseField(lexer) {\n  var start = lexer.token;\n  var nameOrAlias = parseName(lexer);\n  var alias;\n  var name;\n\n  if (skip(lexer, TokenKind.COLON)) {\n    alias = nameOrAlias;\n    name = parseName(lexer);\n  } else {\n    name = nameOrAlias;\n  }\n\n  return {\n    kind: Kind.FIELD,\n    alias: alias,\n    name: name,\n    arguments: parseArguments(lexer, false),\n    directives: parseDirectives(lexer, false),\n    selectionSet: peek(lexer, TokenKind.BRACE_L) ? parseSelectionSet(lexer) : undefined,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Arguments[Const] : ( Argument[?Const]+ )\n */\n\n\nfunction parseArguments(lexer, isConst) {\n  var item = isConst ? parseConstArgument : parseArgument;\n  return peek(lexer, TokenKind.PAREN_L) ? many(lexer, TokenKind.PAREN_L, item, TokenKind.PAREN_R) : [];\n}\n/**\n * Argument[Const] : Name : Value[?Const]\n */\n\n\nfunction parseArgument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.ARGUMENT,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseValueLiteral(lexer, false)),\n    loc: loc(lexer, start)\n  };\n}\n\nfunction parseConstArgument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.ARGUMENT,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseConstValue(lexer)),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Fragments section.\n\n/**\n * Corresponds to both FragmentSpread and InlineFragment in the spec.\n *\n * FragmentSpread : ... FragmentName Directives?\n *\n * InlineFragment : ... TypeCondition? Directives? SelectionSet\n */\n\n\nfunction parseFragment(lexer) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.SPREAD);\n\n  if (peek(lexer, TokenKind.NAME) && lexer.token.value !== 'on') {\n    return {\n      kind: Kind.FRAGMENT_SPREAD,\n      name: parseFragmentName(lexer),\n      directives: parseDirectives(lexer, false),\n      loc: loc(lexer, start)\n    };\n  }\n\n  var typeCondition;\n\n  if (lexer.token.value === 'on') {\n    lexer.advance();\n    typeCondition = parseNamedType(lexer);\n  }\n\n  return {\n    kind: Kind.INLINE_FRAGMENT,\n    typeCondition: typeCondition,\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * FragmentDefinition :\n *   - fragment FragmentName on TypeCondition Directives? SelectionSet\n *\n * TypeCondition : NamedType\n */\n\n\nfunction parseFragmentDefinition(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'fragment'); // Experimental support for defining variables within fragments changes\n  // the grammar of FragmentDefinition:\n  //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\n\n  if (lexer.options.experimentalFragmentVariables) {\n    return {\n      kind: Kind.FRAGMENT_DEFINITION,\n      name: parseFragmentName(lexer),\n      variableDefinitions: parseVariableDefinitions(lexer),\n      typeCondition: (expectKeyword(lexer, 'on'), parseNamedType(lexer)),\n      directives: parseDirectives(lexer, false),\n      selectionSet: parseSelectionSet(lexer),\n      loc: loc(lexer, start)\n    };\n  }\n\n  return {\n    kind: Kind.FRAGMENT_DEFINITION,\n    name: parseFragmentName(lexer),\n    typeCondition: (expectKeyword(lexer, 'on'), parseNamedType(lexer)),\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * FragmentName : Name but not `on`\n */\n\n\nfunction parseFragmentName(lexer) {\n  if (lexer.token.value === 'on') {\n    throw unexpected(lexer);\n  }\n\n  return parseName(lexer);\n} // Implements the parsing rules in the Values section.\n\n/**\n * Value[Const] :\n *   - [~Const] Variable\n *   - IntValue\n *   - FloatValue\n *   - StringValue\n *   - BooleanValue\n *   - NullValue\n *   - EnumValue\n *   - ListValue[?Const]\n *   - ObjectValue[?Const]\n *\n * BooleanValue : one of `true` `false`\n *\n * NullValue : `null`\n *\n * EnumValue : Name but not `true`, `false` or `null`\n */\n\n\nfunction parseValueLiteral(lexer, isConst) {\n  var token = lexer.token;\n\n  switch (token.kind) {\n    case TokenKind.BRACKET_L:\n      return parseList(lexer, isConst);\n\n    case TokenKind.BRACE_L:\n      return parseObject(lexer, isConst);\n\n    case TokenKind.INT:\n      lexer.advance();\n      return {\n        kind: Kind.INT,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.FLOAT:\n      lexer.advance();\n      return {\n        kind: Kind.FLOAT,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.STRING:\n    case TokenKind.BLOCK_STRING:\n      return parseStringLiteral(lexer);\n\n    case TokenKind.NAME:\n      if (token.value === 'true' || token.value === 'false') {\n        lexer.advance();\n        return {\n          kind: Kind.BOOLEAN,\n          value: token.value === 'true',\n          loc: loc(lexer, token)\n        };\n      } else if (token.value === 'null') {\n        lexer.advance();\n        return {\n          kind: Kind.NULL,\n          loc: loc(lexer, token)\n        };\n      }\n\n      lexer.advance();\n      return {\n        kind: Kind.ENUM,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.DOLLAR:\n      if (!isConst) {\n        return parseVariable(lexer);\n      }\n\n      break;\n  }\n\n  throw unexpected(lexer);\n}\n\nfunction parseStringLiteral(lexer) {\n  var token = lexer.token;\n  lexer.advance();\n  return {\n    kind: Kind.STRING,\n    value: token.value,\n    block: token.kind === TokenKind.BLOCK_STRING,\n    loc: loc(lexer, token)\n  };\n}\n\nexport function parseConstValue(lexer) {\n  return parseValueLiteral(lexer, true);\n}\n\nfunction parseValueValue(lexer) {\n  return parseValueLiteral(lexer, false);\n}\n/**\n * ListValue[Const] :\n *   - [ ]\n *   - [ Value[?Const]+ ]\n */\n\n\nfunction parseList(lexer, isConst) {\n  var start = lexer.token;\n  var item = isConst ? parseConstValue : parseValueValue;\n  return {\n    kind: Kind.LIST,\n    values: any(lexer, TokenKind.BRACKET_L, item, TokenKind.BRACKET_R),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectValue[Const] :\n *   - { }\n *   - { ObjectField[?Const]+ }\n */\n\n\nfunction parseObject(lexer, isConst) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.BRACE_L);\n  var fields = [];\n\n  while (!skip(lexer, TokenKind.BRACE_R)) {\n    fields.push(parseObjectField(lexer, isConst));\n  }\n\n  return {\n    kind: Kind.OBJECT,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectField[Const] : Name : Value[?Const]\n */\n\n\nfunction parseObjectField(lexer, isConst) {\n  var start = lexer.token;\n  return {\n    kind: Kind.OBJECT_FIELD,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseValueLiteral(lexer, isConst)),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Directives section.\n\n/**\n * Directives[Const] : Directive[?Const]+\n */\n\n\nfunction parseDirectives(lexer, isConst) {\n  var directives = [];\n\n  while (peek(lexer, TokenKind.AT)) {\n    directives.push(parseDirective(lexer, isConst));\n  }\n\n  return directives;\n}\n/**\n * Directive[Const] : @ Name Arguments[?Const]?\n */\n\n\nfunction parseDirective(lexer, isConst) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.AT);\n  return {\n    kind: Kind.DIRECTIVE,\n    name: parseName(lexer),\n    arguments: parseArguments(lexer, isConst),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Types section.\n\n/**\n * Type :\n *   - NamedType\n *   - ListType\n *   - NonNullType\n */\n\n\nexport function parseTypeReference(lexer) {\n  var start = lexer.token;\n  var type;\n\n  if (skip(lexer, TokenKind.BRACKET_L)) {\n    type = parseTypeReference(lexer);\n    expect(lexer, TokenKind.BRACKET_R);\n    type = {\n      kind: Kind.LIST_TYPE,\n      type: type,\n      loc: loc(lexer, start)\n    };\n  } else {\n    type = parseNamedType(lexer);\n  }\n\n  if (skip(lexer, TokenKind.BANG)) {\n    return {\n      kind: Kind.NON_NULL_TYPE,\n      type: type,\n      loc: loc(lexer, start)\n    };\n  }\n\n  return type;\n}\n/**\n * NamedType : Name\n */\n\nexport function parseNamedType(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.NAMED_TYPE,\n    name: parseName(lexer),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Type Definition section.\n\n/**\n * TypeSystemDefinition :\n *   - SchemaDefinition\n *   - TypeDefinition\n *   - DirectiveDefinition\n *\n * TypeDefinition :\n *   - ScalarTypeDefinition\n *   - ObjectTypeDefinition\n *   - InterfaceTypeDefinition\n *   - UnionTypeDefinition\n *   - EnumTypeDefinition\n *   - InputObjectTypeDefinition\n */\n\nfunction parseTypeSystemDefinition(lexer) {\n  // Many definitions begin with a description and require a lookahead.\n  var keywordToken = peekDescription(lexer) ? lexer.lookahead() : lexer.token;\n\n  if (keywordToken.kind === TokenKind.NAME) {\n    switch (keywordToken.value) {\n      case 'schema':\n        return parseSchemaDefinition(lexer);\n\n      case 'scalar':\n        return parseScalarTypeDefinition(lexer);\n\n      case 'type':\n        return parseObjectTypeDefinition(lexer);\n\n      case 'interface':\n        return parseInterfaceTypeDefinition(lexer);\n\n      case 'union':\n        return parseUnionTypeDefinition(lexer);\n\n      case 'enum':\n        return parseEnumTypeDefinition(lexer);\n\n      case 'input':\n        return parseInputObjectTypeDefinition(lexer);\n\n      case 'directive':\n        return parseDirectiveDefinition(lexer);\n    }\n  }\n\n  throw unexpected(lexer, keywordToken);\n}\n\nfunction peekDescription(lexer) {\n  return peek(lexer, TokenKind.STRING) || peek(lexer, TokenKind.BLOCK_STRING);\n}\n/**\n * Description : StringValue\n */\n\n\nfunction parseDescription(lexer) {\n  if (peekDescription(lexer)) {\n    return parseStringLiteral(lexer);\n  }\n}\n/**\n * SchemaDefinition : schema Directives[Const]? { OperationTypeDefinition+ }\n */\n\n\nfunction parseSchemaDefinition(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'schema');\n  var directives = parseDirectives(lexer, true);\n  var operationTypes = many(lexer, TokenKind.BRACE_L, parseOperationTypeDefinition, TokenKind.BRACE_R);\n  return {\n    kind: Kind.SCHEMA_DEFINITION,\n    directives: directives,\n    operationTypes: operationTypes,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * OperationTypeDefinition : OperationType : NamedType\n */\n\n\nfunction parseOperationTypeDefinition(lexer) {\n  var start = lexer.token;\n  var operation = parseOperationType(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseNamedType(lexer);\n  return {\n    kind: Kind.OPERATION_TYPE_DEFINITION,\n    operation: operation,\n    type: type,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\n */\n\n\nfunction parseScalarTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'scalar');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.SCALAR_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectTypeDefinition :\n *   Description?\n *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\n */\n\n\nfunction parseObjectTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'type');\n  var name = parseName(lexer);\n  var interfaces = parseImplementsInterfaces(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n  return {\n    kind: Kind.OBJECT_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    interfaces: interfaces,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ImplementsInterfaces :\n *   - implements `&`? NamedType\n *   - ImplementsInterfaces & NamedType\n */\n\n\nfunction parseImplementsInterfaces(lexer) {\n  var types = [];\n\n  if (lexer.token.value === 'implements') {\n    lexer.advance(); // Optional leading ampersand\n\n    skip(lexer, TokenKind.AMP);\n\n    do {\n      types.push(parseNamedType(lexer));\n    } while (skip(lexer, TokenKind.AMP) || // Legacy support for the SDL?\n    lexer.options.allowLegacySDLImplementsInterfaces && peek(lexer, TokenKind.NAME));\n  }\n\n  return types;\n}\n/**\n * FieldsDefinition : { FieldDefinition+ }\n */\n\n\nfunction parseFieldsDefinition(lexer) {\n  // Legacy support for the SDL?\n  if (lexer.options.allowLegacySDLEmptyFields && peek(lexer, TokenKind.BRACE_L) && lexer.lookahead().kind === TokenKind.BRACE_R) {\n    lexer.advance();\n    lexer.advance();\n    return [];\n  }\n\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseFieldDefinition, TokenKind.BRACE_R) : [];\n}\n/**\n * FieldDefinition :\n *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\n */\n\n\nfunction parseFieldDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  var args = parseArgumentDefs(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseTypeReference(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.FIELD_DEFINITION,\n    description: description,\n    name: name,\n    arguments: args,\n    type: type,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ArgumentsDefinition : ( InputValueDefinition+ )\n */\n\n\nfunction parseArgumentDefs(lexer) {\n  if (!peek(lexer, TokenKind.PAREN_L)) {\n    return [];\n  }\n\n  return many(lexer, TokenKind.PAREN_L, parseInputValueDef, TokenKind.PAREN_R);\n}\n/**\n * InputValueDefinition :\n *   - Description? Name : Type DefaultValue? Directives[Const]?\n */\n\n\nfunction parseInputValueDef(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseTypeReference(lexer);\n  var defaultValue;\n\n  if (skip(lexer, TokenKind.EQUALS)) {\n    defaultValue = parseConstValue(lexer);\n  }\n\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.INPUT_VALUE_DEFINITION,\n    description: description,\n    name: name,\n    type: type,\n    defaultValue: defaultValue,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InterfaceTypeDefinition :\n *   - Description? interface Name Directives[Const]? FieldsDefinition?\n */\n\n\nfunction parseInterfaceTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'interface');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n  return {\n    kind: Kind.INTERFACE_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionTypeDefinition :\n *   - Description? union Name Directives[Const]? UnionMemberTypes?\n */\n\n\nfunction parseUnionTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'union');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var types = parseUnionMemberTypes(lexer);\n  return {\n    kind: Kind.UNION_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    types: types,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionMemberTypes :\n *   - = `|`? NamedType\n *   - UnionMemberTypes | NamedType\n */\n\n\nfunction parseUnionMemberTypes(lexer) {\n  var types = [];\n\n  if (skip(lexer, TokenKind.EQUALS)) {\n    // Optional leading pipe\n    skip(lexer, TokenKind.PIPE);\n\n    do {\n      types.push(parseNamedType(lexer));\n    } while (skip(lexer, TokenKind.PIPE));\n  }\n\n  return types;\n}\n/**\n * EnumTypeDefinition :\n *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\n */\n\n\nfunction parseEnumTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'enum');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var values = parseEnumValuesDefinition(lexer);\n  return {\n    kind: Kind.ENUM_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    values: values,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * EnumValuesDefinition : { EnumValueDefinition+ }\n */\n\n\nfunction parseEnumValuesDefinition(lexer) {\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseEnumValueDefinition, TokenKind.BRACE_R) : [];\n}\n/**\n * EnumValueDefinition : Description? EnumValue Directives[Const]?\n *\n * EnumValue : Name\n */\n\n\nfunction parseEnumValueDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.ENUM_VALUE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputObjectTypeDefinition :\n *   - Description? input Name Directives[Const]? InputFieldsDefinition?\n */\n\n\nfunction parseInputObjectTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'input');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseInputFieldsDefinition(lexer);\n  return {\n    kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputFieldsDefinition : { InputValueDefinition+ }\n */\n\n\nfunction parseInputFieldsDefinition(lexer) {\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseInputValueDef, TokenKind.BRACE_R) : [];\n}\n/**\n * TypeSystemExtension :\n *   - SchemaExtension\n *   - TypeExtension\n *\n * TypeExtension :\n *   - ScalarTypeExtension\n *   - ObjectTypeExtension\n *   - InterfaceTypeExtension\n *   - UnionTypeExtension\n *   - EnumTypeExtension\n *   - InputObjectTypeDefinition\n */\n\n\nfunction parseTypeSystemExtension(lexer) {\n  var keywordToken = lexer.lookahead();\n\n  if (keywordToken.kind === TokenKind.NAME) {\n    switch (keywordToken.value) {\n      case 'schema':\n        return parseSchemaExtension(lexer);\n\n      case 'scalar':\n        return parseScalarTypeExtension(lexer);\n\n      case 'type':\n        return parseObjectTypeExtension(lexer);\n\n      case 'interface':\n        return parseInterfaceTypeExtension(lexer);\n\n      case 'union':\n        return parseUnionTypeExtension(lexer);\n\n      case 'enum':\n        return parseEnumTypeExtension(lexer);\n\n      case 'input':\n        return parseInputObjectTypeExtension(lexer);\n    }\n  }\n\n  throw unexpected(lexer, keywordToken);\n}\n/**\n * SchemaExtension :\n *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\n *  - extend schema Directives[Const]\n */\n\n\nfunction parseSchemaExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'schema');\n  var directives = parseDirectives(lexer, true);\n  var operationTypes = peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseOperationTypeDefinition, TokenKind.BRACE_R) : [];\n\n  if (directives.length === 0 && operationTypes.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.SCHEMA_EXTENSION,\n    directives: directives,\n    operationTypes: operationTypes,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ScalarTypeExtension :\n *   - extend scalar Name Directives[Const]\n */\n\n\nfunction parseScalarTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'scalar');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n\n  if (directives.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.SCALAR_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectTypeExtension :\n *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n *  - extend type Name ImplementsInterfaces? Directives[Const]\n *  - extend type Name ImplementsInterfaces\n */\n\n\nfunction parseObjectTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'type');\n  var name = parseName(lexer);\n  var interfaces = parseImplementsInterfaces(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n\n  if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.OBJECT_TYPE_EXTENSION,\n    name: name,\n    interfaces: interfaces,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InterfaceTypeExtension :\n *   - extend interface Name Directives[Const]? FieldsDefinition\n *   - extend interface Name Directives[Const]\n */\n\n\nfunction parseInterfaceTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'interface');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n\n  if (directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.INTERFACE_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionTypeExtension :\n *   - extend union Name Directives[Const]? UnionMemberTypes\n *   - extend union Name Directives[Const]\n */\n\n\nfunction parseUnionTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'union');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var types = parseUnionMemberTypes(lexer);\n\n  if (directives.length === 0 && types.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.UNION_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    types: types,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * EnumTypeExtension :\n *   - extend enum Name Directives[Const]? EnumValuesDefinition\n *   - extend enum Name Directives[Const]\n */\n\n\nfunction parseEnumTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'enum');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var values = parseEnumValuesDefinition(lexer);\n\n  if (directives.length === 0 && values.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.ENUM_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    values: values,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputObjectTypeExtension :\n *   - extend input Name Directives[Const]? InputFieldsDefinition\n *   - extend input Name Directives[Const]\n */\n\n\nfunction parseInputObjectTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'input');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseInputFieldsDefinition(lexer);\n\n  if (directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * DirectiveDefinition :\n *   - Description? directive @ Name ArgumentsDefinition? on DirectiveLocations\n */\n\n\nfunction parseDirectiveDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'directive');\n  expect(lexer, TokenKind.AT);\n  var name = parseName(lexer);\n  var args = parseArgumentDefs(lexer);\n  expectKeyword(lexer, 'on');\n  var locations = parseDirectiveLocations(lexer);\n  return {\n    kind: Kind.DIRECTIVE_DEFINITION,\n    description: description,\n    name: name,\n    arguments: args,\n    locations: locations,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * DirectiveLocations :\n *   - `|`? DirectiveLocation\n *   - DirectiveLocations | DirectiveLocation\n */\n\n\nfunction parseDirectiveLocations(lexer) {\n  // Optional leading pipe\n  skip(lexer, TokenKind.PIPE);\n  var locations = [];\n\n  do {\n    locations.push(parseDirectiveLocation(lexer));\n  } while (skip(lexer, TokenKind.PIPE));\n\n  return locations;\n}\n/*\n * DirectiveLocation :\n *   - ExecutableDirectiveLocation\n *   - TypeSystemDirectiveLocation\n *\n * ExecutableDirectiveLocation : one of\n *   `QUERY`\n *   `MUTATION`\n *   `SUBSCRIPTION`\n *   `FIELD`\n *   `FRAGMENT_DEFINITION`\n *   `FRAGMENT_SPREAD`\n *   `INLINE_FRAGMENT`\n *\n * TypeSystemDirectiveLocation : one of\n *   `SCHEMA`\n *   `SCALAR`\n *   `OBJECT`\n *   `FIELD_DEFINITION`\n *   `ARGUMENT_DEFINITION`\n *   `INTERFACE`\n *   `UNION`\n *   `ENUM`\n *   `ENUM_VALUE`\n *   `INPUT_OBJECT`\n *   `INPUT_FIELD_DEFINITION`\n */\n\n\nfunction parseDirectiveLocation(lexer) {\n  var start = lexer.token;\n  var name = parseName(lexer);\n\n  if (DirectiveLocation.hasOwnProperty(name.value)) {\n    return name;\n  }\n\n  throw unexpected(lexer, start);\n} // Core parsing utility functions\n\n/**\n * Returns a location object, used to identify the place in\n * the source that created a given parsed object.\n */\n\n\nfunction loc(lexer, startToken) {\n  if (!lexer.options.noLocation) {\n    return new Loc(startToken, lexer.lastToken, lexer.source);\n  }\n}\n\nfunction Loc(startToken, endToken, source) {\n  this.start = startToken.start;\n  this.end = endToken.end;\n  this.startToken = startToken;\n  this.endToken = endToken;\n  this.source = source;\n} // Print a simplified form when appearing in JSON/util.inspect.\n\n\nLoc.prototype.toJSON = Loc.prototype.inspect = function toJSON() {\n  return {\n    start: this.start,\n    end: this.end\n  };\n};\n/**\n * Determines if the next token is of a given kind\n */\n\n\nfunction peek(lexer, kind) {\n  return lexer.token.kind === kind;\n}\n/**\n * If the next token is of the given kind, return true after advancing\n * the lexer. Otherwise, do not change the parser state and return false.\n */\n\n\nfunction skip(lexer, kind) {\n  var match = lexer.token.kind === kind;\n\n  if (match) {\n    lexer.advance();\n  }\n\n  return match;\n}\n/**\n * If the next token is of the given kind, return that token after advancing\n * the lexer. Otherwise, do not change the parser state and throw an error.\n */\n\n\nfunction expect(lexer, kind) {\n  var token = lexer.token;\n\n  if (token.kind === kind) {\n    lexer.advance();\n    return token;\n  }\n\n  throw syntaxError(lexer.source, token.start, \"Expected \".concat(kind, \", found \").concat(getTokenDesc(token)));\n}\n/**\n * If the next token is a keyword with the given value, return that token after\n * advancing the lexer. Otherwise, do not change the parser state and return\n * false.\n */\n\n\nfunction expectKeyword(lexer, value) {\n  var token = lexer.token;\n\n  if (token.kind === TokenKind.NAME && token.value === value) {\n    lexer.advance();\n    return token;\n  }\n\n  throw syntaxError(lexer.source, token.start, \"Expected \\\"\".concat(value, \"\\\", found \").concat(getTokenDesc(token)));\n}\n/**\n * Helper function for creating an error when an unexpected lexed token\n * is encountered.\n */\n\n\nfunction unexpected(lexer, atToken) {\n  var token = atToken || lexer.token;\n  return syntaxError(lexer.source, token.start, \"Unexpected \".concat(getTokenDesc(token)));\n}\n/**\n * Returns a possibly empty list of parse nodes, determined by\n * the parseFn. This list begins with a lex token of openKind\n * and ends with a lex token of closeKind. Advances the parser\n * to the next lex token after the closing token.\n */\n\n\nfunction any(lexer, openKind, parseFn, closeKind) {\n  expect(lexer, openKind);\n  var nodes = [];\n\n  while (!skip(lexer, closeKind)) {\n    nodes.push(parseFn(lexer));\n  }\n\n  return nodes;\n}\n/**\n * Returns a non-empty list of parse nodes, determined by\n * the parseFn. This list begins with a lex token of openKind\n * and ends with a lex token of closeKind. Advances the parser\n * to the next lex token after the closing token.\n */\n\n\nfunction many(lexer, openKind, parseFn, closeKind) {\n  expect(lexer, openKind);\n  var nodes = [parseFn(lexer)];\n\n  while (!skip(lexer, closeKind)) {\n    nodes.push(parseFn(lexer));\n  }\n\n  return nodes;\n}","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nimport { GraphQLError } from 'graphql/error/GraphQLError';\nimport { print } from 'graphql/language/printer';\nimport { parse } from 'graphql/language/parser';\nimport { Amplify, ConsoleLogger as Logger, Constants, Credentials, INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER } from '@aws-amplify/core';\nimport PubSub from '@aws-amplify/pubsub';\nimport Auth from '@aws-amplify/auth';\nimport Cache from '@aws-amplify/cache';\nimport { RestClient } from '@aws-amplify/api-rest';\nvar USER_AGENT_HEADER = 'x-amz-user-agent';\nvar logger = new Logger('GraphQLAPI');\nexport var graphqlOperation = function graphqlOperation(query, variables) {\n  if (variables === void 0) {\n    variables = {};\n  }\n\n  return {\n    query: query,\n    variables: variables\n  };\n};\n/**\n * Export Cloud Logic APIs\n */\n\nvar GraphQLAPIClass =\n/** @class */\nfunction () {\n  /**\n   * Initialize GraphQL API with AWS configuration\n   * @param {Object} options - Configuration object for API\n   */\n  function GraphQLAPIClass(options) {\n    this._api = null;\n    this.Auth = Auth;\n    this.Cache = Cache;\n    this.Credentials = Credentials;\n    this._options = options;\n    logger.debug('API Options', this._options);\n  }\n\n  GraphQLAPIClass.prototype.getModuleName = function () {\n    return 'GraphQLAPI';\n  };\n  /**\n   * Configure API\n   * @param {Object} config - Configuration of the API\n   * @return {Object} - The current configuration\n   */\n\n\n  GraphQLAPIClass.prototype.configure = function (options) {\n    var _a = options || {},\n        _b = _a.API,\n        API = _b === void 0 ? {} : _b,\n        otherOptions = __rest(_a, [\"API\"]);\n\n    var opt = __assign(__assign({}, otherOptions), API);\n\n    logger.debug('configure GraphQL API', {\n      opt: opt\n    });\n\n    if (opt['aws_project_region']) {\n      opt = Object.assign({}, opt, {\n        region: opt['aws_project_region'],\n        header: {}\n      });\n    }\n\n    if (typeof opt.graphql_headers !== 'undefined' && typeof opt.graphql_headers !== 'function') {\n      logger.warn('graphql_headers should be a function');\n      opt.graphql_headers = undefined;\n    }\n\n    this._options = Object.assign({}, this._options, opt);\n    this.createInstance();\n    return this._options;\n  };\n  /**\n   * Create an instance of API for the library\n   * @return - A promise of true if Success\n   */\n\n\n  GraphQLAPIClass.prototype.createInstance = function () {\n    logger.debug('create Rest instance');\n\n    if (this._options) {\n      this._api = new RestClient(this._options); // Share instance Credentials with client for SSR\n\n      this._api.Credentials = this.Credentials;\n      return true;\n    } else {\n      return Promise.reject('API not configured');\n    }\n  };\n\n  GraphQLAPIClass.prototype._headerBasedAuth = function (defaultAuthenticationType) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, aws_appsync_authenticationType, apiKey, authenticationType, headers, _b, credentialsOK, token, federatedInfo, currentUser, session;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _a = this._options, aws_appsync_authenticationType = _a.aws_appsync_authenticationType, apiKey = _a.aws_appsync_apiKey;\n            authenticationType = defaultAuthenticationType || aws_appsync_authenticationType || 'AWS_IAM';\n            headers = {};\n            _b = authenticationType;\n\n            switch (_b) {\n              case 'API_KEY':\n                return [3\n                /*break*/\n                , 1];\n\n              case 'AWS_IAM':\n                return [3\n                /*break*/\n                , 2];\n\n              case 'OPENID_CONNECT':\n                return [3\n                /*break*/\n                , 4];\n\n              case 'AMAZON_COGNITO_USER_POOLS':\n                return [3\n                /*break*/\n                , 9];\n            }\n\n            return [3\n            /*break*/\n            , 11];\n\n          case 1:\n            if (!apiKey) {\n              throw new Error('No api-key configured');\n            }\n\n            headers = {\n              Authorization: null,\n              'X-Api-Key': apiKey\n            };\n            return [3\n            /*break*/\n            , 12];\n\n          case 2:\n            return [4\n            /*yield*/\n            , this._ensureCredentials()];\n\n          case 3:\n            credentialsOK = _c.sent();\n\n            if (!credentialsOK) {\n              throw new Error('No credentials');\n            }\n\n            return [3\n            /*break*/\n            , 12];\n\n          case 4:\n            token = void 0;\n            return [4\n            /*yield*/\n            , Cache.getItem('federatedInfo')];\n\n          case 5:\n            federatedInfo = _c.sent();\n            if (!federatedInfo) return [3\n            /*break*/\n            , 6];\n            token = federatedInfo.token;\n            return [3\n            /*break*/\n            , 8];\n\n          case 6:\n            return [4\n            /*yield*/\n            , Auth.currentAuthenticatedUser()];\n\n          case 7:\n            currentUser = _c.sent();\n\n            if (currentUser) {\n              token = currentUser.token;\n            }\n\n            _c.label = 8;\n\n          case 8:\n            if (!token) {\n              throw new Error('No federated jwt');\n            }\n\n            headers = {\n              Authorization: token\n            };\n            return [3\n            /*break*/\n            , 12];\n\n          case 9:\n            return [4\n            /*yield*/\n            , this.Auth.currentSession()];\n\n          case 10:\n            session = _c.sent();\n            headers = {\n              Authorization: session.getAccessToken().getJwtToken()\n            };\n            return [3\n            /*break*/\n            , 12];\n\n          case 11:\n            headers = {\n              Authorization: null\n            };\n            return [3\n            /*break*/\n            , 12];\n\n          case 12:\n            return [2\n            /*return*/\n            , headers];\n        }\n      });\n    });\n  };\n  /**\n   * to get the operation type\n   * @param operation\n   */\n\n\n  GraphQLAPIClass.prototype.getGraphqlOperationType = function (operation) {\n    var doc = parse(operation);\n\n    var _a = __read(doc.definitions, 1),\n        operationType = _a[0].operation;\n\n    return operationType;\n  };\n  /**\n   * Executes a GraphQL operation\n   *\n   * @param {GraphQLOptions} GraphQL Options\n   * @param {object} additionalHeaders headers to merge in after any `graphql_headers` set in the config\n   * @returns {Promise<GraphQLResult> | Observable<object>}\n   */\n\n\n  GraphQLAPIClass.prototype.graphql = function (_a, additionalHeaders) {\n    var paramQuery = _a.query,\n        _b = _a.variables,\n        variables = _b === void 0 ? {} : _b,\n        authMode = _a.authMode;\n    var query = typeof paramQuery === 'string' ? parse(paramQuery) : parse(print(paramQuery));\n\n    var _c = __read(query.definitions.filter(function (def) {\n      return def.kind === 'OperationDefinition';\n    }), 1),\n        _d = _c[0],\n        operationDef = _d === void 0 ? {} : _d;\n\n    var operationType = operationDef.operation;\n\n    switch (operationType) {\n      case 'query':\n      case 'mutation':\n        var cancellableToken = this._api.getCancellableToken();\n\n        var initParams = {\n          cancellableToken: cancellableToken\n        };\n\n        var responsePromise = this._graphql({\n          query: query,\n          variables: variables,\n          authMode: authMode\n        }, additionalHeaders, initParams);\n\n        this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n        return responsePromise;\n\n      case 'subscription':\n        return this._graphqlSubscribe({\n          query: query,\n          variables: variables,\n          authMode: authMode\n        }, additionalHeaders);\n    }\n\n    throw new Error(\"invalid operation type: \" + operationType);\n  };\n\n  GraphQLAPIClass.prototype._graphql = function (_a, additionalHeaders, initParams) {\n    var query = _a.query,\n        variables = _a.variables,\n        authMode = _a.authMode;\n\n    if (additionalHeaders === void 0) {\n      additionalHeaders = {};\n    }\n\n    if (initParams === void 0) {\n      initParams = {};\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var _b, region, appSyncGraphqlEndpoint, _c, graphql_headers, customGraphqlEndpoint, customEndpointRegion, headers, _d, _e, _f, _g, _h, _j, body, init, endpoint, error, response, err_1, errors;\n\n      var _k;\n\n      return __generator(this, function (_l) {\n        switch (_l.label) {\n          case 0:\n            if (!!this._api) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.createInstance()];\n\n          case 1:\n            _l.sent();\n\n            _l.label = 2;\n\n          case 2:\n            _b = this._options, region = _b.aws_appsync_region, appSyncGraphqlEndpoint = _b.aws_appsync_graphqlEndpoint, _c = _b.graphql_headers, graphql_headers = _c === void 0 ? function () {\n              return {};\n            } : _c, customGraphqlEndpoint = _b.graphql_endpoint, customEndpointRegion = _b.graphql_endpoint_iam_region;\n            _d = [{}];\n            _e = !customGraphqlEndpoint;\n            if (!_e) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , this._headerBasedAuth(authMode)];\n\n          case 3:\n            _e = _l.sent();\n            _l.label = 4;\n\n          case 4:\n            _f = [__assign.apply(void 0, _d.concat([_e]))];\n            _g = customGraphqlEndpoint;\n            if (!_g) return [3\n            /*break*/\n            , 8];\n            if (!customEndpointRegion) return [3\n            /*break*/\n            , 6];\n            return [4\n            /*yield*/\n            , this._headerBasedAuth(authMode)];\n\n          case 5:\n            _h = _l.sent();\n            return [3\n            /*break*/\n            , 7];\n\n          case 6:\n            _h = {\n              Authorization: null\n            };\n            _l.label = 7;\n\n          case 7:\n            _g = _h;\n            _l.label = 8;\n\n          case 8:\n            _j = [__assign.apply(void 0, _f.concat([_g]))];\n            return [4\n            /*yield*/\n            , graphql_headers({\n              query: query,\n              variables: variables\n            })];\n\n          case 9:\n            headers = __assign.apply(void 0, [__assign.apply(void 0, [__assign.apply(void 0, _j.concat([_l.sent()])), additionalHeaders]), !customGraphqlEndpoint && (_k = {}, _k[USER_AGENT_HEADER] = Constants.userAgent, _k)]);\n            body = {\n              query: print(query),\n              variables: variables\n            };\n            init = Object.assign({\n              headers: headers,\n              body: body,\n              signerServiceInfo: {\n                service: !customGraphqlEndpoint ? 'appsync' : 'execute-api',\n                region: !customGraphqlEndpoint ? region : customEndpointRegion\n              }\n            }, initParams);\n            endpoint = customGraphqlEndpoint || appSyncGraphqlEndpoint;\n\n            if (!endpoint) {\n              error = new GraphQLError('No graphql endpoint provided.');\n              throw {\n                data: {},\n                errors: [error]\n              };\n            }\n\n            _l.label = 10;\n\n          case 10:\n            _l.trys.push([10, 12,, 13]);\n\n            return [4\n            /*yield*/\n            , this._api.post(endpoint, init)];\n\n          case 11:\n            response = _l.sent();\n            return [3\n            /*break*/\n            , 13];\n\n          case 12:\n            err_1 = _l.sent(); // If the exception is because user intentionally\n            // cancelled the request, do not modify the exception\n            // so that clients can identify the exception correctly.\n\n            if (this._api.isCancel(err_1)) {\n              throw err_1;\n            }\n\n            response = {\n              data: {},\n              errors: [new GraphQLError(err_1.message, null, null, null, null, err_1)]\n            };\n            return [3\n            /*break*/\n            , 13];\n\n          case 13:\n            errors = response.errors;\n\n            if (errors && errors.length) {\n              throw response;\n            }\n\n            return [2\n            /*return*/\n            , response];\n        }\n      });\n    });\n  };\n  /**\n   * Checks to see if an error thrown is from an api request cancellation\n   * @param {any} error - Any error\n   * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n   */\n\n\n  GraphQLAPIClass.prototype.isCancel = function (error) {\n    return this._api.isCancel(error);\n  };\n  /**\n   * Cancels an inflight request. Only applicable for graphql queries and mutations\n   * @param {any} request - request to cancel\n   * @return {boolean} - A boolean indicating if the request was cancelled\n   */\n\n\n  GraphQLAPIClass.prototype.cancel = function (request, message) {\n    return this._api.cancel(request, message);\n  };\n\n  GraphQLAPIClass.prototype._graphqlSubscribe = function (_a, additionalHeaders) {\n    var query = _a.query,\n        variables = _a.variables,\n        defaultAuthenticationType = _a.authMode;\n\n    if (additionalHeaders === void 0) {\n      additionalHeaders = {};\n    }\n\n    var _b = this._options,\n        region = _b.aws_appsync_region,\n        appSyncGraphqlEndpoint = _b.aws_appsync_graphqlEndpoint,\n        aws_appsync_authenticationType = _b.aws_appsync_authenticationType,\n        apiKey = _b.aws_appsync_apiKey,\n        _c = _b.graphql_headers,\n        graphql_headers = _c === void 0 ? function () {\n      return {};\n    } : _c;\n    var authenticationType = defaultAuthenticationType || aws_appsync_authenticationType || 'AWS_IAM';\n\n    if (PubSub && typeof PubSub.subscribe === 'function') {\n      return PubSub.subscribe('', {\n        provider: INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,\n        appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n        authenticationType: authenticationType,\n        apiKey: apiKey,\n        query: print(query),\n        region: region,\n        variables: variables,\n        graphql_headers: graphql_headers,\n        additionalHeaders: additionalHeaders\n      });\n    } else {\n      logger.debug('No pubsub module applied for subscription');\n      throw new Error('No pubsub module applied for subscription');\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  GraphQLAPIClass.prototype._ensureCredentials = function () {\n    var _this = this;\n\n    return this.Credentials.get().then(function (credentials) {\n      if (!credentials) return false;\n\n      var cred = _this.Credentials.shear(credentials);\n\n      logger.debug('set credentials for api', cred);\n      return true;\n    }).catch(function (err) {\n      logger.warn('ensure credentials error', err);\n      return false;\n    });\n  };\n\n  return GraphQLAPIClass;\n}();\n\nexport { GraphQLAPIClass };\nexport var GraphQLAPI = new GraphQLAPIClass(null);\nAmplify.register(GraphQLAPI);","import zenObservable from 'zen-observable';\nvar Observable = zenObservable;\nexport default Observable;\nexport { Observable };","import { fromUtf8 as jsFromUtf8, toUtf8 as jsToUtf8 } from \"./pureJs\";\nimport { fromUtf8 as textEncoderFromUtf8, toUtf8 as textEncoderToUtf8 } from \"./whatwgEncodingApi\";\nexport var fromUtf8 = function fromUtf8(input) {\n  return typeof TextEncoder === \"function\" ? textEncoderFromUtf8(input) : jsFromUtf8(input);\n};\nexport var toUtf8 = function toUtf8(input) {\n  return typeof TextDecoder === \"function\" ? textEncoderToUtf8(input) : jsToUtf8(input);\n};","export function fromUtf8(input) {\n  return new TextEncoder().encode(input);\n}\nexport function toUtf8(input) {\n  return new TextDecoder(\"utf-8\").decode(input);\n}","/**\n * Converts a JS string from its native UCS-2/UTF-16 representation into a\n * Uint8Array of the bytes used to represent the equivalent characters in UTF-8.\n *\n * Cribbed from the `goog.crypt.stringToUtf8ByteArray` function in the Google\n * Closure library, though updated to use typed arrays.\n */\nexport var fromUtf8 = function fromUtf8(input) {\n  var bytes = [];\n\n  for (var i = 0, len = input.length; i < len; i++) {\n    var value = input.charCodeAt(i);\n\n    if (value < 0x80) {\n      bytes.push(value);\n    } else if (value < 0x800) {\n      bytes.push(value >> 6 | 192, value & 63 | 128);\n    } else if (i + 1 < input.length && (value & 0xfc00) === 0xd800 && (input.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\n      var surrogatePair = 0x10000 + ((value & 1023) << 10) + (input.charCodeAt(++i) & 1023);\n      bytes.push(surrogatePair >> 18 | 240, surrogatePair >> 12 & 63 | 128, surrogatePair >> 6 & 63 | 128, surrogatePair & 63 | 128);\n    } else {\n      bytes.push(value >> 12 | 224, value >> 6 & 63 | 128, value & 63 | 128);\n    }\n  }\n\n  return Uint8Array.from(bytes);\n};\n/**\n * Converts a typed array of bytes containing UTF-8 data into a native JS\n * string.\n *\n * Partly cribbed from the `goog.crypt.utf8ByteArrayToString` function in the\n * Google Closure library, though updated to use typed arrays and to better\n * handle astral plane code points.\n */\n\nexport var toUtf8 = function toUtf8(input) {\n  var decoded = \"\";\n\n  for (var i = 0, len = input.length; i < len; i++) {\n    var byte = input[i];\n\n    if (byte < 0x80) {\n      decoded += String.fromCharCode(byte);\n    } else if (192 <= byte && byte < 224) {\n      var nextByte = input[++i];\n      decoded += String.fromCharCode((byte & 31) << 6 | nextByte & 63);\n    } else if (240 <= byte && byte < 365) {\n      var surrogatePair = [byte, input[++i], input[++i], input[++i]];\n      var encoded = \"%\" + surrogatePair.map(function (byteValue) {\n        return byteValue.toString(16);\n      }).join(\"%\");\n      decoded += decodeURIComponent(encoded);\n    } else {\n      decoded += String.fromCharCode((byte & 15) << 12 | (input[++i] & 63) << 6 | input[++i] & 63);\n    }\n  }\n\n  return decoded;\n};","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nimport { RestClient } from './RestClient';\nimport { Amplify, ConsoleLogger as Logger, Credentials } from '@aws-amplify/core';\nvar logger = new Logger('RestAPI');\n/**\n * Export Cloud Logic APIs\n */\n\nvar RestAPIClass =\n/** @class */\nfunction () {\n  /**\n   * Initialize Rest API with AWS configuration\n   * @param {Object} options - Configuration object for API\n   */\n  function RestAPIClass(options) {\n    this._api = null;\n    this.Credentials = Credentials;\n    this._options = options;\n    logger.debug('API Options', this._options);\n  }\n\n  RestAPIClass.prototype.getModuleName = function () {\n    return 'RestAPI';\n  };\n  /**\n   * Configure API part with aws configurations\n   * @param {Object} config - Configuration of the API\n   * @return {Object} - The current configuration\n   */\n\n\n  RestAPIClass.prototype.configure = function (options) {\n    var _a = options || {},\n        _b = _a.API,\n        API = _b === void 0 ? {} : _b,\n        otherOptions = __rest(_a, [\"API\"]);\n\n    var opt = __assign(__assign({}, otherOptions), API);\n\n    logger.debug('configure Rest API', {\n      opt: opt\n    });\n\n    if (opt['aws_project_region']) {\n      if (opt['aws_cloud_logic_custom']) {\n        var custom = opt['aws_cloud_logic_custom'];\n        opt.endpoints = typeof custom === 'string' ? JSON.parse(custom) : custom;\n      }\n\n      opt = Object.assign({}, opt, {\n        region: opt['aws_project_region'],\n        header: {}\n      });\n    }\n\n    if (Array.isArray(opt.endpoints)) {\n      // Check if endpoints has custom_headers and validate if is a function\n      opt.endpoints.forEach(function (endpoint) {\n        if (typeof endpoint.custom_header !== 'undefined' && typeof endpoint.custom_header !== 'function') {\n          logger.warn('Rest API ' + endpoint.name + ', custom_header should be a function');\n          endpoint.custom_header = undefined;\n        }\n      });\n    } else if (this._options && Array.isArray(this._options.endpoints)) {\n      opt.endpoints = this._options.endpoints;\n    } else {\n      opt.endpoints = [];\n    }\n\n    this._options = Object.assign({}, this._options, opt);\n    this.createInstance();\n    return this._options;\n  };\n  /**\n   * Create an instance of API for the library\n   * @return - A promise of true if Success\n   */\n\n\n  RestAPIClass.prototype.createInstance = function () {\n    logger.debug('create Rest API instance');\n    this._api = new RestClient(this._options); // Share Amplify instance with client for SSR\n\n    this._api.Credentials = this.Credentials;\n    return true;\n  };\n  /**\n   * Make a GET request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.get = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.get(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Make a POST request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.post = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.post(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Make a PUT request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.put = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.put(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Make a PATCH request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.patch = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.patch(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Make a DEL request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.del = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.del(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Make a HEAD request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  RestAPIClass.prototype.head = function (apiName, path, init) {\n    try {\n      var apiInfo = this.getEndpointInfo(apiName, path);\n\n      var cancellableToken = this._api.getCancellableToken();\n\n      var initParams = Object.assign({}, init);\n      initParams.cancellableToken = cancellableToken;\n\n      var responsePromise = this._api.head(apiInfo, initParams);\n\n      this._api.updateRequestToBeCancellable(responsePromise, cancellableToken);\n\n      return responsePromise;\n    } catch (err) {\n      return Promise.reject(err.message);\n    }\n  };\n  /**\n   * Checks to see if an error thrown is from an api request cancellation\n   * @param {any} error - Any error\n   * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n   */\n\n\n  RestAPIClass.prototype.isCancel = function (error) {\n    return this._api.isCancel(error);\n  };\n  /**\n   * Cancels an inflight request\n   * @param {any} request - request to cancel\n   * @return {boolean} - A boolean indicating if the request was cancelled\n   */\n\n\n  RestAPIClass.prototype.cancel = function (request, message) {\n    return this._api.cancel(request, message);\n  };\n  /**\n   * Getting endpoint for API\n   * @param {string} apiName - The name of the api\n   * @return {string} - The endpoint of the api\n   */\n\n\n  RestAPIClass.prototype.endpoint = function (apiName) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this._api.endpoint(apiName)];\n      });\n    });\n  };\n  /**\n   * Getting endpoint info for API\n   * @param {string} apiName - The name of the api\n   * @param {string} path - The path of the api that is going to accessed\n   * @return {ApiInfo} - The endpoint information for that api-name\n   */\n\n\n  RestAPIClass.prototype.getEndpointInfo = function (apiName, path) {\n    var cloud_logic_array = this._options.endpoints;\n\n    if (!Array.isArray(cloud_logic_array)) {\n      throw new Error(\"API category not configured\");\n    }\n\n    var apiConfig = cloud_logic_array.find(function (api) {\n      return api.name === apiName;\n    });\n\n    if (!apiConfig) {\n      throw new Error(\"API \" + apiName + \" does not exist\");\n    }\n\n    var response = {\n      endpoint: apiConfig.endpoint + path\n    };\n\n    if (typeof apiConfig.region === 'string') {\n      response.region = apiConfig.region;\n    } else if (typeof this._options.region === 'string') {\n      response.region = this._options.region;\n    }\n\n    if (typeof apiConfig.service === 'string') {\n      response.service = apiConfig.service || 'execute-api';\n    } else {\n      response.service = 'execute-api';\n    }\n\n    if (typeof apiConfig.custom_header === 'function') {\n      response.custom_header = apiConfig.custom_header;\n    } else {\n      response.custom_header = undefined;\n    }\n\n    return response;\n  };\n\n  return RestAPIClass;\n}();\n\nexport { RestAPIClass };\nexport var RestAPI = new RestAPIClass(null);\nAmplify.register(RestAPI);","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nimport { Auth } from '@aws-amplify/auth';\nimport Cache from '@aws-amplify/cache';\nimport { RestAPIClass } from '@aws-amplify/api-rest';\nimport { GraphQLAPIClass } from '@aws-amplify/api-graphql';\nimport { Amplify, ConsoleLogger as Logger, Credentials } from '@aws-amplify/core';\nvar logger = new Logger('API');\n/**\n * @deprecated\n * Use RestApi or GraphQLAPI to reduce your application bundle size\n * Export Cloud Logic APIs\n */\n\nvar APIClass =\n/** @class */\nfunction () {\n  /**\n   * Initialize API with AWS configuration\n   * @param {Object} options - Configuration object for API\n   */\n  function APIClass(options) {\n    this.Auth = Auth;\n    this.Cache = Cache;\n    this.Credentials = Credentials;\n    this._options = options;\n    this._restApi = new RestAPIClass(options);\n    this._graphqlApi = new GraphQLAPIClass(options);\n    logger.debug('API Options', this._options);\n  }\n\n  APIClass.prototype.getModuleName = function () {\n    return 'API';\n  };\n  /**\n   * Configure API part with aws configurations\n   * @param {Object} config - Configuration of the API\n   * @return {Object} - The current configuration\n   */\n\n\n  APIClass.prototype.configure = function (options) {\n    this._options = Object.assign({}, this._options, options); // Share Amplify instance with client for SSR\n\n    this._restApi.Credentials = this.Credentials;\n    this._graphqlApi.Auth = this.Auth;\n    this._graphqlApi.Cache = this.Cache;\n    this._graphqlApi.Credentials = this.Credentials;\n\n    var restAPIConfig = this._restApi.configure(this._options);\n\n    var graphQLAPIConfig = this._graphqlApi.configure(this._options);\n\n    return __assign(__assign({}, restAPIConfig), graphQLAPIConfig);\n  };\n  /**\n   * Make a GET request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.get = function (apiName, path, init) {\n    return this._restApi.get(apiName, path, init);\n  };\n  /**\n   * Make a POST request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.post = function (apiName, path, init) {\n    return this._restApi.post(apiName, path, init);\n  };\n  /**\n   * Make a PUT request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.put = function (apiName, path, init) {\n    return this._restApi.put(apiName, path, init);\n  };\n  /**\n   * Make a PATCH request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.patch = function (apiName, path, init) {\n    return this._restApi.patch(apiName, path, init);\n  };\n  /**\n   * Make a DEL request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.del = function (apiName, path, init) {\n    return this._restApi.del(apiName, path, init);\n  };\n  /**\n   * Make a HEAD request\n   * @param {string} apiName - The api name of the request\n   * @param {string} path - The path of the request\n   * @param {json} [init] - Request extra params\n   * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n   */\n\n\n  APIClass.prototype.head = function (apiName, path, init) {\n    return this._restApi.head(apiName, path, init);\n  };\n  /**\n   * Checks to see if an error thrown is from an api request cancellation\n   * @param {any} error - Any error\n   * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n   */\n\n\n  APIClass.prototype.isCancel = function (error) {\n    return this._restApi.isCancel(error);\n  };\n  /**\n   * Cancels an inflight request\n   * @param {any} request - request to cancel\n   * @return {boolean} - A boolean indicating if the request was cancelled\n   */\n\n\n  APIClass.prototype.cancel = function (request, message) {\n    return this._restApi.cancel(request, message);\n  };\n  /**\n   * Getting endpoint for API\n   * @param {string} apiName - The name of the api\n   * @return {string} - The endpoint of the api\n   */\n\n\n  APIClass.prototype.endpoint = function (apiName) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this._restApi.endpoint(apiName)];\n      });\n    });\n  };\n  /**\n   * to get the operation type\n   * @param operation\n   */\n\n\n  APIClass.prototype.getGraphqlOperationType = function (operation) {\n    return this._graphqlApi.getGraphqlOperationType(operation);\n  };\n  /**\n   * Executes a GraphQL operation\n   *\n   * @param {GraphQLOptions} GraphQL Options\n   * @param {object} additionalHeaders headers to merge in after any `graphql_headers` set in the config\n   * @returns {Promise<GraphQLResult> | Observable<object>}\n   */\n\n\n  APIClass.prototype.graphql = function (options, additionalHeaders) {\n    return this._graphqlApi.graphql(options, additionalHeaders);\n  };\n\n  return APIClass;\n}();\n\nexport { APIClass };\nexport var API = new APIClass(null);\nAmplify.register(API);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Observable = void 0;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n} // === Symbol Support ===\n\n\nvar hasSymbols = function hasSymbols() {\n  return typeof Symbol === 'function';\n};\n\nvar hasSymbol = function hasSymbol(name) {\n  return hasSymbols() && Boolean(Symbol[name]);\n};\n\nvar getSymbol = function getSymbol(name) {\n  return hasSymbol(name) ? Symbol[name] : '@@' + name;\n};\n\nif (hasSymbols() && !hasSymbol('observable')) {\n  Symbol.observable = Symbol('observable');\n}\n\nvar SymbolIterator = getSymbol('iterator');\nvar SymbolObservable = getSymbol('observable');\nvar SymbolSpecies = getSymbol('species'); // === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n  if (value == null) return undefined;\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(e) {\n  if (hostReportError.log) {\n    hostReportError.log(e);\n  } else {\n    setTimeout(function () {\n      throw e;\n    });\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(function () {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  var cleanup = subscription._cleanup;\n  if (cleanup === undefined) return;\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === 'function') {\n      cleanup();\n    } else {\n      var unsubscribe = getMethod(cleanup, 'unsubscribe');\n\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = 'closed';\n}\n\nfunction flushSubscription(subscription) {\n  var queue = subscription._queue;\n\n  if (!queue) {\n    return;\n  }\n\n  subscription._queue = undefined;\n  subscription._state = 'ready';\n\n  for (var i = 0; i < queue.length; ++i) {\n    notifySubscription(subscription, queue[i].type, queue[i].value);\n    if (subscription._state === 'closed') break;\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = 'running';\n  var observer = subscription._observer;\n\n  try {\n    var m = getMethod(observer, type);\n\n    switch (type) {\n      case 'next':\n        if (m) m.call(observer, value);\n        break;\n\n      case 'error':\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n\n      case 'complete':\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === 'closed') return;\n\n  if (subscription._state === 'buffering') {\n    subscription._queue.push({\n      type: type,\n      value: value\n    });\n\n    return;\n  }\n\n  if (subscription._state !== 'ready') {\n    subscription._state = 'buffering';\n    subscription._queue = [{\n      type: type,\n      value: value\n    }];\n    enqueue(function () {\n      return flushSubscription(subscription);\n    });\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nvar Subscription = /*#__PURE__*/function () {\n  function Subscription(observer, subscriber) {\n    _classCallCheck(this, Subscription); // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n\n\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = 'initializing';\n    var subscriptionObserver = new SubscriptionObserver(this);\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === 'initializing') this._state = 'ready';\n  }\n\n  _createClass(Subscription, [{\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this._state !== 'closed') {\n        closeSubscription(this);\n        cleanupSubscription(this);\n      }\n    }\n  }, {\n    key: \"closed\",\n    get: function get() {\n      return this._state === 'closed';\n    }\n  }]);\n\n  return Subscription;\n}();\n\nvar SubscriptionObserver = /*#__PURE__*/function () {\n  function SubscriptionObserver(subscription) {\n    _classCallCheck(this, SubscriptionObserver);\n\n    this._subscription = subscription;\n  }\n\n  _createClass(SubscriptionObserver, [{\n    key: \"next\",\n    value: function next(value) {\n      onNotify(this._subscription, 'next', value);\n    }\n  }, {\n    key: \"error\",\n    value: function error(value) {\n      onNotify(this._subscription, 'error', value);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      onNotify(this._subscription, 'complete');\n    }\n  }, {\n    key: \"closed\",\n    get: function get() {\n      return this._subscription._state === 'closed';\n    }\n  }]);\n\n  return SubscriptionObserver;\n}();\n\nvar Observable = /*#__PURE__*/function () {\n  function Observable(subscriber) {\n    _classCallCheck(this, Observable);\n\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\n    this._subscriber = subscriber;\n  }\n\n  _createClass(Observable, [{\n    key: \"subscribe\",\n    value: function subscribe(observer) {\n      if (typeof observer !== 'object' || observer === null) {\n        observer = {\n          next: observer,\n          error: arguments[1],\n          complete: arguments[2]\n        };\n      }\n\n      return new Subscription(observer, this._subscriber);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (typeof fn !== 'function') {\n          reject(new TypeError(fn + ' is not a function'));\n          return;\n        }\n\n        function done() {\n          subscription.unsubscribe();\n          resolve();\n        }\n\n        var subscription = _this.subscribe({\n          next: function next(value) {\n            try {\n              fn(value, done);\n            } catch (e) {\n              reject(e);\n              subscription.unsubscribe();\n            }\n          },\n          error: reject,\n          complete: resolve\n        });\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(fn) {\n      var _this2 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this2.subscribe({\n          next: function next(value) {\n            try {\n              value = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(fn) {\n      var _this3 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this3.subscribe({\n          next: function next(value) {\n            try {\n              if (!fn(value)) return;\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reduce\",\n    value: function reduce(fn) {\n      var _this4 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      var hasSeed = arguments.length > 1;\n      var hasValue = false;\n      var seed = arguments[1];\n      var acc = seed;\n      return new C(function (observer) {\n        return _this4.subscribe({\n          next: function next(value) {\n            var first = !hasValue;\n            hasValue = true;\n\n            if (!first || hasSeed) {\n              try {\n                acc = fn(acc, value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              acc = value;\n            }\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\n            observer.next(acc);\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"concat\",\n    value: function concat() {\n      var _this5 = this;\n\n      for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscription;\n        var index = 0;\n\n        function startNext(next) {\n          subscription = next.subscribe({\n            next: function next(v) {\n              observer.next(v);\n            },\n            error: function error(e) {\n              observer.error(e);\n            },\n            complete: function complete() {\n              if (index === sources.length) {\n                subscription = undefined;\n                observer.complete();\n              } else {\n                startNext(C.from(sources[index++]));\n              }\n            }\n          });\n        }\n\n        startNext(_this5);\n        return function () {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = undefined;\n          }\n        };\n      });\n    }\n  }, {\n    key: \"flatMap\",\n    value: function flatMap(fn) {\n      var _this6 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscriptions = [];\n\n        var outer = _this6.subscribe({\n          next: function next(value) {\n            if (fn) {\n              try {\n                value = fn(value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            }\n\n            var inner = C.from(value).subscribe({\n              next: function next(value) {\n                observer.next(value);\n              },\n              error: function error(e) {\n                observer.error(e);\n              },\n              complete: function complete() {\n                var i = subscriptions.indexOf(inner);\n                if (i >= 0) subscriptions.splice(i, 1);\n                completeIfDone();\n              }\n            });\n            subscriptions.push(inner);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            completeIfDone();\n          }\n        });\n\n        function completeIfDone() {\n          if (outer.closed && subscriptions.length === 0) observer.complete();\n        }\n\n        return function () {\n          subscriptions.forEach(function (s) {\n            return s.unsubscribe();\n          });\n          outer.unsubscribe();\n        };\n      });\n    }\n  }, {\n    key: SymbolObservable,\n    value: function value() {\n      return this;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(x) {\n      var C = typeof this === 'function' ? this : Observable;\n      if (x == null) throw new TypeError(x + ' is not an object');\n      var method = getMethod(x, SymbolObservable);\n\n      if (method) {\n        var observable = method.call(x);\n        if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\n        if (isObservable(observable) && observable.constructor === C) return observable;\n        return new C(function (observer) {\n          return observable.subscribe(observer);\n        });\n      }\n\n      if (hasSymbol('iterator')) {\n        method = getMethod(x, SymbolIterator);\n\n        if (method) {\n          return new C(function (observer) {\n            enqueue(function () {\n              if (observer.closed) return;\n              var _iteratorNormalCompletion = true;\n              var _didIteratorError = false;\n              var _iteratorError = undefined;\n\n              try {\n                for (var _iterator = method.call(x)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  var _item = _step.value;\n                  observer.next(_item);\n                  if (observer.closed) return;\n                }\n              } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                  }\n                } finally {\n                  if (_didIteratorError) {\n                    throw _iteratorError;\n                  }\n                }\n              }\n\n              observer.complete();\n            });\n          });\n        }\n      }\n\n      if (Array.isArray(x)) {\n        return new C(function (observer) {\n          enqueue(function () {\n            if (observer.closed) return;\n\n            for (var i = 0; i < x.length; ++i) {\n              observer.next(x[i]);\n              if (observer.closed) return;\n            }\n\n            observer.complete();\n          });\n        });\n      }\n\n      throw new TypeError(x + ' is not observable');\n    }\n  }, {\n    key: \"of\",\n    value: function of() {\n      for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        items[_key2] = arguments[_key2];\n      }\n\n      var C = typeof this === 'function' ? this : Observable;\n      return new C(function (observer) {\n        enqueue(function () {\n          if (observer.closed) return;\n\n          for (var i = 0; i < items.length; ++i) {\n            observer.next(items[i]);\n            if (observer.closed) return;\n          }\n\n          observer.complete();\n        });\n      });\n    }\n  }, {\n    key: SymbolSpecies,\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}();\n\nexports.Observable = Observable;\n\nif (hasSymbols()) {\n  Object.defineProperty(Observable, Symbol('extensions'), {\n    value: {\n      symbol: SymbolObservable,\n      hostReportError: hostReportError\n    },\n    configurable: true\n  });\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nimport * as Paho from 'paho-mqtt';\nimport { v4 as uuid } from 'uuid';\nimport Observable from 'zen-observable-ts';\nimport { AbstractPubSubProvider } from './PubSubProvider';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('MqttOverWSProvider');\nexport function mqttTopicMatch(filter, topic) {\n  var filterArray = filter.split('/');\n  var length = filterArray.length;\n  var topicArray = topic.split('/');\n\n  for (var i = 0; i < length; ++i) {\n    var left = filterArray[i];\n    var right = topicArray[i];\n    if (left === '#') return topicArray.length >= length;\n    if (left !== '+' && left !== right) return false;\n  }\n\n  return length === topicArray.length;\n}\n\nvar ClientsQueue =\n/** @class */\nfunction () {\n  function ClientsQueue() {\n    this.promises = new Map();\n  }\n\n  ClientsQueue.prototype.get = function (clientId, clientFactory) {\n    return __awaiter(this, void 0, void 0, function () {\n      var promise;\n      return __generator(this, function (_a) {\n        promise = this.promises.get(clientId);\n\n        if (promise) {\n          return [2\n          /*return*/\n          , promise];\n        }\n\n        promise = clientFactory(clientId);\n        this.promises.set(clientId, promise);\n        return [2\n        /*return*/\n        , promise];\n      });\n    });\n  };\n\n  Object.defineProperty(ClientsQueue.prototype, \"allClients\", {\n    get: function get() {\n      return Array.from(this.promises.keys());\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ClientsQueue.prototype.remove = function (clientId) {\n    this.promises.delete(clientId);\n  };\n\n  return ClientsQueue;\n}();\n\nvar topicSymbol = typeof Symbol !== 'undefined' ? Symbol('topic') : '@@topic';\n\nvar MqttOverWSProvider =\n/** @class */\nfunction (_super) {\n  __extends(MqttOverWSProvider, _super);\n\n  function MqttOverWSProvider(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this, __assign(__assign({}, options), {\n      clientId: options.clientId || uuid()\n    })) || this;\n\n    _this._clientsQueue = new ClientsQueue();\n    _this._topicObservers = new Map();\n    _this._clientIdObservers = new Map();\n    return _this;\n  }\n\n  Object.defineProperty(MqttOverWSProvider.prototype, \"clientId\", {\n    get: function get() {\n      return this.options.clientId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MqttOverWSProvider.prototype, \"endpoint\", {\n    get: function get() {\n      return this.options.aws_pubsub_endpoint;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MqttOverWSProvider.prototype, \"clientsQueue\", {\n    get: function get() {\n      return this._clientsQueue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MqttOverWSProvider.prototype, \"isSSLEnabled\", {\n    get: function get() {\n      return !this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MqttOverWSProvider.prototype.getTopicForValue = function (value) {\n    return typeof value === 'object' && value[topicSymbol];\n  };\n\n  MqttOverWSProvider.prototype.getProviderName = function () {\n    return 'MqttOverWSProvider';\n  };\n\n  MqttOverWSProvider.prototype.onDisconnect = function (_a) {\n    var _this = this;\n\n    var clientId = _a.clientId,\n        errorCode = _a.errorCode,\n        args = __rest(_a, [\"clientId\", \"errorCode\"]);\n\n    if (errorCode !== 0) {\n      logger.warn(clientId, JSON.stringify(__assign({\n        errorCode: errorCode\n      }, args), null, 2));\n      var topicsToDelete_1 = [];\n\n      var clientIdObservers = this._clientIdObservers.get(clientId);\n\n      if (!clientIdObservers) {\n        return;\n      }\n\n      clientIdObservers.forEach(function (observer) {\n        observer.error('Disconnected, error code: ' + errorCode); // removing observers for disconnected clientId\n\n        _this._topicObservers.forEach(function (observerForTopic, observerTopic) {\n          observerForTopic.delete(observer);\n\n          if (observerForTopic.size === 0) {\n            topicsToDelete_1.push(observerTopic);\n          }\n        });\n      }); // forgiving any trace of clientId\n\n      this._clientIdObservers.delete(clientId); // Removing topics that are not listen by an observer\n\n\n      topicsToDelete_1.forEach(function (topic) {\n        _this._topicObservers.delete(topic);\n      });\n    }\n  };\n\n  MqttOverWSProvider.prototype.newClient = function (_a) {\n    var url = _a.url,\n        clientId = _a.clientId;\n    return __awaiter(this, void 0, void 0, function () {\n      var client;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            logger.debug('Creating new MQTT client', clientId);\n            client = new Paho.Client(url, clientId); // client.trace = (args) => logger.debug(clientId, JSON.stringify(args, null, 2));\n\n            client.onMessageArrived = function (_a) {\n              var topic = _a.destinationName,\n                  msg = _a.payloadString;\n\n              _this._onMessage(topic, msg);\n            };\n\n            client.onConnectionLost = function (_a) {\n              var errorCode = _a.errorCode,\n                  args = __rest(_a, [\"errorCode\"]);\n\n              _this.onDisconnect(__assign({\n                clientId: clientId,\n                errorCode: errorCode\n              }, args));\n            };\n\n            return [4\n            /*yield*/\n            , new Promise(function (resolve, reject) {\n              client.connect({\n                useSSL: _this.isSSLEnabled,\n                mqttVersion: 3,\n                onSuccess: function onSuccess() {\n                  return resolve(client);\n                },\n                onFailure: reject\n              });\n            })];\n\n          case 1:\n            _b.sent();\n\n            return [2\n            /*return*/\n            , client];\n        }\n      });\n    });\n  };\n\n  MqttOverWSProvider.prototype.connect = function (clientId, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.clientsQueue.get(clientId, function (clientId) {\n              return _this.newClient(__assign(__assign({}, options), {\n                clientId: clientId\n              }));\n            })];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()];\n        }\n      });\n    });\n  };\n\n  MqttOverWSProvider.prototype.disconnect = function (clientId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var client;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.clientsQueue.get(clientId, function () {\n              return null;\n            })];\n\n          case 1:\n            client = _a.sent();\n\n            if (client && client.isConnected()) {\n              client.disconnect();\n            }\n\n            this.clientsQueue.remove(clientId);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  MqttOverWSProvider.prototype.publish = function (topics, msg) {\n    return __awaiter(this, void 0, void 0, function () {\n      var targetTopics, message, url, client;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            targetTopics = [].concat(topics);\n            message = JSON.stringify(msg);\n            return [4\n            /*yield*/\n            , this.endpoint];\n\n          case 1:\n            url = _a.sent();\n            return [4\n            /*yield*/\n            , this.connect(this.clientId, {\n              url: url\n            })];\n\n          case 2:\n            client = _a.sent();\n            logger.debug('Publishing to topic(s)', targetTopics.join(','), message);\n            targetTopics.forEach(function (topic) {\n              return client.send(topic, message);\n            });\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  MqttOverWSProvider.prototype._onMessage = function (topic, msg) {\n    try {\n      var matchedTopicObservers_1 = [];\n\n      this._topicObservers.forEach(function (observerForTopic, observerTopic) {\n        if (mqttTopicMatch(observerTopic, topic)) {\n          matchedTopicObservers_1.push(observerForTopic);\n        }\n      });\n\n      var parsedMessage_1 = JSON.parse(msg);\n\n      if (typeof parsedMessage_1 === 'object') {\n        parsedMessage_1[topicSymbol] = topic;\n      }\n\n      matchedTopicObservers_1.forEach(function (observersForTopic) {\n        observersForTopic.forEach(function (observer) {\n          return observer.next(parsedMessage_1);\n        });\n      });\n    } catch (error) {\n      logger.warn('Error handling message', error, msg);\n    }\n  };\n\n  MqttOverWSProvider.prototype.subscribe = function (topics, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var targetTopics = [].concat(topics);\n    logger.debug('Subscribing to topic(s)', targetTopics.join(','));\n    return new Observable(function (observer) {\n      targetTopics.forEach(function (topic) {\n        // this._topicObservers is used to notify the observers according to the topic received on the message\n        var observersForTopic = _this._topicObservers.get(topic);\n\n        if (!observersForTopic) {\n          observersForTopic = new Set();\n\n          _this._topicObservers.set(topic, observersForTopic);\n        }\n\n        observersForTopic.add(observer);\n      }); // @ts-ignore\n\n      var client;\n      var _a = options.clientId,\n          clientId = _a === void 0 ? _this.clientId : _a; // this._clientIdObservers is used to close observers when client gets disconnected\n\n      var observersForClientId = _this._clientIdObservers.get(clientId);\n\n      if (!observersForClientId) {\n        observersForClientId = new Set();\n      }\n\n      observersForClientId.add(observer);\n\n      _this._clientIdObservers.set(clientId, observersForClientId);\n\n      (function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var _a, url, _b, e_1;\n\n          return __generator(this, function (_c) {\n            switch (_c.label) {\n              case 0:\n                _a = options.url;\n                if (!(_a === void 0)) return [3\n                /*break*/\n                , 2];\n                return [4\n                /*yield*/\n                , this.endpoint];\n\n              case 1:\n                _b = _c.sent();\n                return [3\n                /*break*/\n                , 3];\n\n              case 2:\n                _b = _a;\n                _c.label = 3;\n\n              case 3:\n                url = _b;\n                _c.label = 4;\n\n              case 4:\n                _c.trys.push([4, 6,, 7]);\n\n                return [4\n                /*yield*/\n                , this.connect(clientId, {\n                  url: url\n                })];\n\n              case 5:\n                client = _c.sent();\n                targetTopics.forEach(function (topic) {\n                  client.subscribe(topic);\n                });\n                return [3\n                /*break*/\n                , 7];\n\n              case 6:\n                e_1 = _c.sent();\n                observer.error(e_1);\n                return [3\n                /*break*/\n                , 7];\n\n              case 7:\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      })();\n\n      return function () {\n        logger.debug('Unsubscribing from topic(s)', targetTopics.join(','));\n\n        if (client) {\n          _this._clientIdObservers.get(clientId).delete(observer); // No more observers per client => client not needed anymore\n\n\n          if (_this._clientIdObservers.get(clientId).size === 0) {\n            _this.disconnect(clientId);\n\n            _this._clientIdObservers.delete(clientId);\n          }\n\n          targetTopics.forEach(function (topic) {\n            var observersForTopic = _this._topicObservers.get(topic) || new Set();\n            observersForTopic.delete(observer); // if no observers exists for the topic, topic should be removed\n\n            if (observersForTopic.size === 0) {\n              _this._topicObservers.delete(topic);\n\n              if (client.isConnected()) {\n                client.unsubscribe(topic);\n              }\n            }\n          });\n        }\n\n        return null;\n      };\n    });\n  };\n\n  return MqttOverWSProvider;\n}(AbstractPubSubProvider);\n\nexport { MqttOverWSProvider };","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractPubSubProvider');\n\nvar AbstractPubSubProvider =\n/** @class */\nfunction () {\n  function AbstractPubSubProvider(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this._config = options;\n  }\n\n  AbstractPubSubProvider.prototype.configure = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    this._config = __assign(__assign({}, config), this._config);\n    logger.debug(\"configure \" + this.getProviderName(), this._config);\n    return this.options;\n  };\n\n  AbstractPubSubProvider.prototype.getCategory = function () {\n    return 'PubSub';\n  };\n\n  Object.defineProperty(AbstractPubSubProvider.prototype, \"options\", {\n    get: function get() {\n      return __assign({}, this._config);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return AbstractPubSubProvider;\n}();\n\nexport { AbstractPubSubProvider };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nimport Observable from 'zen-observable-ts';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { MqttOverWSProvider } from './MqttOverWSProvider';\nvar logger = new Logger('AWSAppSyncProvider');\n\nvar AWSAppSyncProvider =\n/** @class */\nfunction (_super) {\n  __extends(AWSAppSyncProvider, _super);\n\n  function AWSAppSyncProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._topicClient = new Map();\n    _this._topicAlias = new Map();\n    return _this;\n  }\n\n  Object.defineProperty(AWSAppSyncProvider.prototype, \"endpoint\", {\n    get: function get() {\n      throw new Error('Not supported');\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  AWSAppSyncProvider.prototype.getProviderName = function () {\n    return 'AWSAppSyncProvider';\n  };\n\n  AWSAppSyncProvider.prototype.publish = function (topics, msg, options) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error('Operation not supported');\n      });\n    });\n  };\n\n  AWSAppSyncProvider.prototype._cleanUp = function (clientId) {\n    var _this = this;\n\n    var topicsForClient = Array.from(this._topicClient.entries()).filter(function (_a) {\n      var _b = __read(_a, 2),\n          c = _b[1];\n\n      return c.clientId === clientId;\n    }).map(function (_a) {\n      var _b = __read(_a, 1),\n          t = _b[0];\n\n      return t;\n    });\n    topicsForClient.forEach(function (t) {\n      return _this._cleanUpForTopic(t);\n    });\n  };\n\n  AWSAppSyncProvider.prototype._cleanUpForTopic = function (topic) {\n    this._topicClient.delete(topic);\n\n    this._topicAlias.delete(topic);\n  };\n\n  AWSAppSyncProvider.prototype.onDisconnect = function (_a) {\n    var _this = this;\n\n    var clientId = _a.clientId,\n        errorCode = _a.errorCode,\n        args = __rest(_a, [\"clientId\", \"errorCode\"]);\n\n    if (errorCode !== 0) {\n      var topicsForClient = Array.from(this._topicClient.entries()).filter(function (_a) {\n        var _b = __read(_a, 2),\n            c = _b[1];\n\n        return c.clientId === clientId;\n      }).map(function (_a) {\n        var _b = __read(_a, 1),\n            t = _b[0];\n\n        return t;\n      });\n      topicsForClient.forEach(function (topic) {\n        if (_this._topicObservers.has(topic)) {\n          _this._topicObservers.get(topic).forEach(function (obs) {\n            if (!obs.closed) {\n              obs.error(args);\n            }\n          });\n\n          _this._topicObservers.delete(topic);\n        }\n      });\n\n      this._cleanUp(clientId);\n    }\n  };\n\n  AWSAppSyncProvider.prototype.disconnect = function (clientId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var client;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.clientsQueue.get(clientId, function () {\n              return null;\n            })];\n\n          case 1:\n            client = _a.sent();\n            return [4\n            /*yield*/\n            , _super.prototype.disconnect.call(this, clientId)];\n\n          case 2:\n            _a.sent();\n\n            this._cleanUp(clientId);\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncProvider.prototype.subscribe = function (topics, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var result = new Observable(function (observer) {\n      var targetTopics = [].concat(topics);\n      logger.debug('Subscribing to topic(s)', targetTopics.join(','));\n\n      (function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var _a, mqttConnections, newSubscriptions, newAliases, map;\n\n          var _this = this;\n\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                // Add these topics to map\n                targetTopics.forEach(function (t) {\n                  if (!_this._topicObservers.has(t)) {\n                    _this._topicObservers.set(t, new Set());\n                  }\n\n                  _this._topicObservers.get(t).add(observer);\n                });\n                _a = options.mqttConnections, mqttConnections = _a === void 0 ? [] : _a, newSubscriptions = options.newSubscriptions;\n                newAliases = Object.entries(newSubscriptions).map(function (_a) {\n                  var _b = __read(_a, 2),\n                      alias = _b[0],\n                      v = _b[1];\n\n                  return [v.topic, alias];\n                }); // Merge new aliases with old ones\n\n                this._topicAlias = new Map(__spread(Array.from(this._topicAlias.entries()), newAliases));\n                map = Object.entries(targetTopics.reduce(function (acc, elem) {\n                  var connectionInfoForTopic = mqttConnections.find(function (c) {\n                    return c.topics.indexOf(elem) > -1;\n                  });\n\n                  if (connectionInfoForTopic) {\n                    var clientId = connectionInfoForTopic.client,\n                        url = connectionInfoForTopic.url;\n\n                    if (!acc[clientId]) {\n                      acc[clientId] = {\n                        url: url,\n                        topics: new Set()\n                      };\n                    }\n\n                    acc[clientId].topics.add(elem);\n                  }\n\n                  return acc;\n                }, {})); // reconnect everything we have in the map\n\n                return [4\n                /*yield*/\n                , Promise.all(map.map(function (_a) {\n                  var _b = __read(_a, 2),\n                      clientId = _b[0],\n                      _c = _b[1],\n                      url = _c.url,\n                      topics = _c.topics;\n\n                  return __awaiter(_this, void 0, void 0, function () {\n                    var client, err_1;\n\n                    var _this = this;\n\n                    return __generator(this, function (_d) {\n                      switch (_d.label) {\n                        case 0:\n                          client = null;\n                          _d.label = 1;\n\n                        case 1:\n                          _d.trys.push([1, 3,, 4]);\n\n                          return [4\n                          /*yield*/\n                          , this.connect(clientId, {\n                            clientId: clientId,\n                            url: url\n                          })];\n\n                        case 2:\n                          client = _d.sent();\n                          return [3\n                          /*break*/\n                          , 4];\n\n                        case 3:\n                          err_1 = _d.sent();\n                          observer.error({\n                            message: 'Failed to connect',\n                            error: err_1\n                          });\n                          observer.complete();\n                          return [2\n                          /*return*/\n                          , undefined];\n\n                        case 4:\n                          // subscribe to all topics for this client\n                          // store topic-client mapping\n                          topics.forEach(function (topic) {\n                            if (client.isConnected()) {\n                              client.subscribe(topic);\n\n                              _this._topicClient.set(topic, client);\n                            }\n                          });\n                          return [2\n                          /*return*/\n                          , client];\n                      }\n                    });\n                  });\n                }))];\n\n              case 1:\n                // reconnect everything we have in the map\n                _b.sent();\n\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      })();\n\n      return function () {\n        logger.debug('Unsubscribing from topic(s)', targetTopics.join(','));\n        targetTopics.forEach(function (t) {\n          var client = _this._topicClient.get(t);\n\n          if (client && client.isConnected()) {\n            client.unsubscribe(t);\n\n            _this._topicClient.delete(t);\n\n            if (!Array.from(_this._topicClient.values()).some(function (c) {\n              return c === client;\n            })) {\n              _this.disconnect(client.clientId);\n            }\n          }\n\n          _this._topicObservers.delete(t);\n        });\n      };\n    });\n    return Observable.from(result).map(function (value) {\n      var topic = _this.getTopicForValue(value);\n\n      var alias = _this._topicAlias.get(topic);\n\n      value.data = Object.entries(value.data).reduce(function (obj, _a) {\n        var _b = __read(_a, 2),\n            origKey = _b[0],\n            val = _b[1];\n\n        return obj[alias || origKey] = val, obj;\n      }, {});\n      return value;\n    });\n  };\n\n  return AWSAppSyncProvider;\n}(MqttOverWSProvider);\n\nexport { AWSAppSyncProvider };","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nexport function getLocation(source, position) {\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\n  var line = 1;\n  var column = position + 1;\n  var match;\n\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\n    line += 1;\n    column = position + 1 - (match.index + match[0].length);\n  }\n\n  return {\n    line: line,\n    column: column\n  };\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { getLocation } from '../language/location';\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n */\n\nexport function printError(error) {\n  var printedLocations = [];\n\n  if (error.nodes) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = error.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var node = _step.value;\n\n        if (node.loc) {\n          printedLocations.push(highlightSourceAtLocation(node.loc.source, getLocation(node.loc.source, node.loc.start)));\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } else if (error.source && error.locations) {\n    var source = error.source;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = error.locations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var location = _step2.value;\n        printedLocations.push(highlightSourceAtLocation(source, location));\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n\n  return printedLocations.length === 0 ? error.message : [error.message].concat(printedLocations).join('\\n\\n') + '\\n';\n}\n/**\n * Render a helpful description of the location of the error in the GraphQL\n * Source document.\n */\n\nfunction highlightSourceAtLocation(source, location) {\n  var firstLineColumnOffset = source.locationOffset.column - 1;\n  var body = whitespace(firstLineColumnOffset) + source.body;\n  var lineIndex = location.line - 1;\n  var lineOffset = source.locationOffset.line - 1;\n  var lineNum = location.line + lineOffset;\n  var columnOffset = location.line === 1 ? firstLineColumnOffset : 0;\n  var columnNum = location.column + columnOffset;\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\n  return \"\".concat(source.name, \" (\").concat(lineNum, \":\").concat(columnNum, \")\\n\") + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\n  [\"\".concat(lineNum - 1, \": \"), lines[lineIndex - 1]], [\"\".concat(lineNum, \": \"), lines[lineIndex]], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1, \": \"), lines[lineIndex + 1]]]);\n}\n\nfunction printPrefixedLines(lines) {\n  var existingLines = lines.filter(function (_ref) {\n    var _ = _ref[0],\n        line = _ref[1];\n    return line !== undefined;\n  });\n  var padLen = 0;\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = existingLines[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref4 = _step3.value;\n      var prefix = _ref4[0];\n      padLen = Math.max(padLen, prefix.length);\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return existingLines.map(function (_ref3) {\n    var prefix = _ref3[0],\n        line = _ref3[1];\n    return lpad(padLen, prefix) + line;\n  }).join('\\n');\n}\n\nfunction whitespace(len) {\n  return Array(len + 1).join(' ');\n}\n\nfunction lpad(len, str) {\n  return whitespace(len - str.length) + str;\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { printError } from './printError';\nimport { getLocation } from '../language/location';\nexport function GraphQLError( // eslint-disable-line no-redeclare\nmessage, nodes, source, positions, path, originalError, extensions) {\n  // Compute list of blame nodes.\n  var _nodes = Array.isArray(nodes) ? nodes.length !== 0 ? nodes : undefined : nodes ? [nodes] : undefined; // Compute locations in the source for the given nodes/positions.\n\n\n  var _source = source;\n\n  if (!_source && _nodes) {\n    var node = _nodes[0];\n    _source = node && node.loc && node.loc.source;\n  }\n\n  var _positions = positions;\n\n  if (!_positions && _nodes) {\n    _positions = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(node.loc.start);\n      }\n\n      return list;\n    }, []);\n  }\n\n  if (_positions && _positions.length === 0) {\n    _positions = undefined;\n  }\n\n  var _locations;\n\n  if (positions && source) {\n    _locations = positions.map(function (pos) {\n      return getLocation(source, pos);\n    });\n  } else if (_nodes) {\n    _locations = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(getLocation(node.loc.source, node.loc.start));\n      }\n\n      return list;\n    }, []);\n  }\n\n  var _extensions = extensions || originalError && originalError.extensions;\n\n  Object.defineProperties(this, {\n    message: {\n      value: message,\n      // By being enumerable, JSON.stringify will include `message` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: true,\n      writable: true\n    },\n    locations: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _locations || undefined,\n      // By being enumerable, JSON.stringify will include `locations` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_locations)\n    },\n    path: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: path || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(path)\n    },\n    nodes: {\n      value: _nodes || undefined\n    },\n    source: {\n      value: _source || undefined\n    },\n    positions: {\n      value: _positions || undefined\n    },\n    originalError: {\n      value: originalError\n    },\n    extensions: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _extensions || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_extensions)\n    }\n  }); // Include (non-enumerable) stack trace.\n\n  if (originalError && originalError.stack) {\n    Object.defineProperty(this, 'stack', {\n      value: originalError.stack,\n      writable: true,\n      configurable: true\n    });\n  } else if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, GraphQLError);\n  } else {\n    Object.defineProperty(this, 'stack', {\n      value: Error().stack,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nGraphQLError.prototype = Object.create(Error.prototype, {\n  constructor: {\n    value: GraphQLError\n  },\n  name: {\n    value: 'GraphQLError'\n  },\n  toString: {\n    value: function toString() {\n      return printError(this);\n    }\n  }\n});","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nimport Observable from 'zen-observable-ts';\nimport { GraphQLError } from 'graphql';\nimport * as url from 'url';\nimport { v4 as uuid } from 'uuid';\nimport { Buffer } from 'buffer';\nimport { Logger, Credentials, Signer, Hub, Constants, USER_AGENT_HEADER, jitteredExponentialRetry, NonRetryableError } from '@aws-amplify/core';\nimport Cache from '@aws-amplify/cache';\nimport Auth from '@aws-amplify/auth';\nimport { AbstractPubSubProvider } from './PubSubProvider';\nimport { CONTROL_MSG } from '../index';\nvar logger = new Logger('AWSAppSyncRealTimeProvider');\nvar AMPLIFY_SYMBOL = typeof Symbol !== 'undefined' && typeof Symbol.for === 'function' ? Symbol.for('amplify_default') : '@@amplify_default';\n\nvar dispatchApiEvent = function dispatchApiEvent(event, data, message) {\n  Hub.dispatch('api', {\n    event: event,\n    data: data,\n    message: message\n  }, 'PubSub', AMPLIFY_SYMBOL);\n};\n\nvar MAX_DELAY_MS = 5000;\nvar NON_RETRYABLE_CODES = [400, 401, 403];\nvar MESSAGE_TYPES;\n\n(function (MESSAGE_TYPES) {\n  /**\n   * Client -> Server message.\n   * This message type is the first message after handshake and this will initialize AWS AppSync RealTime communication\n   */\n  MESSAGE_TYPES[\"GQL_CONNECTION_INIT\"] = \"connection_init\";\n  /**\n   * Server -> Client message\n   * This message type is in case there is an issue with AWS AppSync RealTime when establishing connection\n   */\n\n  MESSAGE_TYPES[\"GQL_CONNECTION_ERROR\"] = \"connection_error\";\n  /**\n   * Server -> Client message.\n   * This message type is for the ack response from AWS AppSync RealTime for GQL_CONNECTION_INIT message\n   */\n\n  MESSAGE_TYPES[\"GQL_CONNECTION_ACK\"] = \"connection_ack\";\n  /**\n   * Client -> Server message.\n   * This message type is for register subscriptions with AWS AppSync RealTime\n   */\n\n  MESSAGE_TYPES[\"GQL_START\"] = \"start\";\n  /**\n   * Server -> Client message.\n   * This message type is for the ack response from AWS AppSync RealTime for GQL_START message\n   */\n\n  MESSAGE_TYPES[\"GQL_START_ACK\"] = \"start_ack\";\n  /**\n   * Server -> Client message.\n   * This message type is for subscription message from AWS AppSync RealTime\n   */\n\n  MESSAGE_TYPES[\"GQL_DATA\"] = \"data\";\n  /**\n   * Server -> Client message.\n   * This message type helps the client to know is still receiving messages from AWS AppSync RealTime\n   */\n\n  MESSAGE_TYPES[\"GQL_CONNECTION_KEEP_ALIVE\"] = \"ka\";\n  /**\n   * Client -> Server message.\n   * This message type is for unregister subscriptions with AWS AppSync RealTime\n   */\n\n  MESSAGE_TYPES[\"GQL_STOP\"] = \"stop\";\n  /**\n   * Server -> Client message.\n   * This message type is for the ack response from AWS AppSync RealTime for GQL_STOP message\n   */\n\n  MESSAGE_TYPES[\"GQL_COMPLETE\"] = \"complete\";\n  /**\n   * Server -> Client message.\n   * This message type is for sending error messages from AWS AppSync RealTime to the client\n   */\n\n  MESSAGE_TYPES[\"GQL_ERROR\"] = \"error\";\n})(MESSAGE_TYPES || (MESSAGE_TYPES = {}));\n\nvar SUBSCRIPTION_STATUS;\n\n(function (SUBSCRIPTION_STATUS) {\n  SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"PENDING\"] = 0] = \"PENDING\";\n  SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"CONNECTED\"] = 1] = \"CONNECTED\";\n  SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"FAILED\"] = 2] = \"FAILED\";\n})(SUBSCRIPTION_STATUS || (SUBSCRIPTION_STATUS = {}));\n\nvar SOCKET_STATUS;\n\n(function (SOCKET_STATUS) {\n  SOCKET_STATUS[SOCKET_STATUS[\"CLOSED\"] = 0] = \"CLOSED\";\n  SOCKET_STATUS[SOCKET_STATUS[\"READY\"] = 1] = \"READY\";\n  SOCKET_STATUS[SOCKET_STATUS[\"CONNECTING\"] = 2] = \"CONNECTING\";\n})(SOCKET_STATUS || (SOCKET_STATUS = {}));\n\nvar AWS_APPSYNC_REALTIME_HEADERS = {\n  accept: 'application/json, text/javascript',\n  'content-encoding': 'amz-1.0',\n  'content-type': 'application/json; charset=UTF-8'\n};\n/**\n * Time in milleseconds to wait for GQL_CONNECTION_INIT message\n */\n\nvar CONNECTION_INIT_TIMEOUT = 15000;\n/**\n * Time in milleseconds to wait for GQL_START_ACK message\n */\n\nvar START_ACK_TIMEOUT = 15000;\n/**\n * Default Time in milleseconds to wait for GQL_CONNECTION_KEEP_ALIVE message\n */\n\nvar DEFAULT_KEEP_ALIVE_TIMEOUT = 5 * 60 * 1000;\n\nvar AWSAppSyncRealTimeProvider =\n/** @class */\nfunction (_super) {\n  __extends(AWSAppSyncRealTimeProvider, _super);\n\n  function AWSAppSyncRealTimeProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.socketStatus = SOCKET_STATUS.CLOSED;\n    _this.keepAliveTimeout = DEFAULT_KEEP_ALIVE_TIMEOUT;\n    _this.subscriptionObserverMap = new Map();\n    _this.promiseArray = [];\n    return _this;\n  }\n\n  AWSAppSyncRealTimeProvider.prototype.getProviderName = function () {\n    return 'AWSAppSyncRealTimeProvider';\n  };\n\n  AWSAppSyncRealTimeProvider.prototype.newClient = function () {\n    throw new Error('Not used here');\n  };\n\n  AWSAppSyncRealTimeProvider.prototype.publish = function (_topics, _msg, _options) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error('Operation not supported');\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype.subscribe = function (_topics, options) {\n    var _this = this;\n\n    var appSyncGraphqlEndpoint = options.appSyncGraphqlEndpoint;\n    return new Observable(function (observer) {\n      if (!appSyncGraphqlEndpoint) {\n        observer.error({\n          errors: [__assign({}, new GraphQLError(\"Subscribe only available for AWS AppSync endpoint\"))]\n        });\n        observer.complete();\n      } else {\n        var subscriptionId_1 = uuid();\n\n        _this._startSubscriptionWithAWSAppSyncRealTime({\n          options: options,\n          observer: observer,\n          subscriptionId: subscriptionId_1\n        });\n\n        return function () {\n          return __awaiter(_this, void 0, void 0, function () {\n            var subscriptionState, err_1;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  _a.trys.push([0, 2, 3, 4]); // Waiting that subscription has been connected before trying to unsubscribe\n\n\n                  return [4\n                  /*yield*/\n                  , this._waitForSubscriptionToBeConnected(subscriptionId_1)];\n\n                case 1:\n                  // Waiting that subscription has been connected before trying to unsubscribe\n                  _a.sent();\n\n                  subscriptionState = (this.subscriptionObserverMap.get(subscriptionId_1) || {}).subscriptionState;\n\n                  if (!subscriptionState) {\n                    // subscription already unsubscribed\n                    return [2\n                    /*return*/\n                    ];\n                  }\n\n                  if (subscriptionState === SUBSCRIPTION_STATUS.CONNECTED) {\n                    this._sendUnsubscriptionMessage(subscriptionId_1);\n                  } else {\n                    throw new Error('Subscription never connected');\n                  }\n\n                  return [3\n                  /*break*/\n                  , 4];\n\n                case 2:\n                  err_1 = _a.sent();\n                  logger.debug(\"Error while unsubscribing \" + err_1);\n                  return [3\n                  /*break*/\n                  , 4];\n\n                case 3:\n                  this._removeSubscriptionObserver(subscriptionId_1);\n\n                  return [7\n                  /*endfinally*/\n                  ];\n\n                case 4:\n                  return [2\n                  /*return*/\n                  ];\n              }\n            });\n          });\n        };\n      }\n    });\n  };\n\n  Object.defineProperty(AWSAppSyncRealTimeProvider.prototype, \"isSSLEnabled\", {\n    get: function get() {\n      return !this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  AWSAppSyncRealTimeProvider.prototype._startSubscriptionWithAWSAppSyncRealTime = function (_a) {\n    var options = _a.options,\n        observer = _a.observer,\n        subscriptionId = _a.subscriptionId;\n    return __awaiter(this, void 0, void 0, function () {\n      var appSyncGraphqlEndpoint, authenticationType, query, variables, apiKey, region, _b, graphql_headers, _c, additionalHeaders, subscriptionState, data, dataString, headerObj, _d, _e, subscriptionMessage, stringToAWSRealTime, err_2, _f, message, subscriptionFailedCallback_1, _g, subscriptionFailedCallback, subscriptionReadyCallback;\n\n      var _h;\n\n      var _this = this;\n\n      return __generator(this, function (_j) {\n        switch (_j.label) {\n          case 0:\n            appSyncGraphqlEndpoint = options.appSyncGraphqlEndpoint, authenticationType = options.authenticationType, query = options.query, variables = options.variables, apiKey = options.apiKey, region = options.region, _b = options.graphql_headers, graphql_headers = _b === void 0 ? function () {\n              return {};\n            } : _b, _c = options.additionalHeaders, additionalHeaders = _c === void 0 ? {} : _c;\n            subscriptionState = SUBSCRIPTION_STATUS.PENDING;\n            data = {\n              query: query,\n              variables: variables\n            }; // Having a subscription id map will make it simple to forward messages received\n\n            this.subscriptionObserverMap.set(subscriptionId, {\n              observer: observer,\n              query: query,\n              variables: variables,\n              subscriptionState: subscriptionState,\n              startAckTimeoutId: null\n            });\n            dataString = JSON.stringify(data);\n            _d = [{}];\n            return [4\n            /*yield*/\n            , this._awsRealTimeHeaderBasedAuth({\n              apiKey: apiKey,\n              appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n              authenticationType: authenticationType,\n              payload: dataString,\n              canonicalUri: '',\n              region: region\n            })];\n\n          case 1:\n            _e = [__assign.apply(void 0, _d.concat([_j.sent()]))];\n            return [4\n            /*yield*/\n            , graphql_headers()];\n\n          case 2:\n            headerObj = __assign.apply(void 0, [__assign.apply(void 0, [__assign.apply(void 0, _e.concat([_j.sent()])), additionalHeaders]), (_h = {}, _h[USER_AGENT_HEADER] = Constants.userAgent, _h)]);\n            subscriptionMessage = {\n              id: subscriptionId,\n              payload: {\n                data: dataString,\n                extensions: {\n                  authorization: __assign({}, headerObj)\n                }\n              },\n              type: MESSAGE_TYPES.GQL_START\n            };\n            stringToAWSRealTime = JSON.stringify(subscriptionMessage);\n            _j.label = 3;\n\n          case 3:\n            _j.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , this._initializeWebSocketConnection({\n              apiKey: apiKey,\n              appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n              authenticationType: authenticationType,\n              region: region\n            })];\n\n          case 4:\n            _j.sent();\n\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_2 = _j.sent();\n            logger.debug({\n              err: err_2\n            });\n            _f = err_2.message, message = _f === void 0 ? '' : _f;\n            observer.error({\n              errors: [__assign({}, new GraphQLError(\"Connection failed: \" + message))]\n            });\n            observer.complete();\n            subscriptionFailedCallback_1 = (this.subscriptionObserverMap.get(subscriptionId) || {}).subscriptionFailedCallback; // Notify concurrent unsubscription\n\n            if (typeof subscriptionFailedCallback_1 === 'function') {\n              subscriptionFailedCallback_1();\n            }\n\n            return [2\n            /*return*/\n            ];\n\n          case 6:\n            _g = this.subscriptionObserverMap.get(subscriptionId), subscriptionFailedCallback = _g.subscriptionFailedCallback, subscriptionReadyCallback = _g.subscriptionReadyCallback; // This must be done before sending the message in order to be listening immediately\n\n            this.subscriptionObserverMap.set(subscriptionId, {\n              observer: observer,\n              subscriptionState: subscriptionState,\n              variables: variables,\n              query: query,\n              subscriptionReadyCallback: subscriptionReadyCallback,\n              subscriptionFailedCallback: subscriptionFailedCallback,\n              startAckTimeoutId: setTimeout(function () {\n                _this._timeoutStartSubscriptionAck.call(_this, subscriptionId);\n              }, START_ACK_TIMEOUT)\n            });\n\n            if (this.awsRealTimeSocket) {\n              this.awsRealTimeSocket.send(stringToAWSRealTime);\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }; // Waiting that subscription has been connected before trying to unsubscribe\n\n\n  AWSAppSyncRealTimeProvider.prototype._waitForSubscriptionToBeConnected = function (subscriptionId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var subscriptionState;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        subscriptionState = this.subscriptionObserverMap.get(subscriptionId).subscriptionState; // This in case unsubscribe is invoked before sending start subscription message\n\n        if (subscriptionState === SUBSCRIPTION_STATUS.PENDING) {\n          return [2\n          /*return*/\n          , new Promise(function (res, rej) {\n            var _a = _this.subscriptionObserverMap.get(subscriptionId),\n                observer = _a.observer,\n                subscriptionState = _a.subscriptionState,\n                variables = _a.variables,\n                query = _a.query;\n\n            _this.subscriptionObserverMap.set(subscriptionId, {\n              observer: observer,\n              subscriptionState: subscriptionState,\n              variables: variables,\n              query: query,\n              subscriptionReadyCallback: res,\n              subscriptionFailedCallback: rej\n            });\n          })];\n        }\n\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._sendUnsubscriptionMessage = function (subscriptionId) {\n    try {\n      if (this.awsRealTimeSocket && this.awsRealTimeSocket.readyState === WebSocket.OPEN && this.socketStatus === SOCKET_STATUS.READY) {\n        // Preparing unsubscribe message to stop receiving messages for that subscription\n        var unsubscribeMessage = {\n          id: subscriptionId,\n          type: MESSAGE_TYPES.GQL_STOP\n        };\n        var stringToAWSRealTime = JSON.stringify(unsubscribeMessage);\n        this.awsRealTimeSocket.send(stringToAWSRealTime);\n      }\n    } catch (err) {\n      // If GQL_STOP is not sent because of disconnection issue, then there is nothing the client can do\n      logger.debug({\n        err: err\n      });\n    }\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._removeSubscriptionObserver = function (subscriptionId) {\n    this.subscriptionObserverMap.delete(subscriptionId); // Verifying 1000ms after removing subscription in case there are new subscription unmount/mount\n\n    setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._closeSocketIfRequired = function () {\n    if (this.subscriptionObserverMap.size > 0) {\n      // Active subscriptions on the WebSocket\n      return;\n    }\n\n    if (!this.awsRealTimeSocket) {\n      this.socketStatus = SOCKET_STATUS.CLOSED;\n      return;\n    }\n\n    if (this.awsRealTimeSocket.bufferedAmount > 0) {\n      // Still data on the WebSocket\n      setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n    } else {\n      logger.debug('closing WebSocket...');\n      clearTimeout(this.keepAliveTimeoutId);\n      var tempSocket = this.awsRealTimeSocket; // Cleaning callbacks to avoid race condition, socket still exists\n\n      tempSocket.onclose = undefined;\n      tempSocket.onerror = undefined;\n      tempSocket.close(1000);\n      this.awsRealTimeSocket = null;\n      this.socketStatus = SOCKET_STATUS.CLOSED;\n    }\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._handleIncomingSubscriptionMessage = function (message) {\n    logger.debug(\"subscription message from AWS AppSync RealTime: \" + message.data);\n\n    var _a = JSON.parse(message.data),\n        _b = _a.id,\n        id = _b === void 0 ? '' : _b,\n        payload = _a.payload,\n        type = _a.type;\n\n    var _c = this.subscriptionObserverMap.get(id) || {},\n        _d = _c.observer,\n        observer = _d === void 0 ? null : _d,\n        _e = _c.query,\n        query = _e === void 0 ? '' : _e,\n        _f = _c.variables,\n        variables = _f === void 0 ? {} : _f,\n        startAckTimeoutId = _c.startAckTimeoutId,\n        subscriptionReadyCallback = _c.subscriptionReadyCallback,\n        subscriptionFailedCallback = _c.subscriptionFailedCallback;\n\n    logger.debug({\n      id: id,\n      observer: observer,\n      query: query,\n      variables: variables\n    });\n\n    if (type === MESSAGE_TYPES.GQL_DATA && payload && payload.data) {\n      if (observer) {\n        observer.next(payload);\n      } else {\n        logger.debug(\"observer not found for id: \" + id);\n      }\n\n      return;\n    }\n\n    if (type === MESSAGE_TYPES.GQL_START_ACK) {\n      logger.debug(\"subscription ready for \" + JSON.stringify({\n        query: query,\n        variables: variables\n      }));\n\n      if (typeof subscriptionReadyCallback === 'function') {\n        subscriptionReadyCallback();\n      }\n\n      clearTimeout(startAckTimeoutId);\n      dispatchApiEvent(CONTROL_MSG.SUBSCRIPTION_ACK, {\n        query: query,\n        variables: variables\n      }, 'Connection established for subscription');\n      var subscriptionState = SUBSCRIPTION_STATUS.CONNECTED;\n      this.subscriptionObserverMap.set(id, {\n        observer: observer,\n        query: query,\n        variables: variables,\n        startAckTimeoutId: null,\n        subscriptionState: subscriptionState,\n        subscriptionReadyCallback: subscriptionReadyCallback,\n        subscriptionFailedCallback: subscriptionFailedCallback\n      }); // TODO: emit event on hub but it requires to store the id first\n\n      return;\n    }\n\n    if (type === MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE) {\n      clearTimeout(this.keepAliveTimeoutId);\n      this.keepAliveTimeoutId = setTimeout(this._errorDisconnect.bind(this, CONTROL_MSG.TIMEOUT_DISCONNECT), this.keepAliveTimeout);\n      return;\n    }\n\n    if (type === MESSAGE_TYPES.GQL_ERROR) {\n      var subscriptionState = SUBSCRIPTION_STATUS.FAILED;\n      this.subscriptionObserverMap.set(id, {\n        observer: observer,\n        query: query,\n        variables: variables,\n        startAckTimeoutId: startAckTimeoutId,\n        subscriptionReadyCallback: subscriptionReadyCallback,\n        subscriptionFailedCallback: subscriptionFailedCallback,\n        subscriptionState: subscriptionState\n      });\n      observer.error({\n        errors: [__assign({}, new GraphQLError(\"Connection failed: \" + JSON.stringify(payload)))]\n      });\n      clearTimeout(startAckTimeoutId);\n      observer.complete();\n\n      if (typeof subscriptionFailedCallback === 'function') {\n        subscriptionFailedCallback();\n      }\n    }\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._errorDisconnect = function (msg) {\n    logger.debug(\"Disconnect error: \" + msg);\n    this.subscriptionObserverMap.forEach(function (_a) {\n      var observer = _a.observer;\n\n      if (observer && !observer.closed) {\n        observer.error({\n          errors: [__assign({}, new GraphQLError(msg))]\n        });\n      }\n    });\n    this.subscriptionObserverMap.clear();\n\n    if (this.awsRealTimeSocket) {\n      this.awsRealTimeSocket.close();\n    }\n\n    this.socketStatus = SOCKET_STATUS.CLOSED;\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._timeoutStartSubscriptionAck = function (subscriptionId) {\n    var _a = this.subscriptionObserverMap.get(subscriptionId) || {},\n        observer = _a.observer,\n        query = _a.query,\n        variables = _a.variables;\n\n    if (!observer) {\n      return;\n    }\n\n    this.subscriptionObserverMap.set(subscriptionId, {\n      observer: observer,\n      query: query,\n      variables: variables,\n      subscriptionState: SUBSCRIPTION_STATUS.FAILED\n    });\n\n    if (observer && !observer.closed) {\n      observer.error({\n        errors: [__assign({}, new GraphQLError(\"Subscription timeout \" + JSON.stringify({\n          query: query,\n          variables: variables\n        })))]\n      }); // Cleanup will be automatically executed\n\n      observer.complete();\n    }\n\n    logger.debug('timeoutStartSubscription', JSON.stringify({\n      query: query,\n      variables: variables\n    }));\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._initializeWebSocketConnection = function (_a) {\n    var _this = this;\n\n    var appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint,\n        authenticationType = _a.authenticationType,\n        apiKey = _a.apiKey,\n        region = _a.region;\n\n    if (this.socketStatus === SOCKET_STATUS.READY) {\n      return;\n    }\n\n    return new Promise(function (res, rej) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var protocol, discoverableEndpoint, payloadString, headerString, _a, _b, headerQs, payloadQs, awsRealTimeUrl, err_3;\n\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              this.promiseArray.push({\n                res: res,\n                rej: rej\n              });\n              if (!(this.socketStatus === SOCKET_STATUS.CLOSED)) return [3\n              /*break*/\n              , 5];\n              _c.label = 1;\n\n            case 1:\n              _c.trys.push([1, 4,, 5]);\n\n              this.socketStatus = SOCKET_STATUS.CONNECTING;\n              protocol = this.isSSLEnabled ? 'wss://' : 'ws://';\n              discoverableEndpoint = appSyncGraphqlEndpoint.replace('https://', protocol).replace('http://', protocol).replace('appsync-api', 'appsync-realtime-api').replace('gogi-beta', 'grt-beta');\n              payloadString = '{}';\n              _b = (_a = JSON).stringify;\n              return [4\n              /*yield*/\n              , this._awsRealTimeHeaderBasedAuth({\n                authenticationType: authenticationType,\n                payload: payloadString,\n                canonicalUri: '/connect',\n                apiKey: apiKey,\n                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                region: region\n              })];\n\n            case 2:\n              headerString = _b.apply(_a, [_c.sent()]);\n              headerQs = Buffer.from(headerString).toString('base64');\n              payloadQs = Buffer.from(payloadString).toString('base64');\n              awsRealTimeUrl = discoverableEndpoint + \"?header=\" + headerQs + \"&payload=\" + payloadQs;\n              return [4\n              /*yield*/\n              , this._initializeRetryableHandshake({\n                awsRealTimeUrl: awsRealTimeUrl\n              })];\n\n            case 3:\n              _c.sent();\n\n              this.promiseArray.forEach(function (_a) {\n                var res = _a.res;\n                logger.debug('Notifying connection successful');\n                res();\n              });\n              this.socketStatus = SOCKET_STATUS.READY;\n              this.promiseArray = [];\n              return [3\n              /*break*/\n              , 5];\n\n            case 4:\n              err_3 = _c.sent();\n              this.promiseArray.forEach(function (_a) {\n                var rej = _a.rej;\n                return rej(err_3);\n              });\n              this.promiseArray = [];\n\n              if (this.awsRealTimeSocket && this.awsRealTimeSocket.readyState === WebSocket.OPEN) {\n                this.awsRealTimeSocket.close(3001);\n              }\n\n              this.awsRealTimeSocket = null;\n              this.socketStatus = SOCKET_STATUS.CLOSED;\n              return [3\n              /*break*/\n              , 5];\n\n            case 5:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._initializeRetryableHandshake = function (_a) {\n    var awsRealTimeUrl = _a.awsRealTimeUrl;\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            logger.debug(\"Initializaling retryable Handshake\");\n            return [4\n            /*yield*/\n            , jitteredExponentialRetry(this._initializeHandshake.bind(this), [{\n              awsRealTimeUrl: awsRealTimeUrl\n            }], MAX_DELAY_MS)];\n\n          case 1:\n            _b.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._initializeHandshake = function (_a) {\n    var awsRealTimeUrl = _a.awsRealTimeUrl;\n    return __awaiter(this, void 0, void 0, function () {\n      var err_4, errorType, errorCode;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            logger.debug(\"Initializing handshake \" + awsRealTimeUrl);\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , function () {\n              return new Promise(function (res, rej) {\n                var newSocket = new WebSocket(awsRealTimeUrl, 'graphql-ws');\n\n                newSocket.onerror = function () {\n                  logger.debug(\"WebSocket connection error\");\n                };\n\n                newSocket.onclose = function () {\n                  rej(new Error('Connection handshake error'));\n                };\n\n                newSocket.onopen = function () {\n                  _this.awsRealTimeSocket = newSocket;\n                  return res();\n                };\n              });\n            }()];\n\n          case 2:\n            _b.sent(); // Step 2: wait for ack from AWS AppSyncReaTime after sending init\n\n\n            return [4\n            /*yield*/\n            , function () {\n              return new Promise(function (res, rej) {\n                var ackOk = false;\n\n                _this.awsRealTimeSocket.onerror = function (error) {\n                  logger.debug(\"WebSocket error \" + JSON.stringify(error));\n                };\n\n                _this.awsRealTimeSocket.onclose = function (event) {\n                  logger.debug(\"WebSocket closed \" + event.reason);\n                  rej(new Error(JSON.stringify(event)));\n                };\n\n                _this.awsRealTimeSocket.onmessage = function (message) {\n                  logger.debug(\"subscription message from AWS AppSyncRealTime: \" + message.data + \" \");\n                  var data = JSON.parse(message.data);\n                  var type = data.type,\n                      _a = data.payload,\n                      _b = (_a === void 0 ? {} : _a).connectionTimeoutMs,\n                      connectionTimeoutMs = _b === void 0 ? DEFAULT_KEEP_ALIVE_TIMEOUT : _b;\n\n                  if (type === MESSAGE_TYPES.GQL_CONNECTION_ACK) {\n                    ackOk = true;\n                    _this.keepAliveTimeout = connectionTimeoutMs;\n                    _this.awsRealTimeSocket.onmessage = _this._handleIncomingSubscriptionMessage.bind(_this);\n\n                    _this.awsRealTimeSocket.onerror = function (err) {\n                      logger.debug(err);\n\n                      _this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n                    };\n\n                    _this.awsRealTimeSocket.onclose = function (event) {\n                      logger.debug(\"WebSocket closed \" + event.reason);\n\n                      _this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n                    };\n\n                    res('Cool, connected to AWS AppSyncRealTime');\n                    return;\n                  }\n\n                  if (type === MESSAGE_TYPES.GQL_CONNECTION_ERROR) {\n                    var _c = data.payload,\n                        _d = (_c === void 0 ? {} : _c).errors,\n                        _e = __read(_d === void 0 ? [] : _d, 1),\n                        _f = _e[0],\n                        _g = _f === void 0 ? {} : _f,\n                        _h = _g.errorType,\n                        errorType = _h === void 0 ? '' : _h,\n                        _j = _g.errorCode,\n                        errorCode = _j === void 0 ? 0 : _j;\n\n                    rej({\n                      errorType: errorType,\n                      errorCode: errorCode\n                    });\n                  }\n                };\n\n                var gqlInit = {\n                  type: MESSAGE_TYPES.GQL_CONNECTION_INIT\n                };\n\n                _this.awsRealTimeSocket.send(JSON.stringify(gqlInit));\n\n                function checkAckOk() {\n                  if (!ackOk) {\n                    rej(new Error(\"Connection timeout: ack from AWSRealTime was not received on \" + CONNECTION_INIT_TIMEOUT + \" ms\"));\n                  }\n                }\n\n                setTimeout(checkAckOk.bind(_this), CONNECTION_INIT_TIMEOUT);\n              });\n            }()];\n\n          case 3:\n            // Step 2: wait for ack from AWS AppSyncReaTime after sending init\n            _b.sent();\n\n            return [3\n            /*break*/\n            , 5];\n\n          case 4:\n            err_4 = _b.sent();\n            errorType = err_4.errorType, errorCode = err_4.errorCode;\n\n            if (NON_RETRYABLE_CODES.includes(errorCode)) {\n              throw new NonRetryableError(errorType);\n            } else if (errorType) {\n              throw new Error(errorType);\n            } else {\n              throw err_4;\n            }\n\n            return [3\n            /*break*/\n            , 5];\n\n          case 5:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._awsRealTimeHeaderBasedAuth = function (_a) {\n    var authenticationType = _a.authenticationType,\n        payload = _a.payload,\n        canonicalUri = _a.canonicalUri,\n        appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint,\n        apiKey = _a.apiKey,\n        region = _a.region;\n    return __awaiter(this, void 0, void 0, function () {\n      var headerHandler, handler, host, result;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            headerHandler = {\n              API_KEY: this._awsRealTimeApiKeyHeader.bind(this),\n              AWS_IAM: this._awsRealTimeIAMHeader.bind(this),\n              OPENID_CONNECT: this._awsRealTimeOPENIDHeader.bind(this),\n              AMAZON_COGNITO_USER_POOLS: this._awsRealTimeCUPHeader.bind(this)\n            };\n            handler = headerHandler[authenticationType];\n\n            if (typeof handler !== 'function') {\n              logger.debug(\"Authentication type \" + authenticationType + \" not supported\");\n              return [2\n              /*return*/\n              , ''];\n            }\n\n            host = url.parse(appSyncGraphqlEndpoint).host;\n            return [4\n            /*yield*/\n            , handler({\n              payload: payload,\n              canonicalUri: canonicalUri,\n              appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n              apiKey: apiKey,\n              region: region,\n              host: host\n            })];\n\n          case 1:\n            result = _b.sent();\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._awsRealTimeCUPHeader = function (_a) {\n    var host = _a.host;\n    return __awaiter(this, void 0, void 0, function () {\n      var session;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Auth.currentSession()];\n\n          case 1:\n            session = _b.sent();\n            return [2\n            /*return*/\n            , {\n              Authorization: session.getAccessToken().getJwtToken(),\n              host: host\n            }];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._awsRealTimeOPENIDHeader = function (_a) {\n    var host = _a.host;\n    return __awaiter(this, void 0, void 0, function () {\n      var token, federatedInfo, currentUser;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Cache.getItem('federatedInfo')];\n\n          case 1:\n            federatedInfo = _b.sent();\n            if (!federatedInfo) return [3\n            /*break*/\n            , 2];\n            token = federatedInfo.token;\n            return [3\n            /*break*/\n            , 4];\n\n          case 2:\n            return [4\n            /*yield*/\n            , Auth.currentAuthenticatedUser()];\n\n          case 3:\n            currentUser = _b.sent();\n\n            if (currentUser) {\n              token = currentUser.token;\n            }\n\n            _b.label = 4;\n\n          case 4:\n            if (!token) {\n              throw new Error('No federated jwt');\n            }\n\n            return [2\n            /*return*/\n            , {\n              Authorization: token,\n              host: host\n            }];\n        }\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._awsRealTimeApiKeyHeader = function (_a) {\n    var apiKey = _a.apiKey,\n        host = _a.host;\n    return __awaiter(this, void 0, void 0, function () {\n      var dt, dtStr;\n      return __generator(this, function (_b) {\n        dt = new Date();\n        dtStr = dt.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n        return [2\n        /*return*/\n        , {\n          host: host,\n          'x-amz-date': dtStr,\n          'x-api-key': apiKey\n        }];\n      });\n    });\n  };\n\n  AWSAppSyncRealTimeProvider.prototype._awsRealTimeIAMHeader = function (_a) {\n    var payload = _a.payload,\n        canonicalUri = _a.canonicalUri,\n        appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint,\n        region = _a.region;\n    return __awaiter(this, void 0, void 0, function () {\n      var endpointInfo, credentialsOK, creds, request, signed_params;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            endpointInfo = {\n              region: region,\n              service: 'appsync'\n            };\n            return [4\n            /*yield*/\n            , this._ensureCredentials()];\n\n          case 1:\n            credentialsOK = _b.sent();\n\n            if (!credentialsOK) {\n              throw new Error('No credentials');\n            }\n\n            return [4\n            /*yield*/\n            , Credentials.get().then(function (credentials) {\n              return {\n                secret_key: credentials.secretAccessKey,\n                access_key: credentials.accessKeyId,\n                session_token: credentials.sessionToken\n              };\n            })];\n\n          case 2:\n            creds = _b.sent();\n            request = {\n              url: \"\" + appSyncGraphqlEndpoint + canonicalUri,\n              data: payload,\n              method: 'POST',\n              headers: __assign({}, AWS_APPSYNC_REALTIME_HEADERS)\n            };\n            signed_params = Signer.sign(request, creds, endpointInfo);\n            return [2\n            /*return*/\n            , signed_params.headers];\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  AWSAppSyncRealTimeProvider.prototype._ensureCredentials = function () {\n    return Credentials.get().then(function (credentials) {\n      if (!credentials) return false;\n      var cred = Credentials.shear(credentials);\n      logger.debug('set credentials for AWSAppSyncRealTimeProvider', cred);\n      return true;\n    }).catch(function (err) {\n      logger.warn('ensure credentials error', err);\n      return false;\n    });\n  };\n\n  return AWSAppSyncRealTimeProvider;\n}(AbstractPubSubProvider);\n\nexport { AWSAppSyncRealTimeProvider };","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n// import '../Common/Polyfills';\n\n\nimport Observable from 'zen-observable-ts';\nimport { Amplify, browserOrNode, ConsoleLogger as Logger, INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER, INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER } from '@aws-amplify/core';\nimport { AWSAppSyncProvider, AWSAppSyncRealTimeProvider } from './Providers';\nvar isNode = browserOrNode().isNode;\nvar logger = new Logger('PubSub');\n\nvar PubSubClass =\n/** @class */\nfunction () {\n  /**\n   * Initialize PubSub with AWS configurations\n   *\n   * @param {PubSubOptions} options - Configuration object for PubSub\n   */\n  function PubSubClass(options) {\n    this._options = options;\n    logger.debug('PubSub Options', this._options);\n    this._pluggables = [];\n    this.subscribe = this.subscribe.bind(this);\n  }\n\n  Object.defineProperty(PubSubClass.prototype, \"awsAppSyncProvider\", {\n    /**\n     * Lazy instantiate AWSAppSyncProvider when it is required by the API category\n     */\n    get: function get() {\n      if (!this._awsAppSyncProvider) {\n        this._awsAppSyncProvider = new AWSAppSyncProvider(this._options);\n      }\n\n      return this._awsAppSyncProvider;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PubSubClass.prototype, \"awsAppSyncRealTimeProvider\", {\n    /**\n     * Lazy instantiate AWSAppSyncRealTimeProvider when it is required by the API category\n     */\n    get: function get() {\n      if (!this._awsAppSyncRealTimeProvider) {\n        this._awsAppSyncRealTimeProvider = new AWSAppSyncRealTimeProvider(this._options);\n      }\n\n      return this._awsAppSyncRealTimeProvider;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  PubSubClass.prototype.getModuleName = function () {\n    return 'PubSub';\n  };\n  /**\n   * Configure PubSub part with configurations\n   *\n   * @param {PubSubOptions} config - Configuration for PubSub\n   * @return {Object} - The current configuration\n   */\n\n\n  PubSubClass.prototype.configure = function (options) {\n    var _this = this;\n\n    var opt = options ? options.PubSub || options : {};\n    logger.debug('configure PubSub', {\n      opt: opt\n    });\n    this._options = Object.assign({}, this._options, opt);\n\n    this._pluggables.map(function (pluggable) {\n      return pluggable.configure(_this._options);\n    });\n\n    return this._options;\n  };\n  /**\n   * add plugin into Analytics category\n   * @param {Object} pluggable - an instance of the plugin\n   */\n\n\n  PubSubClass.prototype.addPluggable = function (pluggable) {\n    return __awaiter(this, void 0, void 0, function () {\n      var config;\n      return __generator(this, function (_a) {\n        if (pluggable && pluggable.getCategory() === 'PubSub') {\n          this._pluggables.push(pluggable);\n\n          config = pluggable.configure(this._options);\n          return [2\n          /*return*/\n          , config];\n        }\n\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n\n  PubSubClass.prototype.getProviderByName = function (providerName) {\n    if (providerName === INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER) {\n      return this.awsAppSyncProvider;\n    }\n\n    if (providerName === INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER) {\n      return this.awsAppSyncRealTimeProvider;\n    }\n\n    return this._pluggables.find(function (pluggable) {\n      return pluggable.getProviderName() === providerName;\n    });\n  };\n\n  PubSubClass.prototype.getProviders = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var providerName = options.provider;\n\n    if (!providerName) {\n      return this._pluggables;\n    }\n\n    var provider = this.getProviderByName(providerName);\n\n    if (!provider) {\n      throw new Error(\"Could not find provider named \" + providerName);\n    }\n\n    return [provider];\n  };\n\n  PubSubClass.prototype.publish = function (topics, msg, options) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , Promise.all(this.getProviders(options).map(function (provider) {\n          return provider.publish(topics, msg, options);\n        }))];\n      });\n    });\n  };\n\n  PubSubClass.prototype.subscribe = function (topics, options) {\n    if (isNode && this._options && this._options.ssr) {\n      throw new Error('Subscriptions are not supported for Server-Side Rendering (SSR)');\n    }\n\n    logger.debug('subscribe options', options);\n    var providers = this.getProviders(options);\n    return new Observable(function (observer) {\n      var observables = providers.map(function (provider) {\n        return {\n          provider: provider,\n          observable: provider.subscribe(topics, options)\n        };\n      });\n      var subscriptions = observables.map(function (_a) {\n        var provider = _a.provider,\n            observable = _a.observable;\n        return observable.subscribe({\n          start: console.error,\n          next: function next(value) {\n            return observer.next({\n              provider: provider,\n              value: value\n            });\n          },\n          error: function error(_error) {\n            return observer.error({\n              provider: provider,\n              error: _error\n            });\n          }\n        });\n      });\n      return function () {\n        return subscriptions.forEach(function (subscription) {\n          return subscription.unsubscribe();\n        });\n      };\n    });\n  };\n\n  return PubSubClass;\n}();\n\nexport { PubSubClass };\nexport var PubSub = new PubSubClass(null);\nAmplify.register(PubSub);","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { ConsoleLogger as Logger } from './Logger';\nimport { Sha256 as jsSha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@aws-sdk/util-hex-encoding';\nimport { parse, format } from 'url';\nimport { DateUtils } from './Util';\nvar logger = new Logger('Signer');\nvar DEFAULT_ALGORITHM = 'AWS4-HMAC-SHA256';\nvar IOT_SERVICE_NAME = 'iotdevicegateway';\n\nvar encrypt = function encrypt(key, src) {\n  var hash = new jsSha256(key);\n  hash.update(src);\n  return hash.digestSync();\n};\n\nvar hash = function hash(src) {\n  var arg = src || '';\n  var hash = new jsSha256();\n  hash.update(arg);\n  return toHex(hash.digestSync());\n};\n/**\n * @private\n * RFC 3986 compliant version of encodeURIComponent\n */\n\n\nvar escape_RFC3986 = function escape_RFC3986(component) {\n  return component.replace(/[!'()*]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase();\n  });\n};\n/**\n * @private\n * Create canonical query string\n *\n */\n\n\nvar canonical_query = function canonical_query(query) {\n  if (!query || query.length === 0) {\n    return '';\n  }\n\n  return query.split('&').map(function (e) {\n    var key_val = e.split('=');\n\n    if (key_val.length === 1) {\n      return e;\n    } else {\n      var reencoded_val = escape_RFC3986(key_val[1]);\n      return key_val[0] + '=' + reencoded_val;\n    }\n  }).sort(function (a, b) {\n    var key_a = a.split('=')[0];\n    var key_b = b.split('=')[0];\n\n    if (key_a === key_b) {\n      return a < b ? -1 : 1;\n    } else {\n      return key_a < key_b ? -1 : 1;\n    }\n  }).join('&');\n};\n/**\n* @private\n* Create canonical headers\n*\n<pre>\nCanonicalHeaders =\n    CanonicalHeadersEntry0 + CanonicalHeadersEntry1 + ... + CanonicalHeadersEntryN\nCanonicalHeadersEntry =\n    Lowercase(HeaderName) + ':' + Trimall(HeaderValue) + '\\n'\n</pre>\n*/\n\n\nvar canonical_headers = function canonical_headers(headers) {\n  if (!headers || Object.keys(headers).length === 0) {\n    return '';\n  }\n\n  return Object.keys(headers).map(function (key) {\n    return {\n      key: key.toLowerCase(),\n      value: headers[key] ? headers[key].trim().replace(/\\s+/g, ' ') : ''\n    };\n  }).sort(function (a, b) {\n    return a.key < b.key ? -1 : 1;\n  }).map(function (item) {\n    return item.key + ':' + item.value;\n  }).join('\\n') + '\\n';\n};\n/**\n * List of header keys included in the canonical headers.\n * @access private\n */\n\n\nvar signed_headers = function signed_headers(headers) {\n  return Object.keys(headers).map(function (key) {\n    return key.toLowerCase();\n  }).sort().join(';');\n};\n/**\n* @private\n* Create canonical request\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html|Create a Canonical Request}\n*\n<pre>\nCanonicalRequest =\n    HTTPRequestMethod + '\\n' +\n    CanonicalURI + '\\n' +\n    CanonicalQueryString + '\\n' +\n    CanonicalHeaders + '\\n' +\n    SignedHeaders + '\\n' +\n    HexEncode(Hash(RequestPayload))\n</pre>\n*/\n\n\nvar canonical_request = function canonical_request(request) {\n  var url_info = parse(request.url);\n  return [request.method || '/', encodeURIComponent(url_info.pathname).replace(/%2F/gi, '/'), canonical_query(url_info.query), canonical_headers(request.headers), signed_headers(request.headers), hash(request.data)].join('\\n');\n};\n\nvar parse_service_info = function parse_service_info(request) {\n  var url_info = parse(request.url),\n      host = url_info.host;\n  var matched = host.match(/([^\\.]+)\\.(?:([^\\.]*)\\.)?amazonaws\\.com$/);\n  var parsed = (matched || []).slice(1, 3);\n\n  if (parsed[1] === 'es') {\n    // Elastic Search\n    parsed = parsed.reverse();\n  }\n\n  return {\n    service: request.service || parsed[0],\n    region: request.region || parsed[1]\n  };\n};\n\nvar credential_scope = function credential_scope(d_str, region, service) {\n  return [d_str, region, service, 'aws4_request'].join('/');\n};\n/**\n* @private\n* Create a string to sign\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html|Create String to Sign}\n*\n<pre>\nStringToSign =\n    Algorithm + \\n +\n    RequestDateTime + \\n +\n    CredentialScope + \\n +\n    HashedCanonicalRequest\n</pre>\n*/\n\n\nvar string_to_sign = function string_to_sign(algorithm, canonical_request, dt_str, scope) {\n  return [algorithm, dt_str, scope, hash(canonical_request)].join('\\n');\n};\n/**\n* @private\n* Create signing key\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html|Calculate Signature}\n*\n<pre>\nkSecret = your secret access key\nkDate = HMAC(\"AWS4\" + kSecret, Date)\nkRegion = HMAC(kDate, Region)\nkService = HMAC(kRegion, Service)\nkSigning = HMAC(kService, \"aws4_request\")\n</pre>\n*/\n\n\nvar get_signing_key = function get_signing_key(secret_key, d_str, service_info) {\n  logger.debug(service_info);\n  var k = 'AWS4' + secret_key,\n      k_date = encrypt(k, d_str),\n      k_region = encrypt(k_date, service_info.region),\n      k_service = encrypt(k_region, service_info.service),\n      k_signing = encrypt(k_service, 'aws4_request');\n  return k_signing;\n};\n\nvar get_signature = function get_signature(signing_key, str_to_sign) {\n  return toHex(encrypt(signing_key, str_to_sign));\n};\n/**\n * @private\n * Create authorization header\n * Refer to\n * {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html|Add the Signing Information}\n */\n\n\nvar get_authorization_header = function get_authorization_header(algorithm, access_key, scope, signed_headers, signature) {\n  return [algorithm + ' ' + 'Credential=' + access_key + '/' + scope, 'SignedHeaders=' + signed_headers, 'Signature=' + signature].join(', ');\n};\n\nvar Signer =\n/** @class */\nfunction () {\n  function Signer() {}\n  /**\n  * Sign a HTTP request, add 'Authorization' header to request param\n  * @method sign\n  * @memberof Signer\n  * @static\n  *\n  * @param {object} request - HTTP request object\n  <pre>\n  request: {\n      method: GET | POST | PUT ...\n      url: ...,\n      headers: {\n          header1: ...\n      },\n      data: data\n  }\n  </pre>\n  * @param {object} access_info - AWS access credential info\n  <pre>\n  access_info: {\n      access_key: ...,\n      secret_key: ...,\n      session_token: ...\n  }\n  </pre>\n  * @param {object} [service_info] - AWS service type and region, optional,\n  *                                  if not provided then parse out from url\n  <pre>\n  service_info: {\n      service: ...,\n      region: ...\n  }\n  </pre>\n  *\n  * @returns {object} Signed HTTP request\n  */\n\n\n  Signer.sign = function (request, access_info, service_info) {\n    if (service_info === void 0) {\n      service_info = null;\n    }\n\n    request.headers = request.headers || {}; // datetime string and date string\n\n    var dt = DateUtils.getDateWithClockOffset(),\n        dt_str = dt.toISOString().replace(/[:\\-]|\\.\\d{3}/g, ''),\n        d_str = dt_str.substr(0, 8);\n    var url_info = parse(request.url);\n    request.headers['host'] = url_info.host;\n    request.headers['x-amz-date'] = dt_str;\n\n    if (access_info.session_token) {\n      request.headers['X-Amz-Security-Token'] = access_info.session_token;\n    } // Task 1: Create a Canonical Request\n\n\n    var request_str = canonical_request(request);\n    logger.debug(request_str); // Task 2: Create a String to Sign\n\n    var serviceInfo = service_info || parse_service_info(request),\n        scope = credential_scope(d_str, serviceInfo.region, serviceInfo.service),\n        str_to_sign = string_to_sign(DEFAULT_ALGORITHM, request_str, dt_str, scope); // Task 3: Calculate the Signature\n\n    var signing_key = get_signing_key(access_info.secret_key, d_str, serviceInfo),\n        signature = get_signature(signing_key, str_to_sign); // Task 4: Adding the Signing information to the Request\n\n    var authorization_header = get_authorization_header(DEFAULT_ALGORITHM, access_info.access_key, scope, signed_headers(request.headers), signature);\n    request.headers['Authorization'] = authorization_header;\n    return request;\n  };\n\n  Signer.signUrl = function (urlOrRequest, accessInfo, serviceInfo, expiration) {\n    var urlToSign = typeof urlOrRequest === 'object' ? urlOrRequest.url : urlOrRequest;\n    var method = typeof urlOrRequest === 'object' ? urlOrRequest.method : 'GET';\n    var body = typeof urlOrRequest === 'object' ? urlOrRequest.body : undefined;\n    var now = DateUtils.getDateWithClockOffset().toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n    var today = now.substr(0, 8); // Intentionally discarding search\n\n    var _a = parse(urlToSign, true, true),\n        search = _a.search,\n        parsedUrl = __rest(_a, [\"search\"]);\n\n    var host = parsedUrl.host;\n    var signedHeaders = {\n      host: host\n    };\n\n    var _b = serviceInfo || parse_service_info({\n      url: format(parsedUrl)\n    }),\n        region = _b.region,\n        service = _b.service;\n\n    var credentialScope = credential_scope(today, region, service); // IoT service does not allow the session token in the canonical request\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n\n    var sessionTokenRequired = accessInfo.session_token && service !== IOT_SERVICE_NAME;\n\n    var queryParams = __assign(__assign(__assign({\n      'X-Amz-Algorithm': DEFAULT_ALGORITHM,\n      'X-Amz-Credential': [accessInfo.access_key, credentialScope].join('/'),\n      'X-Amz-Date': now.substr(0, 16)\n    }, sessionTokenRequired ? {\n      'X-Amz-Security-Token': \"\" + accessInfo.session_token\n    } : {}), expiration ? {\n      'X-Amz-Expires': \"\" + expiration\n    } : {}), {\n      'X-Amz-SignedHeaders': Object.keys(signedHeaders).join(',')\n    });\n\n    var canonicalRequest = canonical_request({\n      method: method,\n      url: format(__assign(__assign({}, parsedUrl), {\n        query: __assign(__assign({}, parsedUrl.query), queryParams)\n      })),\n      headers: signedHeaders,\n      data: body\n    });\n    var stringToSign = string_to_sign(DEFAULT_ALGORITHM, canonicalRequest, now, credentialScope);\n    var signing_key = get_signing_key(accessInfo.secret_key, today, {\n      region: region,\n      service: service\n    });\n    var signature = get_signature(signing_key, stringToSign);\n\n    var additionalQueryParams = __assign({\n      'X-Amz-Signature': signature\n    }, accessInfo.session_token && {\n      'X-Amz-Security-Token': accessInfo.session_token\n    });\n\n    var result = format({\n      protocol: parsedUrl.protocol,\n      slashes: true,\n      hostname: parsedUrl.hostname,\n      port: parsedUrl.port,\n      pathname: parsedUrl.pathname,\n      query: __assign(__assign(__assign({}, parsedUrl.query), queryParams), additionalQueryParams)\n    });\n    return result;\n  };\n\n  return Signer;\n}();\n\nexport { Signer };\n/**\n * @deprecated use per-function import\n */\n\nexport default Signer;"],"sourceRoot":""}